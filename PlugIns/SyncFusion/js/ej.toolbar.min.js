/*!
*  filename: ej.toolbar.min.js
*  version : 11.2.0.63
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n,t){t.widget("ejToolbar","ej.Toolbar",{element:null,model:null,_rootCSS:"e-toolbar",defaults:{height:"",width:"",disabled:!1,hide:!1,itemSeparator:!0,orientation:"horizontal",rtl:!1,roundedCorner:!1,dataSource:null,query:null,fields:null,cssClass:"",create:null,click:null,itemHover:null,itemLeave:null,destroy:null},dataTypes:{height:"string",width:"string",disabled:"boolean",hide:"boolean",itemSeparator:"boolean",orientation:"enum",rtl:"boolean",roundedCorner:"boolean",cssClass:"string"},hide:function(){this.element.css("display","none")},show:function(){this.element.css("display","inline-block")},_init:function(){this.model.dataSource!=null&&this._generateTemplate(),this._initialize()},_setModel:function(n){var t;for(t in n)switch(t){case"height":this._setHeight(n[t]);break;case"width":this._setWidth(n[t]);break;case"disabled":this._controlStatus(n[t]);break;case"hide":this._controlVisibleOptions(n[t]);break;case"orientation":this._setOrientation(n[t]);break;case"rtl":this._enableRTL(n[t]);break;case"roundedCorner":this._roundedCorner(n[t]);break;case"cssClass":this._setSkin(n[t])}},_setHeight:function(n){this.element.height(n)},_setWidth:function(n){this.element.width(n)},_setOrientation:function(n){n!=t.orientation.Vertical?(this.element.removeClass("e-toolbar-vertical toolcover "+this.model.cssClass),this.element.addClass("e-toolbar-horizontal toolcover toolbarspan "+this.model.cssClass),this.itemsContainer.removeClass("e-toolbar-vertical "+this.model.cssClass),this.itemsContainer.addClass("e-toolbar-horizontal "+this.model.cssClass),this.items.removeClass("e-toolbar-vertical "+this.model.cssClass),this.items.addClass("e-toolbar-horizontal "+this.model.cssClass)):(this.element.removeClass("e-toolbar-horizontal toolcover toolbarspan "+this.model.cssClass),this.element.addClass("e-toolbar-vertical toolcover "+this.model.cssClass),this.itemsContainer.removeClass("e-toolbar-horizontal "+this.model.cssClass),this.itemsContainer.addClass("e-toolbar-vertical "+this.model.cssClass),this.items.removeClass("e-toolbar-horizontal "+this.model.cssClass),this.items.addClass("e-toolbar-vertical "+this.model.cssClass)),this.items.children("img").addClass("alignmiddle sprite-image"),this.items.children("span").addClass("alignmiddle sprite-image"),this.items.children("div").addClass("alignmiddle sprite-image"),this.items.addClass("toolbartext")},_setSkin:function(n){this.element.removeClass(this.model.cssClass),this.itemsContainer.removeClass(this.model.cssClass),this.items.removeClass(this.model.cssClass),this.element.addClass(n),this.itemsContainer.addClass(n),this.items.addClass(n)},_destroy:function(){this.element.removeClass("e-toolbar-horizontal toolcover "+this.model.cssClass),this.element.removeClass("e-toolbar-vertical toolcover "+this.model.cssClass),this.itemsContainer.removeClass("e-toolbar-horizontal "+this.model.cssClass),this.itemsContainer.removeClass("e-toolbar-vertical "+this.model.cssClass),this.items.removeClass("e-toolbar-horizontal "+this.model.cssClass),this.items.removeClass("e-toolbar-vertical "+this.model.cssClass)},_initialize:function(){this._focusEnable=!0,this._renderControl(),this._roundedCorner(this.model.roundedCorner),this._wireEvents(),this._controlVisibleOptions(this.model.hide),this._enableRTL(this.model.rtl),this._controlStatus(this.model.disabled)},_controlVisibleOptions:function(n){n!=!1?this.hide():this.show()},_controlStatus:function(n){n!=!1?this.disableAll():this.enableAll()},_roundedCorner:function(n){n!=!1?this.element.addClass("e-corner-all"):this.element.removeClass("e-corner-all")},_generateTemplate:function(){var n=this,i;this.element.css("visibility","hidden"),this.model.dataSource instanceof t.DataManager?(i=this.model.dataSource.executeQuery(this.model.query),i.done(function(t){n.itemsSource=t.result,n.element.append(n._generateTagitems()),n._initialize(),n.element.css("visibility","visible")})):(n.itemsSource=n.model.dataSource,n.element.append(n._generateTagitems()),n.element.css("visibility","visible"))},_renderControl:function(){this._renderToolbarItems(),this._setOrientation(this.model.orientation),this._renderToolbarSeparator(),this._setHeight(this.model.height),this._setWidth(this.model.width)},_renderToolbarItems:function(){this.target=this.element[0],this.itemsContainer=this.element.children("ol,ul"),this.itemsContainer.children("ol,ul").remove(),this.items=this.itemsContainer.children("li"),this._liCount=this.items.length},_generateTagitems:function(){var i,n;for(i=this.itemsSource,this.ultag=t.buildTag("ul"),n=0;n<i.length;n++)this.ultag.append(this._generateLi(i[n]));return this.ultag},_generateLi:function(i){var r,f,e,u;if(r=t.buildTag("li"),i[this.model.fields.id]&&r.attr("id",i[this.model.fields.id]),i[this.model.fields.tooltipText]&&r.attr("title",i[this.model.fields.tooltipText]),i[this.model.fields.imageUrl]&&i[this.model.fields.imageUrl]!=""){if(f=t.buildTag("img.alignmiddle","",{},{src:i[this.model.fields.imageUrl],alt:i[this.model.fields.text]}),i[this.model.fields.imageAttributes]&&i[this.model.fields.imageAttributes]!="")for(u=0;u<i[this.model.fields.imageAttributes].length;u++)n.each(i[this.model.fields.imageAttributes][u],function(n,t){f.attr(n,t)});r.append(f)}if(i[this.model.fields.spriteCSS]&&i[this.model.fields.spriteCSS]!=""&&(e=t.buildTag("div.alignmiddle "+i[this.model.fields.spriteCSS]+" sprite-image"),r.append(e)),i[this.model.fields.text]&&i[this.model.fields.text]!=""&&r.append(i[this.model.fields.text]),i[this.model.fields.htmlAttributes]&&i[this.model.fields.htmlAttributes]!="")for(u=0;u<i[this.model.fields.htmlAttributes].length;u++)n.each(i[this.model.fields.htmlAttributes][u],function(n,t){r.attr(n,t)});return r},_renderToolbarSeparator:function(){var i;if(this.model.itemSeparator)for(i=0;i<this.itemsContainer.length-1;i++)this.model.rtl?(n(this.itemsContainer[i]).addClass("toolbarseparator"),this.model.orientation==t.orientation.Horizontal&&(n(this.itemsContainer[i]).addClass("rtltoolbarseparator"),n(this.itemsContainer[i]).removeClass("toolbarseparator"))):(n(this.itemsContainer[i]).addClass("toolbarseparator"),this.model.orientation==t.orientation.Horizontal&&n(this.itemsContainer[i]).removeClass("rtltoolbarseparator"))},_enableRTL:function(n){n?(this.element.addClass("e-rtl"),this.items.addClass("classrtl"),this.model.orientation==t.orientation.Horizontal&&this.itemsContainer.addClass("classrtl")):(this.element.removeClass("e-rtl"),this.items.removeClass("classrtl"),this.model.orientation==t.orientation.Horizontal&&this.itemsContainer.removeClass("classrtl")),this.model.rtl=n,this._renderToolbarSeparator()},disableItem:function(t){var i=n(t);i==null||i.length<=0||i.hasClass("disabletoolli")||(i.css("opacity",.25),i.addClass("disabletoolli"))},enableItem:function(t){var i=n(t);i==null||i.length<=0||(i.removeClass("disabletoolli"),i.css("opacity",1))},disableItembyID:function(n){var t;(t=this.itemsContainer.find("li#"+n),t==null||t.length<=0)||this.disableItem(t)},enableItembyID:function(n){var t;(t=this.itemsContainer.find("li#"+n),t==null||t.length<=0)||this.enableItem(t)},disableAll:function(){this.items.css("opacity",.25),this.items.addClass("disabletoolli")},enableAll:function(){this.items.css("opacity",1),this.items.removeClass("disabletoolli")},selectItem:function(t){var i=n(t);i==null||i.length<=0||i.hasClass("disabletoolli")||(i.removeClass("toolselected"),i.addClass("toolselected"))},deselectItem:function(t){var i=n(t);i==null||i.length<=0||i.hasClass("disabletoolli")||i.removeClass("toolselected")},selectItembyID:function(n){var t;(t=this.itemsContainer.find("li#"+n),t==null||t.length<=0)||this.selectItem(t)},deselectItembyID:function(n){var t;(t=this.itemsContainer.find("li#"+n),t==null||t.length<=0)||this.deselectItem(t)},removeItem:function(t){var i=n(t);i==null||i.length<=0||i.remove()},removeItembyID:function(n){var t;(t=this.itemsContainer.find("li#"+n),t==null||t.length<=0)||this.removeItem(t)},_wireEvents:function(){this._on(this.element,"focus",this._focusElement),this._on(this.element,"blur",this._targetBlur),this._on(this.items,"mouseenter",this._onItemHover),this._on(this.items,"mousedown",this._onItemClick),this._on(this.items,"mouseup",this._onItemClick),this._on(this.items,"mouseleave",this._onItemLeave),this._on(this.element,"keyup",this._OnKeyUp),this._on(this.element,"keydown",this._OnKeyDown)},_onItemHover:function(t){var i=t.currentTarget,r=t.target;n(i).hasClass("disabletoolli")||(this.items.removeClass("toolhover"),n(i).addClass("toolhover"),args={currentTarget:i,target:r,status:this.model.disabled},this._trigger("itemHover",args))},_onItemClick:function(t){var i=t.currentTarget,r=t.target;t.type=="mousedown"?this._focusEnable=!1:t.type=="mouseup"&&(n(i).hasClass("disabletoolli")||(args={currentTarget:i,target:r,status:this.model.disabled},this._activeItem=n(t.currentTarget).index(),this._trigger("click",args)))},_onItemLeave:function(t){var i=t.currentTarget,r=t.target;n(i).hasClass("disabletoolli")||(n(i).removeClass("toolhover"),args={currentTarget:i,target:r,status:this.model.disabled},this._trigger("itemLeave",args))},_OnKeyDown:function(n){this._focusEnable=!0,this.e=n;var i=this.items.length-1,t;switch(n.keyCode){case 38:n.preventDefault(),this._removeListHover(),this._activeItem<0||this._activeItem==null||this._activeItem>i?this._activeItem=0:this._activeItem==0?this._activeItem=i:this._activeItem-=1,t=this._getActiveItem(),t.hasClass("disabletoolli")||this._addListHover();break;case 40:n.preventDefault(),this._removeListHover(),this._activeItem>i||this._activeItem==null||this._activeItem<0?this._activeItem=i:this._activeItem==i?this._activeItem=0:this._activeItem+=1,t=this._getActiveItem(),t.hasClass("disabletoolli")||this._addListHover();break;case 37:n.preventDefault(),this._removeListHover(),this._activeItem<0||this._activeItem==null||this._activeItem>i?this._activeItem=0:this._activeItem==0?this._activeItem=i:this._activeItem-=1,t=this._getActiveItem(),t.hasClass("disabletoolli")||this._addListHover();break;case 39:n.preventDefault(),this._removeListHover(),this._activeItem>i||this._activeItem==null||this._activeItem<0?this._activeItem=i:this._activeItem==i?this._activeItem=0:this._activeItem+=1,t=this._getActiveItem(),t.hasClass("disabletoolli")||this._addListHover();break;case 33:n.preventDefault(),this._removeListHover(),this._activeItem=0,t=this._getActiveItem(),t.hasClass("disabletoolli")||this._addListHover();break;case 34:n.preventDefault(),this._removeListHover(),this._activeItem=i,t=this._getActiveItem(),t.hasClass("disabletoolli")||this._addListHover();break;case 35:n.preventDefault(),this._removeListHover(),this._activeItem=i,t=this._getActiveItem(),t.hasClass("disabletoolli")||this._addListHover();break;case 36:n.preventDefault(),this._removeListHover(),this._activeItem=0,t=this._getActiveItem(),t.hasClass("disabletoolli")||this._addListHover()}},_OnKeyUp:function(t){var f,u,i,r;this.e=t,f=this.items.length;switch(t.keyCode){case 13:u=this._getActiveItem(),n(t.target).is("div")?(i=this._getTargetItem(),r=this._getTargetItem()):(i=n(t.target).closest("li")[0],r=t.target),n(i).hasClass("disabletoolli")||(args={currentTarget:i,target:r,status:this.model.disabled,event:this.e},this._trigger("click",args),this._removeListHover());break;case 32:u=this._getActiveItem(),n(t.target).is("div")?(i=this._getTargetItem(),r=this._getTargetItem()):(i=n(t.target).closest("li")[0],r=t.target),u.hasClass("disabletoolli")||(args={currentTarget:i,target:r,status:this.model.disabled,event:this.e},this._trigger("click",args),this._removeListHover());break;case 27:this.element.focusout(),this._removeListHover()}},_removeListHover:function(){n(this.items).removeClass("toolhover")},_addListHover:function(){var n=this._getActiveItem();n.addClass("toolhover"),n[0].scrollIntoView(!1),n.focus()},_getActiveItem:function(){return n(n(this.items)[this._activeItem])},_getTargetItem:function(){return n(this.items)[this._activeItem]},_targetBlur:function(n){n.preventDefault(),this.element.focusout(),this._removeListHover(),this.model.focusOut&&this._trigger("focusOut")},_focusElement:function(){if(!this._focusEnable){this._focusEnable=!0;return}this._removeListHover(),this._activeItem=0,activeItem=this._getActiveItem(),activeItem.hasClass("disabletoolli")||this._addListHover()}})})(jQuery,Syncfusion)