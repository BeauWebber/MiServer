/*!
*  filename: ej.data.min.js
*  version : 11.2.0.63
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
window.ej=window.Syncfusion=window.Syncfusion||{},function(n,t,i){"use strict";var l,w,s,v,u;t.DataManager=function(f,e){if(!(this instanceof t.DataManager))return new t.DataManager(f,e);f||u("DataManger : a dataSource is required to create Manager");var o=[],s=this;return f instanceof Array?o={json:f,offline:!0}:typeof f=="object"?n.isPlainObject(f)?(f.table&&(f.json=this._getJsonFromElement(f.table,f.headerOption)),o={url:f.url,json:f.json,headers:f.headers,accept:f.accept,data:f.data,requestType:f.requestType,key:f.key,crossDomain:f.crossDomain,jsonp:f.jsonp,dataType:f.dataType,offline:f.offline!==i?f.offline:f.url?!1:!0,requiresFormat:f.requiresFormat},o.requiresFormat!==!1||o.jsonp||(o.jsonp="callback"),o.jsonp||(o.jsonp="$callback")):(f.jquery||tt(f))&&(o={json:this._getJsonFromElement(f),offline:!0,table:f}):typeof f=="string"&&(o={url:f,offline:!1,dataType:"json"}),o.accept!==i||o.crossDomain||(o.accept=r.accept),o.requiresFormat=o.requiresFormat===i&&navigator.userAgent.indexOf("MSIE")!=-1?o.crossDomain||typeof HTMLElement!="function"||typeof HTMLElement!="object":o.crossDomain||typeof HTMLElement!="function"&&typeof HTMLElement!="object",o.dataType===i&&(o.dataType="json"),this.dataSource=o,this.defaultQuery=e,o.url&&o.offline&&!o.json&&(this.isDataAvailable=!1,this.adaptor=new t.ODataAdaptor,this.dataSource.offline=!1,this.ready=this.executeQuery(e||t.Query()).done(function(n){s.isDataAvailable=!0,o.json=n.result}),this.dataSource.offline=!0),this.adaptor=o.offline?new t.JsonAdaptor:new t.ODataAdaptor,this},t.DataManager.prototype={setDefaultQuery:function(n){this.defaultQuery=n},executeQuery:function(i,r,f,e){var s,o;return typeof i=="function"&&(e=f,f=r,r=i,i=null),i||(i=this.defaultQuery),i instanceof t.Query||u("DataManager - executeQuery() : A query is required to execute"),s=n.Deferred(),s.then(r,f,e),o={query:i},this.dataSource.offline?nt(function(){var n=this.executeLocal(i);i._requiresCount?(o.result=n.result,o.count=n.count):o.result=n,o.getTableModel=k(i._fromTable,o.result,this),o.getKnockoutModel=d(o.result),s.resolveWith(this,[o])},this):this._makeRequest(this.adaptor.getUrl(i,this.dataSource),s,o,i),s.promise()},executeLocal:function(r){var l,o,h,s,c,e;this.defaultQuery||r instanceof t.Query||u("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||u("DataManager - executeLocal() : Json data is required to execute"),r=r||this.defaultQuery;var f=this.dataSource.json.slice(0),a=f.length,v=!0;for(h=0;h<r.queries.length;h++)o=r.queries[h],l=this.adaptor[o.fn].call(this,f,r,o.e),f=l!==i?l:f,(o.fn==="onPage"||o.fn==="onSkip"||o.fn==="onTake"||o.fn==="onRange")&&(v=!1),v&&(a=f.length);if(r._subQuery)for(s=r._subQuery._fromTable,c=r._subQuery._lookup,c&&c instanceof Array&&y(r._subQuery._fKey,s,f,c),e=0;e<f.length;e++)f[e][s]instanceof Array&&(f[e]=n.extend({},f[e]),f[e][s]=r._subQuery.using(t.DataManager(f[e][s].slice())).executeLocal());return r._requiresCount?{result:f,count:a}:f},_makeRequest:function(r,u,f,s){var h=!!s._subQuerySelector,v=e(function(n){f.error=n,u.rejectWith(this,[f])},this),p=e(function(n,i,r,e,o){if(s._groupedColumns.length)for(var c=0;c<s._groupedColumns.length;c++)n=t.group(n,s._groupedColumns[c]);h||(f.xhr=r,f.count=parseInt(i,10),f.result=n,f.request=e,f.getTableModel=k(s._fromTable,n,this),f.getKnockoutModel=d(n),f.actual=o,u.resolveWith(this,[f]))},this),w=e(function(t,i){var r=n.Deferred(),o={parent:f},u,e;return s._subQuery._isChild=!0,u=this.adaptor.getUrl(s._subQuery,this.dataSource,t||i),e=this._makeRequest(u,r,o,s._subQuery),r.then(function(n){t&&(y(s._subQuery._fKey,s._subQuery._fromTable,t,n),p(t))},v),e},this),b=rt(function(n,t,i,r){var u=0,f;if(f=n=o.parseJson(n),(n.__count||n["odata.count"])&&(u=n.__count||n["odata.count"]),n.d&&(n=n.d),(n.__count||n["odata.count"])&&(u=n.__count||n["odata.count"]),n=c(n,!0,i.getResponseHeader("DataServiceVersion")),!s._subQuery){p(n,u,i,r,f);return}h||w(n)},this),l,a;if(s._params.length&&(r+=r.indexOf("?")===-1?"?":"&",r+=this._buildQueryParams(s)),!jQuery.support.cors&&window.XDomainRequest){var g=/^https?:\/\//i,nt=/^get|post$/i,tt=new RegExp("^"+location.protocol,"i"),it=/\/xml/i;jQuery.ajaxTransport("text html xml json",function(n,t){if(n.crossDomain&&n.async&&nt.test(n.type)&&g.test(t.url)&&tt.test(t.url)){var r=null,u=(t.dataType||"").toLowerCase();return{send:function(f,e){r=new XDomainRequest,/^\d+$/.test(t.timeout)&&(r.timeout=t.timeout),r.ontimeout=function(){e(500,"timeout")},r.onload=function(){var o="Content-Length: "+r.responseText.length+"\r\nContent-Type: "+r.contentType,t={code:200,message:"success"},f={text:r.responseText},n;try{if(u==="json")try{f.json=JSON.parse(r.responseText)}catch(h){t.code=500,t.message="parseerror"}else if(u==="xml"||u!=="text"&&it.test(r.contentType)){n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1;try{n.loadXML(r.responseText)}catch(h){n=i}if(!n||!n.documentElement||n.getElementsByTagName("parsererror").length){t.code=500,t.message="parseerror";throw"Invalid XML: "+r.responseText;}f.xml=n}}catch(s){throw s;}finally{e(t.code,t.message,f,o)}},r.onerror=function(){e(500,"error",{text:r.responseText})},r.open(n.type,n.url),r.send()},abort:function(){r&&r.abort()}}}})}return jQuery.support.cors=!0,l=n.ajax({type:"GET",url:r,dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,beforeSend:e(this._beforeSend,this),processData:!1,success:b,error:v}),h&&(a=s._subQuerySelector.call(this,{query:s._subQuery,parent:s}),a&&a.length?(l=n.when(l,w(null,a)),l.then(function(n,t){n=c(n[0]),t=c(t[0]),y(s._subQuery._fKey,s._subQuery._fromTable,n,t),h=!1,p(n)},v)):h=!1),l},_beforeSend:function(n){var t,i,r,u;for(this.dataSource.crossDomain||(n.setRequestHeader("DataServiceVersion","2.0"),n.setRequestHeader("MaxDataServiceVersion","2.0")),t=this.dataSource.headers,r=0;t&&r<t.length;r++){i=[];for(u in t[r])i.push(u);n.setRequestHeader(t[i[0]],t[i[1]])}},_buildQueryParams:function(n){for(var t,r="",f,u=0;u<n._params.length;u++)t=n._params[u],t.value?(r+=t.key,r+="="+t.value):(f=t.fn())!=i&&(r+=t.key,r+="="+f);return r},saveChanges:function(t,i,u){var h=this.dataSource.url.replace(/\/*$/,"/"+r.batch),s={url:u,key:i||this.dataSource.key},l=this.adaptor.generateBatchRequest(t,s),f=n.Deferred();return n.ajax({type:"POST",url:h,beforeSend:e(function(n){n.setRequestHeader("Accept",r.multipartAccept),n.setRequestHeader("DataServiceVersion","2.0"),this._beforeSend(n)},this),contentType:"multipart/mixed; charset=UTF-8;boundary="+s.guid,data:l,success:function(i,r,u){var s=u.getResponseHeader("Content-Type"),h,a,l,v,e;if(s=s.substring(s.indexOf("=batchresponse")+1),i=i.split(s),!(i.length<2)){for(i=i[1],l=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(i),i.replace(l[0],""),v=l[1],i=i.split(v),e=i.length;e>-1;e--)/\bContent-ID:/i.test(i[e])&&/\bHTTP.+201/.test(i[e])&&(h=parseInt(/\bContent-ID: (\d+)/i.exec(i[e])[1]),t.added[h]&&(a=o.parseJson(/^\{.+\}/m.exec(i[e])[0]),n.extend(t.added[h],c(a))));f.resolveWith(this)}},fail:function(n){f.rejectWith(this,n)}}),f},insert:function(t,i){if(this.dataSource.offline)return this.dataSource.push(t);var r=n.Deferred();return n.ajax({type:"POST",contentType:"application/json; charset=utf-8",url:this.dataSource.url.replace(/\/*$/,i?"/"+i:""),data:JSON.stringify(t),dataType:"json",processData:!1,beforeSend:e(this._beforeSend,this),success:function(n){n=c(o.parseJson(n)),r.resolveWith(this,[{record:n,dataManager:this}])},error:function(n){r.rejectWith(this,[{error:n,dataManager:this}])}}),r.promise()},remove:function(t,i,r){var f,u,o,s;if(this.dataSource.offline){for(f=this.dataSource.json,o=null,typeof i=="object"&&(i=i[t]),u=0;u<f.length;u++)if(f[u][t]===i)break;return u!==f.length&&(o=f.splice(u,1)),o}return s=this.dataSource.url.replace(/\/*$/,r?"/"+r:"")+"("+i+")",n.ajax({type:"DELETE",contentType:"application/json; charset=utf-8",url:s,beforeSend:e(this._beforeSend,this),dataType:"json"})},update:function(t,i,u){var s=i,o,f,h,c,l;if(typeof i=="object"&&(s=i[t]),this.dataSource.offline){for(o=this.dataSource.json,h=null,f=0;f<o.length;f++)if(o[f][t]===s)break;if(f!==o.length){for(c in i)o[f][c]=i[c];h=o[f]}return h}return l=this.dataSource.url.replace(/\/*$/,u?"/"+u:"")+"("+s+")",n.ajax({type:"PUT",contentType:"application/json; charset=utf-8",url:l,dataType:"json",beforeSend:e(this._beforeSend,this),data:JSON.stringify(i),accept:r.accept})},_getJsonFromElement:function(n){n=n.jquery?n[0]:n;var i=n.tagName.toLowerCase();return i!=="table"&&u("ej.DataManager : Unsupported htmlElement : "+i),t.parseTable(n)}};var c=function(n,t,i){return i=i&&parseInt(i)||2,i===3&&n.value&&(n=n.value),!t&&n.d&&(n=n.d),i<3&&n.results&&(n=n.results),n},y=function(n,t,i,r){var u,f={},e;if(r.result&&(r=r.result),r.GROUPGUID)for(u=0;u<r.length;u++)f[r[u].key]=r[u].items,r[u].items.level-=1;else for(u=0;u<r.length;u++)e=f[r[u][n]]||(f[r[u][n]]=[]),e.push(r[u]);for(u=0;u<i.length;u++)i[u][t]=f[i[u][n]]},r={accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby=",select:"$select=",skip:"$skip=",take:"$top=",count:"$inlinecount=",where:"$filter=",expand:"$expand=",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:"Content-Type: application/http\nContent-Transfer-Encoding: binary ",batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 "},o={parseJson:function(n){var t=typeof n;return t==="string"?n=JSON.parse(n,o.jsonReviver):n instanceof Array?o.iterateAndReviveArray(n):t==="object"&&o.iterateAndReviveJson(n),n},iterateAndReviveArray:function(n){for(var t=0;t<n.length;t++)typeof n[t]=="object"?o.iterateAndReviveJson(n[t]):n[t]=o.parseJson(n[t])},iterateAndReviveJson:function(n){var t,i;for(i in n)i.startsWith("__")||(t=n[i],typeof t=="object"?t instanceof Array?o.iterateAndReviveArray(t):o.iterateAndReviveJson(t):n[i]=o.jsonReviver(i,t))},jsonReviver:function(n,t){var u=t,r,i;if(typeof t=="string"){if(r=/^\/Date\(([0-9]+)([+-][0-9]{4})?\)\/$/.exec(t),r)return new Date(parseInt(r[1]));/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*)?)([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(t)&&(t=new Date(t),t=="Invalid Date"&&(i=u.split(/[^0-9]/),t=new Date(i[0],i[1]-1,i[2],i[3],i[4],i[5])))}return t}};t.Query=function(n){return(this instanceof t.Query)?(this.queries=[],this._key="",this._fKey="",typeof n=="string"?this._fromTable=n||"":n&&n instanceof Array&&(this._lookup=n),this._expands=[],this._sortedColumns=[],this._groupedColumns=[],this._filters=[],this._sortKey={},this._filterKey={},this._subQuery=null,this._isChild=!1,this._params=[],this):new t.Query(n)},t.Query.prototype={key:function(n){return typeof n=="string"&&(this._key=n),this},using:function(n){return n instanceof t.DataManager?(this.dataManagar=n,this):u("Query - using() : 'using' function should be called with parameter of instance ej.DataManager")},execute:function(n,i,r,f){return(n=n||this.dataManagar,n&&n instanceof t.DataManager)?n.executeQuery(this,i,r,f):u("Query - execute() : dataManager needs to be is set using 'using' function or should be passed as argument")},executeLocal:function(n){return(n=n||this.dataManagar,n&&n instanceof t.DataManager)?n.executeLocal(this):u("Query - executeLocal() : dataManager needs to be is set using 'using' function or should be passed as argument")},clone:function(){var n=new t.Query;return n.queries=this.queries.slice(),n._key=this._key,n._sortKey=this._sortKey,n._filterKey=this._filterKey,n._isChild=this._isChild,n.dataManagar=this.dataManager,n._fromTable=this._fromTable,n._params=this._params.slice(),n._expands=this._expands.slice(),n._filters=this._filters.slice(),n._sortedColumns=this._sortedColumns.slice(),n._groupedColumns=this._groupedColumns.slice(),n._subQuerySelector=this._subQuerySelector,n._subQuery=this._subQuery,n._fKey=this._fKey,n._requiresCount=this._requiresCount,n},from:function(n){return typeof n=="string"&&(this._fromTable=n),this},addParams:function(n,t){return typeof t=="string"?this._params.push({key:n,value:t}):typeof t=="function"&&this._params.push({key:n,fn:t}),this},expand:function(n){return this._expands=typeof n=="string"?[].slice.call(arguments,0):n.slice(0),this},where:function(n,i,r,f){i=(i||t.FilterOperators.equal).toLowerCase();var o=null,e;return typeof n=="string"?o=t.data.fnOperators[i]||t.data.fnOperators.processSymbols(i):n instanceof t.Predicate?e=!0:u("Query - where : Invalid arguments"),e?this._filters.push(n):this._filters.push({field:n,operator:i,value:r,ignoreCase:f}),this.queries.push({fn:"onWhere",e:{isPredicate:e,fieldName:n,operator:i,value:r,ignoreCase:f,comparer:o}}),this},search:function(n,i,r,u){var o,e,f;if(i&&typeof i!="boolean"?typeof i=="string"&&(i=[i]):(i=[],u=i),typeof r=="boolean"&&(u=r,r=null),r=r||t.FilterOperators.contains,o=t.data.fnOperators[r]||t.data.fnOperators.processSymbols(r),i.length){for(e=[],f=0;f<i.length;f++)e.push({field:i[f],operator:r,value:n,ignoreCase:u});this._filters.push(e)}return this.queries.push({fn:"onSearch",e:{fieldNames:i,operator:r,searchKey:n,ignoreCase:u,comparer:o}}),this},sortBy:function(n,i,r){var u=t.sortOrder.Ascending,e=n instanceof Array,f=!1;return typeof n=="function"&&(f=!0),typeof i=="boolean"&&(i=i?t.sortOrder.Descending:t.sortOrder.Ascending),i&&typeof i!="string"||(u=i?i.toLowerCase():t.sortOrder.Ascending,i=t.pvt.fnSort(i)),n&&!f&&(b(this._sortedColumns,n,u,r),e||(n=[n])),this.queries.push({fn:"onSortBy",e:{fieldName:n,comparer:i}}),this},sortByDesc:function(n){return this.sortBy(n,t.sortOrder.Descending)},group:function(n){return n&&(this._groupedColumns.push(n),this._sortedColumns.indexOf(n)==-1&&this._sortedColumns.indexOf(n+" desc")==-1&&b(this._sortedColumns,this._groupedColumns.slice().reverse(),t.sortOrder.Ascending,!0)),this.queries.push({fn:"onGroup",e:{fieldName:n}}),this},page:function(n,t){return this.queries.push({fn:"onPage",e:{pageIndex:n,pageSize:t}}),this},range:function(n,t){return(typeof n!="number"||typeof t!="number")&&u("Query() - range : Arguments type should be a number"),this.queries.push({fn:"onRange",e:{start:n,end:t}}),this},take:function(n){return typeof n!="number"&&u("Query() - Take : Argument type should be a number"),this.queries.push({fn:"onTake",e:{nos:n}}),this},skip:function(n){return typeof n!="number"&&u("Query() - Skip : Argument type should be a number"),this.queries.push({fn:"onSkip",e:{nos:n}}),this},select:function(n){return typeof n=="string"&&(n=[].slice.call(arguments,0)),n instanceof Array||u("Query() - Select : Argument type should be String or Array"),this.queries.push({fn:"onSelect",e:{fieldNames:n}}),this},hierarchy:function(n,i){return n&&n instanceof t.Query||u("Query() - hierarchy : query must be instance of ej.Query"),typeof i=="function"&&(this._subQuerySelector=i),this._subQuery=n,this},foreignKey:function(n){return typeof n=="string"&&(this._fKey=n),this},requiresCount:function(){return this._requiresCount=!0,this}},t.ODataAdaptor=function(){},t.ODataAdaptor.prototype={onWhere:function(n,t){return t._filterKey},onSearch:function(n,t,i){return i.fieldNames.length===0&&u("Query() - Search : oData search requires list of field names to search"),t._filterKey},onSortBy:function(n,t){return t._sortKey},onGroup:function(n,t){return t._sortKey},onPage:function(n,t,i){var f=(i.pageIndex-1)*i.pageSize,u=r.skip;return u+=f+"&",u+=r.take,u+i.pageSize},onRange:function(n,t,i){var u=r.skip;return u+=i.start+"&",u+=i.oData.take,u+(i.start-i.end)},onTake:function(n,t,i){return r.take+i.nos},onSkip:function(n,t,i){return r.skip+i.nos},onSelect:function(n,t,i){for(var f=r.select,u=0;u<i.fieldNames.length;u++)f+=p(i.fieldNames[u]),u!=i.fieldNames.length-1&&(f+=",");return f},getUrl:function(n,t,i){var r=l(n,this).addFilters(i);return r.buildUrl(t.url,t.requiresFormat)},generateBatchRequest:function(n,i){var e=i.guid=t.getGuid(r.batchPre),f={url:i.url,key:i.key,cid:1,cSet:t.getGuid(r.changeSet)},u="--"+e+"\n";return u+="Content-Type: multipart/mixed; boundary="+f.cSet.replace("--","")+"\n",u+=this.generateInsertRequest(n.added,f),u+=this.generateUpdateRequest(n.changed,f),u+=this.generateDeleteRequest(n.deleted,f),u+=f.cSet+"--\n",u+"--"+e+"--"},generateDeleteRequest:function(n,t){var i,u;if(!n)return"";for(i="",u=0;u<n.length;u++)i+="\n"+t.cSet+"\n",i+=r.changeSetContent+"\n\n",i+="DELETE ",i+=t.url+"("+n[u].get(t.key)+") HTTP/1.1\n",i+="Accept: "+r.accept+"\n",i+=r.batchChangeSetContentType+"\n";return i+"\n"},generateInsertRequest:function(n,t){var i,u;if(!n)return"";for(i="",u=0;u<n.length;u++)i+="\n"+t.cSet+"\n",i+=r.changeSetContent+"\n\n",i+="POST ",i+=t.url+" HTTP/1.1\n",i+="Accept: "+r.accept+"\n",i+="Content-Id: "+u+"\n",i+=r.batchChangeSetContentType+"\n\n",i+=JSON.stringify(n[u])+"\n";return i},generateUpdateRequest:function(n,t){var i,u;if(!n)return"";for(i="",u=0;u<n.length;u++)i+="\n"+t.cSet+"\n",i+=r.changeSetContent+"\n\n",i+="PUT ",i+=t.url+"("+n[u][t.key]+") HTTP/1.1\n",i+="Accept: "+r.accept+"\n",i+=r.batchChangeSetContentType+"\n\n",i+=JSON.stringify(n[u])+"\n\n";return i}},l=function(n,t){return(this instanceof l)?(this.query=n,this.defaultFilters="",this.adaptor=t,this):new l(n,t)},l.prototype={buildUrl:function(n,t){var i="";return n=this.ensureTable(n),i=this.ensureExpands(i),i=this.ensureAnd(i),i=this.iterateQueries(i),i=this.ensureFormat(i,t),this.query._requiresCount&&(i+=(i.length?"&":"")+r.count+"allpages"),n+(i?"?"+i:"")},ensureTable:function(n){return n.replace(/\/*$/,this.query._fromTable?"/"+this.query._fromTable:"")},ensureExpands:function(n){if(this.query._expands&&this.query._expands.length){n+=r.expand;for(var t=0;t<this.query._expands.length;t++)n+=this.query._expands[t],t!=this.query._expands.length-1&&(n+=",")}return n},ensureAnd:function(n,t){return t!==!1&&n.length&&(n+="&"),n},ensureFormat:function(n,t){return t&&(n=this.ensureAnd(n)+"$format=json"),n},iterateQueries:function(n){for(var t,f=this.query.queries.length,e=!1,r=!1,u,i=0;i<f;i++)if(u=this.query.queries[i],t=this.adaptor[u.fn].call(this,null,this.query,u.e),t){if(t===this.query._sortKey){if(e)continue;else t=this.ensureSort();e=!0}if(t===this.query._filterKey){if(r)continue;else t=this.ensureFilter();r=!0}n+=t,n=this.ensureAnd(n,i!==f-1)}return!r&&this.defaultFilters&&(n=this.ensureAnd(n)+this.ensureFilter()),n},ensureFilter:function(){var f=r.where,n=this.query._filters,i,e,o,u;for(f+=this.defaultFilters,this.defaultFilters&&n.length&&(f+=" and ("),i=0;i<n.length;i++){if(n[i]instanceof Array){for(e="",u=0;u<n[i].length;u++)(o=s.generateODataString(n[i][u].field,n[i][u].operator,n[i][u].value,n[i][u].ignoreCase),o)&&(e+="("+o+")",u!==n[i].length-1&&(e+=" or "));f+=e}else f+=n[i]instanceof t.Predicate?n[i].getQuery():s.generateODataString(n[i].field,n[i].operator,n[i].value,n[i].ignoreCase);i!=n.length-1&&(f+=" and ")}return this.defaultFilters&&n.length&&(f+=")"),f},ensureSort:function(){for(var i=this.query._sortedColumns,n="",t=0;t<i.length;t++)n+=i[t],t!==i.length-1&&(n+=",");return n.length&&(n=r.sortBy+n),n},addFilters:function(n){var i;if(!(n instanceof Array)||!n.length)return this;var u=this.query._fKey,f,r="",e=u;for(typeof n[0]!="object"&&(e=null),i=0;i<n.length;i++)f=t.pvt.getObject(e,n[i]),r+=s.generateODataString(u,"==",f),i!==n.length-1&&(r+=" or ");return this.defaultFilters="("+r+")",this}},t.JsonAdaptor=function(){},t.JsonAdaptor.prototype={onWhere:function(n,i,r){return n?n.filter(function(n){return r.isPredicate?r.fieldName.validate(n):r.comparer.call(n,t.pvt.getObject(r.fieldName,n),r.value,r.ignoreCase)}):n},onSearch:function(n,i,r){return!n||!n.length?n:(r.fieldNames.length===0&&t.pvt.getFieldList(n[0],r.fieldNames),n.filter(function(n){for(var i=0;i<r.fieldNames.length;i++)if(r.comparer.call(n,t.pvt.getObject(r.fieldNames[i],n),r.searchKey,r.ignoreCase))return!0;return!1}))},onSortBy:function(n,i,r){var f,u;if(!n)return n;if(!r.fieldName)return n.sort(r.comparer);if(r.isFunc&&(r.fieldName=r.fieldName.call(i)),r.fieldName instanceof Array){for(u=r.fieldName.length-1;u>=0;u--)f=r.comparer,r.fieldName[u].endsWith(" desc")&&(f=t.pvt.fnSort(t.sortOrder.Descending),r.fieldName[u]=r.fieldName[u].replace(" desc","")),n=t.mergeSort(n,r.fieldName[u],f);return n}return t.mergeSort(n,r.fieldName,r.comparer)},onGroup:function(n,i,r){return n?t.group(n,r.fieldName):n},onPage:function(n,t,i){var r=(i.pageIndex-1)*i.pageSize,u=r+i.pageSize;return n?n.slice(r,u):n},onRange:function(n,t,i){return n?n.slice(i.start,i.end):n},onTake:function(n,t,i){return n?n.slice(0,i.nos):n},onSkip:function(n,t,i){return n?n.slice(i.nos):n},onSelect:function(n,i,r){return n?t.select(n,r.fieldNames):n}},t.TableModel=function(i,r,f){var h,o,c,s;if(!a(this,t.TableModel))return new t.TableModel(r);for(a(r,Array)||u("ej.TableModel - Json Array is required"),h=[],c=e(w,this),s=0;s<r.length;s++){o=new t.Model(r[s],this),o.state="unchanged";o.on("stateChange",c);h.push(o)}return this.name=i||"table1",this.rows=t.NotifierArray(h),this._deleted=[],this._events=n({}),this.dataManager=f,this._isDirty=!1,this},t.TableModel.prototype={on:function(n,t){this._events.on(n,t)},off:function(n,t){this._events.off(n,t)},setDataManager:function(n){this.dataManagar=n},saveChanges:function(){if(this.dataManager&&a(this.dataManager,t.DataManager)||u("ej.TableModel - saveChanges : Set the dataManager using setDataManager function"),this.isDirty()){var n=this.dataManager.saveChanges(this.getChanges(),this.key,this.name);n.done(e(function(){for(var t=this.toArray(),n=0;n<t.length;n++)t[n].markCommit();this._events.triggerHandler({type:"save",table:this})},this)),n.fail(e(function(n){this.rejectChanges(),this._events.triggerHandler({type:"reject",table:this,error:n})},this)),this._isDirty=!1}},rejectChanges:function(){for(var t=this.toArray(),n=0;n<t.length;n++)t[n].revert(!0);this._isDirty=!1,this._events.triggerHandler({type:"reject",table:this})},insert:function(n){var i=new t.Model(n);i._isDirty=this._isDirty=!0,this.rows.push(i),this._events.triggerHandler({type:"insert",model:i,table:this})},update:function(n){var r;this.key||u("TableModel - update : Primary key should be assigned to TableModel.key");var i=n,t,f=this.key,e=i[f];t=this.rows.array.filter(function(n){return n.get(f)===e}),t=t[0];for(r in i)t.set(r,i[r]);this._isDirty=!0,this._events.triggerHandler({type:"update",model:t,table:this})},remove:function(n){var t,r,e,f;for(this.key||u("TableModel - update : Primary key should be assigned to TableModel.key"),t=this.key,r=-1,n&&typeof n=="object"&&(n=n[t]!==i?n[t]:n.get(t)),f=0;f<this.rows.length();f++)if(this.rows.array[f].get(t)===n){r=f;break}r>-1&&(e=this.rows.removeAt(r),e.markDelete(),this._deleted.push({model:e,position:r}),this._isDirty=!0,this._events.triggerHandler({type:"remove",model:e,table:this}))},isDirty:function(){return this._isDirty},getChanges:function(){for(var i={added:[],changed:[]},r=this.toArray(),n=0;n<r.length;n++)i[r[n].state]&&i[r[n].state].push(r[n].json);return i.deleted=t.select(this._deleted,["model"]),i},toArray:function(){return this.rows.toArray()},setDirty:function(n,t){this._isDirty!==!!n&&(this._isDirty=!!n,this._events.triggerHandler({type:"dirty",table:this,model:t}))},get:function(n){return this.rows.array[n]},length:function(){return this.rows.array.length}},t.Model=function(t,i){this.$id=it("m"),this.json=t,this.table=i,this.actual={},this._events=n({}),this.isDirty=!1,this.state="added",this._props=[],this._updates={}},t.Model.prototype={on:function(n,t){this._events.on(n,t)},off:function(n,t){this._events.off(n,t)},set:function(n,t){var r=this.json,e=n,f,u;for(n=n.split("."),u=0;u<n.length-1;u++)n=n[0],r=r[n[0]];this.isDirty=!0,this.changeState("changed",{from:"set"}),f=r[n],this.actual[n]!==i||n in this.actual||(this.actual[n]=t),r[n]=t,this._updateValues(n,t),this._events.triggerHandler({type:e,current:t,previous:f,model:this})},get:function(n){return t.pvt.getObject(n,this.json)},revert:function(n){for(var t in this.actual)this.json[t]=this.actual[t];this.isDirty=!1,n?this.state="unchanged":this.changeState("unchanged",{from:"revert"})},markCommit:function(){this.isDirty=!1,this.changeState("unchanged",{from:"commit"})},markDelete:function(){this.changeState("deleted",{from:"delete"})},changeState:function(t,i){if(this.state!==t){if(this.state==="added")if(t==="deleted")t="unchanged";else return;var r=t;i=i||{},this.state=t,this._events.triggerHandler(n.extend({type:"stateChange",current:t,previous:r,model:this},i))}},properties:function(){if(this._props.length)return this._props;for(var n in this.json)this._props.push(n),this._updates[n]={read:[],input:[]};return this._props},bindTo:function(t,i){var u=this.properties(),s=n(t),f,r,o,h,e;for(s.data("ejModel",this),r=0;r<u.length;r++)for(o=s.find(i.replace("{{0}}",u[r])),h={self:this,prop:u[r]},e=0;e<o.length;e++){if(f=n(o[e]),this.formElements.indexOf(f.prop("tagName").toLowerCase())===-1){f.html(this.get(u[r])),this._updates[u[r]].read.push(f);continue}f.val(this.get(u[r])).off("change",null,this._changeHandler).on("change",null,h,this._changeHandler);this._updates[u[r]].input.push(f)}},unbind:function(t,i){var u=this.properties(),f=n(t),r;for(f.removeData("ejModel"),r=0;i&&r<u.length;r++)f.find(i.replace("{{0}}",u[r])).off("change",null,this._changeHandler);this._updateValues={}},_updateValues:function(n,t){var i=this._updates[n],r;i&&(i.read||i.input)&&(r=function(n,i){for(var r=n.length-1;r>-1;r--){if(!n[r][0].offsetParent){n.splice(r,1);continue}n[r][i](t)}},r(i.read,"html"),r(i.input,"val"))},_changeHandler:function(t){t.data.self.set(t.data.prop,n(this).val())},formElements:["input","select","textarea"]},w=function(n){this.setDirty(!0,n.model)},t.Predicate=function(n,i,r,u){return(this instanceof t.Predicate)?(this._fn=null,this._params=null,typeof n=="string"?(this._fn=t.data.fnOperators.processOperator(i),this._params={field:n,value:r,operator:i,ignoreCase:u}):n instanceof t.Predicate&&r instanceof t.Predicate&&(i&&i=="and"||i=="or")&&(this._fn=t.data.fnOperators["_"+i+"predicate"](n,r)),this):new t.Predicate(n,i,r,u)},t.Predicate.and=function(){return s._combinePredicates(arguments,"and")},t.Predicate.or=function(){return s._combinePredicates(arguments,"or")},s={_combinePredicates:function(n,r){var u,f;if(n.length<2)return i;for(u=n[0],f=1;f<n.length;f++)u=new t.Predicate(u,r,n[f]);return u},_combine:function(n,i,r,f,e,o){return i instanceof t.Predicate?t.Predicate[e](n,i):typeof i=="string"?t.Predicate[e](n,new t.Predicate(i,r,f,o)):u("Predicate - "+e+" : invalid arguments")},generateODataString:function(n,i,r,u,f){var e="",o=i,s=typeof r,h;return(n=p(n),r instanceof Date&&(r="datetime'"+ut(r)+"'"),s==="string"&&(r="'"+r+"'",f&&(n="cast("+n+", 'Edm.String')"),u&&(n="tolower("+n+")",r=r.toLowerCase())),i=t.data.odBiOperator[o],i)?(e+=n,e+=i,e+r):(i=t.data.odUniOperator[o],!i||s!=="string")?"":(i==="substringof"&&(h=r,r=n,n=h),e+=i+"(",e+=n+",",e+(r+")"))}},t.Predicate.prototype={and:function(n,t,i,r){return s._combine(this,n,t,i,"and",r)},or:function(n,t,i,r){return s._combine(this,n,t,i,"or",r)},getValidatorFn:function(){return this._fn},validate:function(n){if(this._params){var i=t.pvt.getObject(this._params.field,n);return this._fn.call(this,i,this._params.value,this._params.ignoreCase)}return this._fn.validate.call(this,n)},getQuery:function(){return this._params?s.generateODataString(this._params.field,this._params.operator,this._params.value,this._params.ignoreCase):this._fn.query.call(this)}},t.dataUtil={swap:function(n,t,i){if(t!=i){var r=n[t];n[t]=n[i],n[i]=r}},mergeSort:function(n,i,r){return r&&typeof r!="string"||(r=t.pvt.fnSort(r,!0)),typeof i=="function"&&(r=i,i=null),t.pvt.mergeSort(n,i,r)},max:function(n,i,r){return typeof i=="function"&&(r=i,i=null),t.pvt.getItemFromComparer(n,i,r||t.pvt.fnDescending)},min:function(n,i,r){return typeof i=="function"&&(r=i,i=null),t.pvt.getItemFromComparer(n,i,r||t.pvt.fnAscending)},distinct:function(n,t,i){for(var f=[],u,e={},r=0;r<n.length;r++)u=h(n,t,r),u in e||(f.push(i?n[r]:u),e[u]=1);return f},sum:function(n,t){for(var f=0,u,r=0;r<n.length;r++)u=h(n,t,r),u!==i&&(f+=u);return f},avg:function(n,i){return t.sum(n,i)/n.length},select:function(n,i){for(var u=[],r=0;r<n.length;r++)u.push(t.pvt.extractFields(n[r],i));return u},group:function(n,i,r){var u,o,f,s,e;if(r=r||1,n.GROUPGUID==t.pvt.consts.GROUPGUID){for(u=0;u<n.length;u++)n[u].items=t.group(n[u].items,i,n.level+1),n[u].count=n[u].items.length;return n.childLevels+=1,n}for(o={},f=[],f.GROUPGUID=t.pvt.consts.GROUPGUID,f.level=r,f.childLevels=0,f.records=n,s=0;s<n.length;s++)e=h(n,i,s),o[e]||(o[e]={key:e,count:0,items:[],field:i},f.push(o[e])),o[e].count+=1,o[e].items.push(n[s]);return f},parseTable:function(n,i,r){var e=n.rows,o,l=[],a=[],u,s,h,c,f;if(!e.length)return[];r=r||0;switch((i||"").toLowerCase()){case t.headerOption.tHead:o=n.tHead.rows[r];break;case t.headerOption.row:default:o=n.rows[r]}for(s=o.cells,u=0;u<s.length;u++)l.push(s[u].innerHTML.trim());for(u=r+1;u<e.length;u++){for(h={},c=e[u].cells,f=0;f<c.length;f++)h[l[f]]=c[f].innerHTML;a.push(h)}return a}},t.headerOption={tHead:"thead",row:"row"},t.pvt={mergeSort:function(n,i,r){if(n.length<=1)return n;var e=parseInt(n.length/2,10),u=n.slice(0,e),f=n.slice(e);return u=t.pvt.mergeSort(u,i,r),f=t.pvt.mergeSort(f,i,r),t.pvt.merge(u,f,i,r)},getItemFromComparer:function(n,t,i){for(var f=h(n,t,0),u,e=n[0],r=1;r<n.length;r++)u=h(n,t,r),i(f,u)>0&&(f=u,e=n[r]);return e},quickSelect:function(n,i,r,u,f,e){if(r==u)return n[r];var o=t.pvt.partition(n,i,r,u,e),s=o-r+1;return s==f?n[o]:f<s?t.pvt.quickSelect(n,i,r,o-1,f,e):t.pvt.quickSelect(n,i,o+1,u,f-s,e)},extractFields:function(n,i){var u={},r;if(i.length==1)return t.pvt.getObject(i[0],n);for(r=0;r<i.length;r++)u[i[r].replace(".",t.pvt.consts.complexPropertyMerge)]=t.pvt.getObject(i[r],n);return u},partition:function(n,i,r,u,f){var e=parseInt((r+u)/2,10),s=h(n,i,e),o;for(t.swap(n,e,u),e=r,o=r;o<u;o++)f(h(n,i,o),s)&&(t.swap(n,o,e),e++);return t.swap(n,e,u),e},fnSort:function(n){return(n=n?n.toLowerCase():t.sortOrder.Ascending,n==t.sortOrder.Ascending)?t.pvt.fnAscending:t.pvt.fnDescending},fnAscending:function(n,t){return n&&n.localeCompare?n.localeCompare(t):n-t},fnDescending:function(n,t){return n&&n.localeCompare?n.localeCompare(t)*-1:t-n},merge:function(n,t,i,r){for(var u=[],f;n.length>0||t.length>0;)f=n.length>0&&t.length>0?r?r(h(n,i,0),h(t,i,0))<1?n:t:n[0][i]<n[0][i]?n:t:n.length>0?n:t,u.push(f.shift());return u},getObject:function(n,t){var r,f,u;if(!t)return i;if(!n)return t;if(n.indexOf(".")===-1)return t[n];for(r=t,f=n.split("."),u=0;u<f.length;u++){if(r==null)break;r=r[f[u]]}return r},createObject:function(n,t,r){for(var f=n.split("."),o=r||window,e=o,u=0;u<f.length;u++)u+1==f.length?e[f[u]]=t===i?{}:t:e[f[u]]==null&&(e[f[u]]={}),e=e[f[u]];return o},getFieldList:function(n,r,u){if(u===i&&(u=""),r===i||r===null)return t.pvt.getFieldList(n,[],u);for(var f in n)typeof n[f]!="object"||n[f]instanceof Array?r.push(u+f):t.pvt.getFieldList(n[f],r,u+f+".");return r}},t.FilterOperators={lessThan:"lessthan",greaterThan:"greaterthan",lessThanOrEqual:"lessthanorequal",greaterThanOrEqual:"greaterthanorequal",equal:"equal",contains:"contains",startsWith:"startswith",endsWith:"endswith",notEqual:"notequal"},t.data={},t.data.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},t.data.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},t.data.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof"},t.data.fnOperators={equal:function(n,t,i){return i?f(n)==f(t):n==t},notequal:function(n,i,r){return!t.data.fnOperators.equal(n,i,r)},lessthan:function(n,t,i){return i?f(n)<f(t):n<t},greaterthan:function(n,t,i){return i?f(n)>f(t):n>t},lessthanorequal:function(n,t,i){return i?f(n)<=f(t):n<=t},greaterthanorequal:function(n,t,i){return i?f(n)>=f(t):n>=t},contains:function(n,t,i){return i?!v(n)&&!v(t)&&f(n).indexOf(f(t))!=-1:!v(n)&&!v(t)&&n.toString().indexOf(t)!=-1},notnull:function(n){return n!==null},isnull:function(n){return n===null},startswith:function(n,t,i){return i?n&&t&&f(n).startsWith(f(t)):n&&t&&n.startsWith(t)},endswith:function(n,t,i){return i?n&&t&&f(n).endsWith(f(t)):n&&t&&n.endsWith(t)},_andpredicate:function(){var n=[].slice.call(arguments,0);return{validate:function(){for(var t=0;t<n.length;t++)if(!n[t].validate.apply(n[t],arguments))return!1;return!0},query:function(){for(var i="",t=0;t<n.length;t++)i+="("+n[t].getQuery.apply(n[t],arguments)+")",t!=n.length-1&&(i+=" and ");return i}}},_orpredicate:function(){var n=[].slice.call(arguments,0);return{validate:function(){for(var t=0;t<n.length;t++)if(n[t].validate.apply(n[t],arguments))return!0;return!1},query:function(){for(var i="",t=0;t<n.length;t++)i+="("+n[t].getQuery.apply(n[t],arguments)+")",t!=n.length-1&&(i+=" or ");return i}}},processSymbols:function(n){var r=t.data.operatorSymbols[n],i;return r&&(i=t.data.fnOperators[r],i)?i:u("Query - Process Operator : Invalid operator")},processOperator:function(n){var i=t.data.fnOperators[n];return i?i:t.data.fnOperators.processSymbols(n)}},t.NotifierArray=function(i){return a(this,t.NotifierArray)?(this.array=i,this._events=n({}),this._isDirty=!1,this):new t.NotifierArray(i)},t.NotifierArray.prototype={on:function(n,t){this._events.on(n,t)},off:function(n,t){this._events.off(n,t)},push:function(n){var t;return t=a(n,Array)?[].push.apply(this.array,n):this.array.push(n),this._raise("add",{item:n,index:this.length()-1}),t},pop:function(){var n=this.array.pop();return this._raise("remove",{item:n,index:this.length()-1}),n},addAt:function(n,t){return this.array.splice(n,0,t),this._raise("add",{item:t,index:n}),t},removeAt:function(n){var t=this.array.splice(n,1)[0];return this._raise("remove",{item:t,index:n}),t},remove:function(n){var t=this.array.indexOf(n);return t>-1&&(this.array.splice(t,1),this._raise("remove",{item:n,index:t})),t},length:function(){return this.array.length},_raise:function(t,i){this._events.triggerHandler(n.extend({type:t},i)),this._events.triggerHandler({type:"all",name:t,args:i})},toArray:function(){return this.array}},n.extend(t,t.dataUtil),Array.prototype.forEach=Array.prototype.forEach||function(n,t){for(var i=0,r=this.length;i<r;++i)n.call(t,this[i],i,this)},Array.prototype.indexOf=Array.prototype.indexOf||function(n){var i=this.length,t;if(i===0)return-1;for(t=0;t<i;t++)if(t in this&&this[t]===n)return t;return-1},Array.prototype.filter=Array.prototype.filter||function(n){var i,u,t,r;if(typeof n!="function")throw new TypeError;for(i=[],u=arguments[1]||this,t=0;t<this.length;t++)r=this[t],n.call(u,r,t,this)&&i.push(r);return i},String.prototype.endsWith=String.prototype.endsWith||function(n){return this.slice(-n.length)===n},String.prototype.startsWith=String.prototype.startsWith||function(n){return this.slice(0,n.length)===n},Object.create||(Object.create=function(n){function t(){}if(arguments.length>1)throw new Error("Object.create implementation only accepts the first parameter.");return t.prototype=n,new t}),t.sortOrder={Ascending:"ascending",Descending:"descending"},t.pvt.consts={GROUPGUID:"{271bbba0-1ee7}",complexPropertyMerge:"_"};var nt=function(n,t){t&&(n=e(n,t)),(window.setImmediate||window.setTimeout)(n,0)},p=function(n){return n.replace(/\./g,"/")},f=function(n){return n?n.toLowerCase?n.toLowerCase():n.toString():n===0||n===!1?n.toString():""},h=function(n,i,r){return i?t.pvt.getObject(i,n[r]):n[r]},tt=function(n){return typeof HTMLElement=="object"?n instanceof HTMLElement:n&&n.nodeType===1&&typeof n=="object"&&typeof n.nodeName=="string"},b=function(n,i,r,u){var f,o,e;if(typeof i=="function"){n.push(i);return}for(typeof i=="string"&&(r=r===t.sortOrder.Descending?" desc":"",i.endsWith(" desc")||(i+=r),i=[i]),f=0;f<i.length;f++)o=p(i[f]),e=n.indexOf(o.replace(" desc","")),e!==-1&&u&&n.splice(e,1),(e===-1||u)&&n[u?"unshift":"push"](o)},a=function(n,t){return n instanceof t},k=function(n,i,r){return function(u){return new t.TableModel(u||n,i,r)}},d=function(n){return function(i,r){var o,h,e,f,s;for(r=r||window.ko,r||u("Knockout is undefined"),h=[],s=0;s<n.length;s++){o={};for(e in n[s])e.startsWith("_")||(o[e]=r.observable(n[s][e]));for(e in i)f=i[e],t.isPlainObject(f)?(f.owner||(f.owner=o),f=r.computed(f)):f=r.computed(f,o),o[e]=f;h.push(o)}return r.observableArray(h)}},g=0,it=function(n){return g+=1,n+g};t.getGuid=function(n){var i="0123456789abcdef",t;return n+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(n,r){return t=Math.random()*16|0,i[r===19?t&3|8:t]})};var rt=function(n,t){return function(){var i=[].slice.call(arguments,0);return i.push(this),n.apply(t||this,i)}},e=function(n,t){return"bind"in n?n.bind(t):function(){n.apply(t||this,arguments)}},ut=function(n){return n=JSON.parse(JSON.stringify({val:n})).val,n.slice(0)};t.merge=function(n,t){n&&t&&Array.prototype.push.apply(n,t)},v=function(n){return n===i||n===null},u=function(n){try{throw new Error(n);}catch(t){throw t.message+"\n"+t.stack;}}}(window.jQuery,window.Syncfusion)