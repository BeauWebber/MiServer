/*!
*  filename: ej.scroller.min.js
*  version : 11.2.0.63
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n,t,i,r){"use strict";t.widget("ejScroller","ej.Scroller",{defaults:{height:250,width:0,oneStep:57,buttonSize:18,scrollLeft:0,scrollTop:0,scrollerSize:18,persist:!1,rtl:r},dataTypes:{height:"number",width:"number",buttonSize:"number",oneStep:"number"},keyConfigs:{up:"38",down:"40",left:"37",right:"39",pageUp:"33",pageDown:"34",pageLeft:"ctrl+37",pageRight:"ctrl+39"},content:function(){return this._content&&this._content.length&&this._content[0].offsetParent||(this._content=this.element.children("div").first().addClass("content")),this._content},_setFirst:!0,_init:function(){this.content(),this._ensureScrollers(),this.model.rtl===r&&(this.model.rtl=this.element.css("direction")==="rtl"),this.model.rtl&&this.element.addClass("e-rtl"),this.model.scrollLeft&&this.content().scrollLeft(this.model.scrollLeft),this.model.scrollTop&&this.content().scrollTop(this.model.scrollTop),this._on(this.content(),"scroll",this._scroll)},_ensureScrollers:function(){this.model.height&&this.element.height(this.model.height),this.model.width&&this.element.width(this.model.width),this.isVScroll()?this._v||this.createScroller("Height","Y","Top","v",this.isHScroll()):(this._v=null,this.element.find(".vScroll").remove()),this.isHScroll()?this._h||this.createScroller("Width","X","Left","h",this.isVScroll()):(this.element.find(".hScroll").remove(),this._h=null),this.isHScroll()||this.isVScroll()?(this.content().addClass("content"),this.content().outerHeight(this.element.outerHeight()-(this.isHScroll()?this.model.scrollerSize:0)),this.content().outerWidth(this.element.outerWidth()-(this.isVScroll()?this.model.scrollerSize:0))):this.content().removeClass("content")},isHScroll:function(){return this.model.width>0&&this.content()[0].scrollWidth>this.model.width},isVScroll:function(){return this.model.height>0&&this.content()[0].scrollHeight>this.model.height},_setModel:function(n){for(var t in n)if(t==="rtl")n[t]?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl");else if(t==="scrollLeft")this.content().scrollLeft(this.model.scrollLeft);else if(t==="scrollTop")this.content().scrollTop(this.model.scrollTop);else{this.model.scrollTop=0,this.model.scrollLeft=0,this.refresh();break}},createScroller:function(n,t,i,r,u){var f=this["_"+r]={},e,o;f.dimension=n,f.xy=t,f.position=i,f.css=r,f.isOtherScroll=u,f.uDimension=n,e=n==="Width"?"Height":"Width",this.content()["outer"+e](this.element["outer"+e]()-(this.isVScroll()?this.model.scrollerSize:0)),this._calculateLayout(f),this._createLayout(f),o=this[f.main].find(".button"),this._off(o,"mousedown")._on(o,"mousedown",{d:f,step:1},this._spaceMouseDown),this._off(r==="v"?this.element:this[f.scroll],"mousewheel DOMMouseScroll")._on(r==="v"?this.element:this[f.scroll],"mousewheel DOMMouseScroll",{d:f},this._mouseWheel),this._off(this[f.scroll],"mousedown")._on(this[f.scroll],"mousedown",{d:f},this._spaceMouseDown),this._off(this[f.handler],"mousedown")._on(this[f.handler],"mousedown",{d:f},this._mouseDown)},_createLayout:function(n){var i="<div class='"+n.css+"{0}' style='"+n.dimension+":{1}px'>{2}<\/div>",r={},u;r[n.dimension]=n.modelDim,u=t.buildTag("div."+n.css+"Scroll",[String.format(i,"Up button",n.buttonSize),String.format(i,"HandleSpace",n.handleSpace,String.format(i,"Handle",n.handle)),String.format(i,"Down button",n.buttonSize)],r),this.element.append(u),this[n.handler]=this.element.find("."+n.handler)["outer"+n.uDimension](n.handle),this[n.scroll]=this[n.handler].parent(),this[n.main]=this[n.scroll].parent(),this[n.main].find(".button")["outer"+n.uDimension](n.buttonSize)},_calculateLayout:function(n){n.rtl=this.model.rtl===r?this.element.css("direction")==="rtl":this.model.rtl,n.rtl=n.css==="h"?n.rtl:!1,n.scrollDim="scroll"+n.dimension,n.lPosition=n.position.toLowerCase(),n.clientXy="page"+n.xy,n.scrollVal="scroll"+n.position,n.oneStep=this.model.oneStep,n.modelDim=this.model[n.dimension=n.dimension.toLowerCase()]-(n.isOtherScroll?this.model.scrollerSize:0),n.handler=n.css+"Handle",n.buttonSize=this.model.buttonSize,n.main=n.css+"Scroll",n.scroll=n.css+"ScrollSpace",n.handleSpace=n.modelDim-2*n.buttonSize,n.sScrollDim=this.content()[0][n.scrollDim],n.scrollable=n.sScrollDim-n.modelDim,n.tolStep=(n.scrollable+n.buttonSize*2)/n.oneStep,n.handle=Math.ceil(n.handleSpace/(n.tolStep<1.35?n.tolStep<=1?1:1.35:n.tolStep)),n.handle<20&&(n.handle=20),n.onePx=n.scrollable/(n.handleSpace-n.handle),n.fromScroller=!1,n.up=!0,n.vInterval=r,n.scrollable*=n.rtl?-1:1},_updateLayout:function(n){this.element.find("."+n.css+"Scroll").css(n.dimension,n.modelDim+"px").find(".button").css(n.dimension,this.model.buttonSize).end().find("."+n.css+"HandleSpace").css(n.dimension,n.handleSpace+"px").find("."+n.css+"Handle").css(n.dimension,n.handle+"px")},refresh:function(){this._ensureScrollers(),this.model.scrollLeft&&this.content().scrollLeft(this.model.scrollLeft),this.model.scrollTop&&this.content().scrollTop(this.model.scrollTop),this._v&&(this._v.dimension="Height",this.isVScroll()&&!this._calculateLayout(this._v)&&this._updateLayout(this._v)),this._h&&(this._h.dimension="Width",this.isHScroll()&&!this._calculateLayout(this._h)&&this._updateLayout(this._h))},_keyPressed:function(n,t){if(["input","select","textarea"].indexOf(t.tagName.toLowerCase())!==-1)return!0;var i,r;if(["up","down","pageUp","pageDown"].indexOf(n)!==-1)i=this._v,r="o";else if(["left","right","pageLeft","pageRight"].indexOf(n)!==-1)i=this._h,r="i";else return!0;return i?!this._changeTop(i,(n.indexOf(r)<0?-1:1)*(n[0]!=="p"?1:3)*i.oneStep):!0},scrollY:function(n,t){if(t){this.content().scrollTop(n);return}this.content().stop().animate({scrollTop:n},100,"linear")},scrollX:function(n,t){if(t){this.content().scrollLeft(n);return}this.content().stop().animate({scrollLeft:n},100,"linear")},_changeTop:function(n,t){var r=this.content()[n.scrollVal](),i=r+t;return(n.rtl?i<n.scrollable:i>n.scrollable)&&(i=n.scrollable),(n.rtl?i>0:i<0)&&(i=0),i!==r&&this["scroll"+n.xy](i,!0),i!==r},_mouseWheel:function(n){if(n.data){var t=0,r=n.data.d,u=n;(n=n.originalEvent,n.wheelDelta?(t=-n.wheelDelta/120,i.opera&&parseFloat(i.opera.version,10)<10&&(t=-t)):n.detail&&(t=n.detail/3),t)&&this._changeTop(r,t*r.oneStep)&&(n.preventDefault?n.preventDefault():u.preventDefault(),r.css==="h"&&(u.stopImmediatePropagation(),u.stopPropagation()))}},_mouseUp:function(t){if(t.data){var i=t.data.d;t.type==="mouseup"&&this[i.handler].removeClass("active"),t.type!=="mouseup"&&(t.toElement||t.relatedTarget)||(this._off(n(document),"mousemove"),n(document).off("mouseout mouseup"),i.fromScroller=!1,this[i.scroll].off("mousemove"),this[i.handler].off("mousemove").css("transition","")),i.up=!0}},_mouseDown:function(i){var r,f,u;if(i.which===1){r=i.data.d,r.fromScroller=!0,this[r.handler].css("transition","none"),u=parseInt(this[r.handler].css(r.lPosition))||0,this._on(n(document),"mousemove",function(n){var t=1;f&&n[r.clientXy]!==f&&(u+=n[r.clientXy]-f,(r.rtl?u>0:u<0)&&(t=u=0),u*(r.rtl?-1:1)+r.handle>=r.handleSpace&&(t=u=(r.handleSpace-r.handle)*(r.rtl?-1:1)),this["scroll"+r.xy](Math.ceil(u*r.onePx),!0),this[r.handler].css(r.position.toLowerCase(),u+"px")),t===1&&(f=n[r.clientXy])});n(document).one("mouseup",{d:r},t.proxy(this._mouseUp,this));n(document).mouseout({d:r},t.proxy(this._mouseUp,this))}},_spaceMouseDown:function(i){var r,u,f;if(i.data&&(r=i.data.d,i.which===1&&i.target!==this[r.handler][0])){u=(i.data.step||3)*r.oneStep,f=i.data.top||this[r.handler].offset()[r.lPosition],i[r.clientXy]=i[r.clientXy]||0,i[r.clientXy]<f&&(u*=-1),this._changeTop(r,u),i.data.step!==1&&this[r.scroll].mousemove(function(){r.up=!0}),r.up=!1,r.vInterval=setInterval(t.proxy(function(){if((u<0?f+u/r.onePx<i[r.clientXy]:f+r.handle+u/r.onePx>i[r.clientXy])&&(r.up=!0),r.up){clearInterval(r.vInterval);return}this._changeTop(r,u),f=i.data.top||this[r.handler].offset()[r.lPosition]},this),150);n(document).one("mouseup",{d:r},t.proxy(this._mouseUp,this));n(document).mouseout({d:r},t.proxy(this._mouseUp,this))}},_scroll:function(n){for(var r=[this._v,this._h],t,i=0;i<2;i++)if(t=r[i],t){if(t.sTop=n.target[t.scrollVal],this.model[t.scrollVal]=t.sTop,t.fromScroller)return;this[t.handler].css(t.lPosition,t.sTop/t.onePx+"px")}},_destroy:function(){this.element.css({width:"",height:""}).find(".vScroll,.hScoll").remove(),this.content().removeClass("content").css({width:"",height:""})}})})(jQuery,Syncfusion,window)