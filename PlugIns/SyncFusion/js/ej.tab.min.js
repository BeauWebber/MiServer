/*!
*  filename: ej.tab.min.js
*  version : 11.2.0.63
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n,t,i){t.widget("ejTab","ej.Tab",{_rootCSS:"e-tab",element:null,model:null,defaults:{collapsible:!1,ajaxOptions:{type:"GET",cache:!1,data:{},dataType:"html",contentType:"html",async:!0},disabled:[],event:"click",idPrefix:"ej-tab-",heightStyle:"content",selectedItemIndex:0,cssClass:"",showCloseButton:!1,headerPosition:"top",width:null,height:null,rtl:!1,allowKeyboardNavigation:!0,roundedCorner:!1,persist:!1,ajaxLoad:null,ajaxBeforeLoad:null,active:null,beforeActive:null,itemAdd:null,itemRemove:null,beforeItemRemove:null,itemEnable:null,itemDisable:null},dataTypes:{cssClass:"string",collapsible:"boolean",event:"string",heightStyle:"enum",selectedItemIndex:"number"},_init:function(){this.tabId=0,this.initialize()},_destroy:function(){this._unWireEvents(),this._removeBaseClass()},_setModel:function(n){for(var i in n)switch(i){case"event":this._unWireEvents(),this._wireEvents(n[i]);break;case"disabled":this._disableTabs();break;case"selectedItemIndex":this.show(n[i]);break;case"heightStyle":this._setTabsHeightStyle(n[i]);break;case"cssClass":this._changeSkin(n[i]);break;case"roundedCorner":this._roundedCorner(n[i]);break;case"allowKeyboardNavigation":n[i]?this._on(this.element,"keydown",this._docKeyPress):this._off(this.element,"keydown");break;case"headerPosition":this.model.headerPosition=n[i],this.model.headerPosition==t.Tab.Position.Top&&(this.itemsContainer.remove(),this.itemsContainer.insertBefore(this.element.find(">div").first()),this.element.find("div.e-tab-activeContent").removeClass("activebottom")),this._unWireEvents(),this.initialize();break;case"showCloseButton":n[i]?(this._addDeleteIcon(),this._on(this.element.find("div.deleteicon"),"click",this._tabDeleteClick)):this.element.find("div.deleteicon").remove();break;case"rtl":n[i]?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")}},_changeSkin:function(n){this.model.cssClass!=n&&this.element.removeClass(this.model.cssClass).addClass(n)},initialize:function(){var i;for(this.element.attr("tabindex",0),this.itemsContainer=this.element.find("ol,ul").eq(0),this.items=this.itemsContainer.find(" > li:has(a[href])"),this.anchors=this.items.find("a[href]"),n(this.anchors).addClass("e-link"),this._preTabIndex=-1,t.isNullOrUndefined(this.model.width)&&this.element.width(this.model.width),t.isNullOrUndefined(this.model.height)&&this.element.height(this.model.height),this._setTabPosition(this.model.headerPosition),this.model.showCloseButton&&this._addDeleteIcon(),this._wireEvents(this.model.event),this.contentPanels=[],i=0;i<this.anchors.length;i++){var u=this.anchors[i],r=n(u).attr("href"),f=r.split("#")[0];f&&f===location.toString().split("#")[0]&&(r=a.hash,u.href=r),r&&r!=="#"?this._addContentTag(r,i):this.model.disabled.push(i)}this._addBaseClass(),this._setTabsHeightStyle(this.model.heightStyle),this._disableTabs(),this._roundedCorner(this.model.roundedCorner),this.show(this.model.selectedItemIndex)},_setTabPosition:function(n){n==t.Tab.Position.Bottom?(this.itemsContainer.remove(),this.element.append(this.itemsContainer),this.items.removeClass("borderbottom"),this.items.addClass("bordertop")):n==t.Tab.Position.Top&&(this.items.removeClass("bordertop"),this.items.addClass("borderbottom"))},_addDeleteIcon:function(){if(this.element.find("div.deleteicon").length<=0&&this.items.length>0){var n=t.buildTag("div.deleteicon e-icon");this.items.append(n)}},_addBaseClass:function(){this.element.addClass(this.model.cssClass+" e-tab-content"),this.model.rtl&&this.element.addClass("e-rtl"),this.items.length>0&&this.itemsContainer.addClass("e-tab-header"),this.items.addClass("e-state-default e-tab-item"),n(this.contentPanels).addClass("e-tab-content e-tab-panel e-tab-cntitem")},_removeBaseClass:function(){this.element.removeClass("e-widget e-tab-content"),this.itemsContainer.removeClass("e-tab-header e-clearall e-state-default"),this.anchors.removeClass("e-link"),this.items.removeClass("e-state-default e-tab-item e-state-active borderbottom bordertop"),n(this.contentPanels).removeClass("e-tab-content e-tab-panel e-tab-cntitem"),n(this.contentPanels).removeClass("e-tab-content e-tab-panel e-tab-cntitem e-content-bottom e-corner-bottom activetop activebottom e-tab-activeContent"),n(this.contentPanels).css("display","")},_addContentTag:function(i,r){var f=this._getTabId(i),u=this.element.find("#"+f);u.length||(u=t.buildTag("div.e-tab-content e-tab-panel e-tab-cntitem e-content-bottom #"+f).insertAfter(this.contentPanels[r-1]||this.itemsContainer)),this.contentPanels=n(this.contentPanels).add(u)},_roundedCorner:function(t){t?(this.element.addClass("e-corner-all"),this.items.addClass("e-corner-top"),n(this.contentPanels).addClass("e-corner-bottom")):this.element.hasClass("e-corner-all")&&(this.element.removeClass("e-corner-all"),this.items.removeClass("e-corner-top"),n(this.contentPanels).removeClass("e-corner-bottom"))},_setTabsHeightStyle:function(i){var u,f,r;if(n(this.contentPanels).height(""),t.Tab.heightStyle.Fill==i){for(u=this._getDimension(n(this.element).parent(),"height"),n(this.element).parent().css({overflow:"auto"}),r=0;r<this.items.length;r++)u-=this._getDimension(n(this.items[r]),"outerHeight");for(f=0,r=0;r<this.contentPanels.length;r++)f=Math.max(f,this._getDimension(n(this.contentPanels[r]),"innerHeight")-this._getDimension(n(this.contentPanels[r]),"height"));n(this.contentPanels).height(u-f).css({overflow:"auto"})}else if(t.Tab.heightStyle.Auto==i){for(u=0,r=0;r<this.contentPanels.length;r++)u=Math.max(u,this._getDimension(n(this.contentPanels[r]),"outerHeight"));n(this.contentPanels).height(u),this.maxAutoHeight=u}},_getDimension:function(t,i){var u,f=n(t).parents().andSelf().filter(":hidden"),r={visibility:"hidden",display:"block"},e=[];return f.each(function(){var t={},n;for(n in r)t[n]=this.style[n],this.style[n]=r[n];e.push(t)}),u=/(outer)/g.test(i)?n(t)[i](!0):n(t)[i](),f.each(function(n){var i=e[n],t;for(t in r)this.style[t]=i[t]}),u},show:function(i){var u=this,r;if(this._preTabIndex=this.model.selectedItemIndex,this.model.selectedItemIndex=i,this.model.selectedItemIndex>=this.contentPanels.length&&(this.model.selectedItemIndex=0),this.model.selectedItemIndex!=null&&this.model.selectedItemIndex<this.contentPanels.length){if(this._ajaxLoad(),this.hide(this._preTabIndex),i>=0&&this._onBeforeActive(i))return!1;n(this.element.find(".e-tab-content")[this.model.selectedItemIndex]).fadeIn(200,"easeOutQuad",function(){if(u._onActive())return!0}),r=this.model.headerPosition==t.Tab.Position.Top?"activetop":"activebottom",n(this.contentPanels[this.model.selectedItemIndex]).addClass("e-tab-activeContent "+r),n(this.items[this.model.selectedItemIndex]).addClass("e-state-active")}},hide:function(i){n(this.contentPanels[i]).fadeOut(0);var r=this.model.headerPosition==t.Tab.Position.Top?"activetop":"activebottom";n(this.contentPanels[i]).removeClass("e-tab-activeContent "+r),n(this.items[i]).removeClass("e-state-active")},_ajaxLoad:function(){var t=n(this.contentPanels[this.model.selectedItemIndex]),i=this.anchors[this.model.selectedItemIndex];t.is(":empty")&&this._sendAjaxOptions(t,i)},_getTabId:function(n){return n.indexOf("#")?this.model.idPrefix+this._getNextTabId():n.replace("#","")},_getNextTabId:function(){return++this.tabId},_disableTabs:function(){for(var t=0,i;i=this.items[t];t++)n.inArray(t,this.model.disabled)>-1&&(n(i).find("a").unbind(this.model.event),n(this.contentPanels[t]).addClass("e-state-disabled")),n(i)[n.inArray(t,this.model.disabled)!=-1&&!n(i).hasClass("e-tab-selected")?"addClass":"removeClass"]("e-state-disabled")},_tabItemClick:function(t){t.preventDefault();var i;i=this.model.selectedItemIndex==n(this.items).index(n(t.target).parent())&&this.model.collapsible?-1:n(this.items).index(n(t.target).parent()),i!=this.model.selectedItemIndex&&this.show(i)},_tabDeleteClick:function(t){var r=n(t.target),i;r.hasClass("deleteicon")&&(i=n(this.items).index(n(t.target).parent())),i==this.model.selectedItemIndex&&this.items.length>i&&this.model.selectedItemIndex++,this.remove(i)},_sendAjaxOptions:function(t,i){if(this._onBeforeLoad())return!0;t.addClass("e-loading");var r=this,u=n(i).html(),f=i.href.replace("#",""),e={type:this.model.ajaxOptions.type,cache:this.model.ajaxOptions.cache,url:f,data:this.model.ajaxOptions.data,dataType:this.model.ajaxOptions.dataType,contentType:this.model.ajaxOptions.contentType,async:this.model.ajaxOptions.async,success:function(n){try{r._ajaxSuccessHandler(n,t,i,u)}catch(f){}},error:function(){try{r._ajaxErrorHandler(i,r.model.selectedItemIndex,u)}catch(n){}}};this._sendAjaxRequest(e)},_sendAjaxRequest:function(t){n.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.success,error:t.error,beforeSend:t.beforeSend,complete:t.complete})},_ajaxSuccessHandler:function(t,i,r,u){return u!=null&&n(r).html(u),i.removeClass("e-loading"),i.html(t).addClass("e-tab-loaded"),this._onLoad()?!0:void 0},_ajaxErrorHandler:function(){this._onLoad()},_createContentPanel:function(t){return n("<div><\/div>").attr("id",t).addClass("e-tab-content e-tab-panel e-tab-cntitem e-content-bottom")},_refresh:function(){this._unWireEvents(),this.initialize()},_docKeyPress:function(n){n.preventDefault(),code=n.keyCode?n.keyCode:n.which?n.which:n.charCode;switch(code){case 39:case 38:this.show(this.model.selectedItemIndex+1);break;case 37:case 40:this.model.selectedItemIndex!=0?this.show(this.model.selectedItemIndex-1):this.model.selectedItemIndex==0&&this.show(this.tabCount()-1);break;case 35:this.show(this.tabCount()-1);break;case 36:this.show(0)}},_wireEvents:function(n){this._on(this.anchors,n,this._tabItemClick),this._on(this.element.find("div.deleteicon"),"click",this._tabDeleteClick),this.model.allowKeyboardNavigation&&this._on(this.element,"keydown",this._docKeyPress)},_unWireEvents:function(){this.anchors.unbind(this.model.event)},disable:function(n){n!=null&&(this.model.disabled.push(n),this.model.disabled.sort(),this._disableTabs())},enable:function(i){if(t.isNullOrUndefined(this.contentPanels[i])||n(this.contentPanels[i]).removeClass("e-state-disabled"),n.inArray(i,this.model.disabled)==-1)return!1;this.model.disabled=n.grep(this.model.disabled,function(n){return n!=i}),this._refresh(),this._disableTabs()},tabCount:function(){if(this.items)return this.items.length},add:function(n,r,u){var e,c,o,s,h,f,l;this.items.length==0&&this.itemsContainer.addClass("e-tab-header"),e=t.buildTag("li.e-state-default e-tab-item"),c=t.buildTag("a",r,{},{href:n}),c.appendTo(e),this.model.showCloseButton&&(o=t.buildTag("div.deleteicon e-icon"),e.append(o),this._on(o,"click",this._tabDeleteClick)),s=n.indexOf("#")==0?n.replace("#",""):this.model.idPrefix+this._getNextTabId(),u===i&&(u=this.anchors.length),h=u>=this.items.length,h?e.appendTo(this.itemsContainer):e.insertBefore(this.items[u]),f=this.element.find("#"+s),f.length||(f=this._createContentPanel(s),h?u>0?f.insertAfter(this.contentPanels.eq(-1)):f.appendTo(this.element):f.insertBefore(this.items[u])),this._refresh(),l={addTab:this.anchors[u],addContentPanel:this.contentPanels[u]},this._onAdd(l)},remove:function(t){var i,r,u;if(t!=null&&t>-1&&t<this.items.length){if(this._onBrforeRemove({deleteIndex:t})===!0)return!1;i=n(this.items[t]).remove(),r=n(this.contentPanels[t]).remove(),i.hasClass("e-state-active")&&(this.model.selectedItemIndex=t==0?t:t-1),(t<0||t>=this.anchors.length)&&(this.model.selectedItemIndex=0),this.items.length==1&&this.itemsContainer.removeClass("e-tab-header"),this._refresh(),u={removedTab:i,removedPanel:r},this._onRemove(u)}},_onBeforeLoad:function(){var n;return n=this.model.selectedItemIndex==-1&&this.model.collapsible?{oldTab:this.items[this._preTabIndex],oldContentPanel:this.contentPanels[this._preTabIndex],OldSelectedIndex:this._preTabIndex,newTab:null,newContentPanel:null,newSelectedIndex:null}:{oldTab:this.items[this._preTabIndex],oldContentPanel:this.contentPanels[this._preTabIndex],OldSelectedIndex:this._preTabIndex,newTab:this.items[this.model.selectedItemIndex],newContentPanel:this.contentPanels[this.model.selectedItemIndex],newSelectedIndex:this.model.selectedItemIndex},this.model.ajaxBeforeLoad!=null?this._trigger("ajaxBeforeLoad",n):void 0},_onLoad:function(){var n;return n=this.model.selectedItemIndex==-1&&this.model.collapsible?{oldTab:this.items[this._preTabIndex],oldContentPanel:this.contentPanels[this._preTabIndex],oldSelectedIndex:this._preTabIndex,newTab:null,newContentPanel:null,newSelectedIndex:null}:{oldTab:this.items[this._preTabIndex],oldContentPanel:this.contentPanels[this._preTabIndex],oldSelectedIndex:this._preTabIndex,newTab:this.items[this.model.selectedItemIndex],newContentPanel:this.contentPanels[this.model.selectedItemIndex],newSelectedIndex:this.model.selectedItemIndex},this.model.ajaxLoad!=null?this._trigger("ajaxLoad",n):void 0},_onActive:function(){if(this.model.active){var n;return n=this.model.selectedItemIndex==-1&&this.model.collapsible?{oldTab:this.items[this._preTabIndex],oldContentPanel:this.contentPanels[this._preTabIndex],oldSelectedIndex:this._preTabIndex,newTab:null,newContentPanel:null,newSelectedIndex:null}:{oldTab:this.items[this._preTabIndex],oldContentPanel:this.contentPanels[this._preTabIndex],oldSelectedIndex:this._preTabIndex,newTab:this.items[this.model.selectedItemIndex],newContentPanel:this.contentPanels[this.model.selectedItemIndex],newSelectedIndex:this.model.selectedItemIndex},this._trigger("active",n)}},_onBeforeActive:function(n){if(this.model.beforeActive!=null){var t;return t=this.model.selectedItemIndex==-1&&this.model.collapsible?{oldTab:this.items[this._preTabIndex],oldContentPanel:this.contentPanels[this._preTabIndex],oldSelectedIndex:this._preTabIndex,newTab:null,newContentPanel:null,newSelectedIndex:null}:{oldTab:this.items[this._preTabIndex],oldContentPanel:this.contentPanels[this._preTabIndex],oldSelectedIndex:this._preTabIndex,newTab:this.items[n],newContentPanel:this.contentPanels[n],newSelectedIndex:n},this._trigger("beforeActive",t)}},_onAdd:function(n){if(this.model.itemAdd!=null)return this._trigger("itemAdd",n)},_onRemove:function(n){if(this.model.itemRemove!=null)return this._trigger("itemRemove",n)},_onBrforeRemove:function(n){if(this.model.beforeItemRemove!=null)return this._trigger("beforeItemRemove",n)}}),t.Tab.heightStyle={Content:"content",Auto:"auto",Fill:"fill"},t.Tab.Position={Top:"top",Bottom:"bottom"}})(jQuery,Syncfusion)