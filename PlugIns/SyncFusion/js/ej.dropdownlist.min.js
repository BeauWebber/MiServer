/*!
*  filename: ej.dropdownlist.min.js
*  version : 11.2.0.63
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n,t){t.widget("ejDropDownList","ej.DropDownList",{element:{target:null},model:null,_rootCSS:"e-dropdownlist",defaults:{cssClass:"",listSize:0,dataSource:null,query:null,fields:null,watermark:null,height:"26px",width:"174px",popupPanelHeight:null,popupPanelWidth:null,targetId:null,template:null,selectedItem:null,checkSelectList:[],roundedCorner:!1,showPopupOnLoad:!1,rtl:!1,disabled:!1,caseSensitive:!1,showCheckbox:!1,checkAll:!1,uncheckAll:!1,persist:!1,incrementalSearch:!1,create:null,popupHide:null,popupShown:null,beforePopupShown:null,change:null,select:null,checkChange:null,destroy:null},dataTypes:{cssClass:"string",listSize:"number",watermark:"string",height:"string",width:"string",popupPanelHeight:"string",popupPanelWidth:"string",template:"string",selectedItem:"number",roundedCorner:"boolean",showPopupOnLoad:"boolean",rtl:"boolean",persist:"boolean",disabled:"boolean"},enable:function(){this.element.hasClass("disabled")&&(this.target.disabled=!1,this.element.removeClass("disabled"),this.dropdownbutton.removeClass("disabled"),this.element.bind("mousedown",n.proxy(this._OnDropdownClick,this)),this.dropdownbutton.bind("mousedown",n.proxy(this._OnDropdownClick,this)))},disable:function(){this.element.hasClass("disabled")||(this.target.disabled=!0,this.element.addClass("disabled"),this.dropdownbutton.addClass("disabled"),this.element.unbind("mousedown",n.proxy(this._OnDropdownClick,this)),this.dropdownbutton.unbind("mousedown",n.proxy(this._OnDropdownClick,this)))},getValue:function(){return this.element.hasClass("watermark")?"":this.target.value},_changeWatermark:function(n){this.element.hasClass("watermark")&&this.element.val(n)},popupListHide:function(){this._hideResult()},popupListShow:function(){this._showResult()},clearText:function(){this.element.val(""),this.model.watermark!=null&&n.trim(this.element.val())===""&&(this.element.val(this.model.watermark),this.element.addClass("watermark"))},selectItemByIndex:function(n){n!=null&&(this._activeItem=n,this._activeItem<0?this._activeItem=0:this._activeItem==this._listSize-1&&(this._activeItem=this._listSize-1),this.model.template?this._templateValue():this._enterTextBoxValue())},unselectItemByIndex:function(n){this.selectedIndexValue==n&&(this._activeItem=n,this._removeTextBoxValue())},selectItemByValue:function(t){var i,r;for(this.listitems=this.popupList.find("ol,ul").children("li"),i=0;i<this.listitems.length;i++)if(r=n(this.listitems[i]).children("input:hidden"),(r!=null||r.length>0)&&(this._selectedValue=n(this.listitems[i]).children("input:hidden").val(),this._selectedValue==t))return this._activeItem=i,this._enterTextBoxValue(),!1},unselectItemByValue:function(t){var i,r;for(this.listitems=this.popupList.find("ol,ul").children("li"),i=0;i<this.listitems.length;i++)if(r=n(this.listitems[i]).children("input:hidden"),(r!=null||r.length>0)&&(this._selectedValue=n(this.listitems[i]).children("input:hidden").val(),this._selectedValue==t))return this._activeItem=i,this._removeTextBoxValue(),!1},selectItemByText:function(t){var i;for(this.listitems=this.popupList.find("ol,ul").children("li"),i=0;i<this.listitems.length;i++)if(this.selectedTextValue=n(this.listitems[i]).text(),this.selectedTextValue==t)return this._activeItem=i,this._enterTextBoxValue(),!1},unselectItemByText:function(t){var i;for(this.listitems=this.popupList.find("ol,ul").children("li"),i=0;i<this.listitems.length;i++)if(this.unselectedTextValue=n(this.listitems[i]).text(),this.unselectedTextValue==t)return this._activeItem=i,this._removeTextBoxValue(),!1},getCheckedItems:function(){var t="";for(i=0;i<this.listitems.length;i++)n(this.listitems[i].firstChild).find(".listcheckbox").ejCheckBox("isChecked")==!1&&(t+=n(this.listitems[i]).text()+",");return t},getSelectedItem:function(){return this.selectedTextValue},getSelectedIndex:function(){if(this.element[0].value!="")return this.selectedIndexValue},getSelectedValue:function(){if(this.element[0].value!="")return this._selectedValue},_init:function(){(this.element.is("select")||this.element.is('input[type = "text"]'))&&(this._initialize(),this._render(),this._wireEvents())},_setInitialPopup:function(n){n==!1?this._hideResult():this._showResult()},_changeSkin:function(n){this.model.cssClass!=n&&(this.element.removeClass(this.model.cssClass).addClass(n),this.wrapper.removeClass(this.model.cssClass).addClass(n),this.popupList.removeClass(this.model.cssClass).addClass(n))},_setRTL:function(n){this.model.rtl!=n&&(this.model.rtl=n,this._RightToLeft(),this._dropbtnRTL())},_changeHeight:function(n){this.element.height(n),this._reposDDB()},_changeWidth:function(n){this.element.width(n),this._reposDDB(),this._setListWidth()},_reposDDB:function(){this.dropdownbutton.height(this.element.height());var n=this.dropdownbutton[0].offsetWidth,t;t=this.target.offsetWidth-n,this.model.rtl?(this.dropdownbutton.css({left:"0","border-right":"none","text-align":"right"}),this.wrapper.css({width:t+"px","padding-left":n+"px"}),this.dropdownbutton.addClass("e-rtl")):(this.dropdownbutton.css({right:"0","border-left":"none","text-align":"left"}),this.wrapper.css({width:t+"px","padding-right":n+"px"})),this.element.width(this.element.width()-this.dropdownbutton[0].offsetWidth),this._refreshScroller()},_setModel:function(n){if(this.element.hasClass("disabled"))return!1;var t;for(t in n)switch(t){case"dataSource":this._checkModelDataBinding(n[t]);break;case"query":this._queryCheck(n[t]);break;case"rtl":this._setRTL(n[t]);break;case"disabled":this._disabled(n[t]);break;case"height":this._changeHeight(n[t]);break;case"width":this._changeWidth(n[t]);break;case"popupPanelHeight":this._setListHeight(n[t]);break;case"popupPanelWidth":this._setListWidth(n[t]);break;case"cssClass":this._changeSkin(n[t]);break;case"showCheckbox":this._checkboxHideShow(n[t]);break;case"checkAll":this._setCheckAll(n[t]);break;case"uncheckAll":this._setUncheckAll(n[t]);break;case"watermark":this._changeWatermark(n[t]);break;case"roundedCorner":this._roundedCorner(n[t]);break;case"showPopupOnLoad":this._setInitialPopup(n[t]);break;case"targetId":this.mode.targetId=n[t],this._showFullList();break;case"selectedItem":this.selectItemByIndex(n[t])}},_destroy:function(){this._destroyDropdown(),this.element.removeClass("e-input "+this.model.cssClass+" watermark"),this.element.attr("accesskey",this.wrapper.attr("accesskey")),this.element[0].value="",this.model.dataSource!=null?this.popupPanelWrapper.remove():(this.docbdy.append(this.ultag.html()),this.popupPanelWrapper.remove())},_finalize:function(){this.model.selectedItem!=null?this.selectItemByIndex(this.model.selectedItem):this.model.showCheckbox==!0&&this.model.checkSelectList.length>0&&this._selectCheckedItem(this.model.checkSelectList)},_initialize:function(){this.element.is("select")&&(this.selectelement=!0,this._renderSelectToDropdown()),this.target=this.element[0],this.showPopupBox=!1,this._queryString=null,this.suggLen=0,this._popupListID="#"+this.target.id+"_popup ul li",this._itemId=null,this.checkedStatus=!1,this._incqueryString="",this._activeItem=null,this.ddWidth=0},_renderSelectToDropdown:function(){var i,r;for(this.inputElement=t.buildTag("input.e-dropdownlist#"+this.element[0].id,"",{},{type:"text"}),this.inputElement.insertAfter(this.element),this.optionDiv=t.buildTag("div#"+this.element[0].id+"_list"),this.optionDiv.insertAfter(this.inputElement),this.optionUl=t.buildTag("ul"),this.optionDiv.append(this.optionUl),this.selectOptions=this.element,this.selectOptions.attr("id",this.element[0].id),this.selectOptionItems=this.element.children("option"),r=this.selectOptionItems.length,this.optionDummyUl=n(),i=0;i<r;i++)this.selectOptionItems[i].text!=null&&this.selectOptionItems[i].text!=""&&(this.optionLi=t.buildTag("li",this.selectOptionItems[i].text),this.selectOptionItems[i].value!=null&&this.selectOptionItems[i].value!=""&&(this.optionValue=t.buildTag("input","",{},{type:"hidden",name:this.selectOptionItems[i].text,value:this.selectOptionItems[i].value}),this.optionLi.append(this.optionValue)),this.optionDummyUl.push(this.optionLi[0]));this.optionUl.append(this.optionDummyUl),this.element.css("display","none"),this.element=this.inputElement,this.model.targetId=this.element[0].id+"_list"},_render:function(){this._setDimentions(),this._RightToLeft(),this._renderDropdown(),this._setWatermark(),this._renderPopupPanelWrapper(),this._initDataSource(this.model.dataSource),this._showFullList(),this._finalize()},_queryCheck:function(n){this.model.query=n,this._checkDataBinding(this.model.dataSource)},_checkModelDataBinding:function(n){this.model.dataSource=n,n!=null&&(t.DataManager&&n instanceof t.DataManager?this._initDataSource(n):this._showFullList())},_initDataSource:function(n){var i=this,r;t.DataManager&&n instanceof t.DataManager&&(this._disabled(!0),r=n.executeQuery(this._getQuery()),r.done(function(n){i.model.dataSource=n.result,i._disabled(!1),i._showFullList()}).fail(function(){i.model.dataSource=null,i._disabled(!0)}))},_getQuery:function(){var u;if(t.isNullOrUndefined(this.model.query)){var r=[],i=t.Query(),n=this.model.fields;for(u in n)u!=="tableName"&&r.push(n[u]);r.length>0&&i.select(r),this.model.dataSource.dataSource.url.match(n.tableName+"$")||t.isNullOrUndefined(n.tableName)||i.from(n.tableName)}else i=this.model.query;return i},_renderDropdown:function(){this.element.addClass("e-input "+this.model.cssClass),this._checkNameAttr(),this.wrapper=t.buildTag("span.e-dropdownlist-wrapper "+this.model.cssClass+"#"+this.target.id+"_wrapper","",{},{tabindex:"0",accesskey:this.element.attr("accesskey")}),this.element.removeAttr("accesskey"),this.element.attr("readonly",!0).attr("tabindex","-1");var i=t.buildTag("span.e-arrow");this.dropdownbutton=t.buildTag("span.dropdown#"+this.target.id+"_dropdown").append(i),this.wrapper.insertAfter(this.element),this.wrapper.append(this.element),this.wrapper.append(this.dropdownbutton),this.selectelement&&this.selectOptions.insertBefore(this.element),this.dropdownbutton.height(parseInt(this.element.height())),this.model.rtl?(this.dropdownbutton.css({left:"0","border-right":"none","text-align":"right"}).addClass("e-rtl"),padding="padding-left"):(this.dropdownbutton.css({right:"0","border-left":"none","text-align":"left"}),padding="padding-right"),this.ddWidth=this.dropdownbutton.outerWidth()>0?this.dropdownbutton.outerWidth():24,this.wrapper.css(padding,this.ddWidth),this.element.width(parseInt(this.element.width()-this.ddWidth)),this.element.bind("mousedown",n.proxy(this._OnDropdownClick,this)),this.dropdownbutton.bind("mousedown",n.proxy(this._OnDropdownClick,this)),this._roundedCorner(this.model.roundedCorner)},_checkNameAttr:function(){this.element.attr("name")||this.element.attr({name:this.element[0].id})},_renderPopupPanelWrapper:function(){this.popupPanelWrapper=t.buildTag("div#"+this.element[0].id+"_popup_wrapper"),n("body").append(this.popupPanelWrapper),this.popupList=t.buildTag("div.e-dropdownlist-list "+this.model.cssClass+"#"+this.element[0].id+"_popup","",{visibility:"hidden"}),this.popupScroller=t.buildTag("div"),this.ultag=t.buildTag("ul"),this.popupScroller.append(this.ultag),this.popupList.append(this.popupScroller),this.popupPanelWrapper.append(this.popupList)},_renderPopupList:function(){var r=this.popupListItems,i,e,f=this.model.fields,o,u;if(this.ultag.empty(),this.dummyUl=n(),this.model.rtl&&this.popupList.addClass("e-rtl"),this.model.dataSource==null||this.model.dataSource.length<1)o=this.element.parents().last(),this.docbdy=o.find("#"+this.model.targetId),this.itemsContainer=this.docbdy.children("ol,ul"),this.itemsContainer.children("ol,ul").remove(),this.items=this.itemsContainer.children("li"),this.items.addClass("dropdowntext"),this.items.find("img").addClass("alignmiddle"),this.items.find("div").addClass("alignmiddle"),this.itemsContainer.children("span").addClass("ghead"),this.ultag.append(this.itemsContainer.html()),this.itemsContainer.empty(),this.docbdy.css({display:"none"}),this.itemsContainer.css({display:"none"});else if(this.model.dataSource!=null&&typeof r[0]!="object"){if(r.length>0){for(i=0;i<r.length;i++)e=t.buildTag("li.dropdowntext",r[i]),this.dummyUl.push(e[0]);this.ultag.append(this.dummyUl)}}else if(this.model.dataSource!=null&&this.model.template!=null){if(r.length>0){for(i=0;i<r.length;i++)e=t.buildTag("li.dropdowntext",r[i]),this.model.template&&e.append(this._getTemplatedString(r[i])),this.dummyUl.push(e[0]);this.ultag.append(this.dummyUl)}}else if(u={_id:null,_imageUrl:null,_imageAttributes:null,_spriteCSS:null,_text:null,_value:null,_htmlAttributes:null,_selected:null},u._id=f&&f.id?f.id:"id",u._imageUrl=f&&f.imageUrl?f.imageUrl:"imageUrl",u._imageAttributes=f&&f.imageAttributes?f.imageAttributes:"imageAttributes",u._spriteCSS=f&&f.spriteCSS?f.spriteCSS:"spriteCSS",u._text=f&&f.text?f.text:"text",u._value=f&&f.value?f.value:"value",u._htmlAttributes=f&&f.htmlAttributes?f.htmlAttributes:"htmlAttributes",u._selected=f&&f.selected?f.selected:"selected",r.length>0){for(i=0;i<r.length;i++){if(e=t.buildTag("li.dropdowntext"),r[i][u._id]&&e.attr("id",r[i][u._id]),r[i][u._imageUrl]&&r[i][u._imageUrl]!=""){if(imgtag=t.buildTag("img.alignmiddle","",{},{src:r[i][u._imageUrl],alt:r[i][u._text]}),r[i][u._imageAttributes]&&r[i][u._imageAttributes]!="")for(i=0;i<r[i][u._imageAttributes].length;i++)n.each(r[i][u._imageAttributes][i],function(n,t){imgtag.attr(n,t)});e.append(imgtag)}if(r[i][u._spriteCSS]&&r[i][u._spriteCSS]!=""&&(divtag=t.buildTag("div.alignmiddle "+r[i][u._spriteCSS]+" sprite-image"),e.append(divtag)),r[i][u._text]&&r[i][u._text]!=""&&e.append(r[i][u._text]),r[i][u._value]&&r[i][u._value]!=""&&(hinputtag=t.buildTag("input#popuplist_"+this.element[0].id+i,"",{},{type:"hidden",name:r[i][u._text],value:r[i][u._value]}),e.append(hinputtag)),r[i][u._htmlAttributes]&&r[i][u._htmlAttributes]!="")for(i=0;i<r[i][u._htmlAttributes].length;i++)n.each(r[i][u._htmlAttributes][i],function(n,t){e.attr(n,t)});r[i][u._selected]&&e.addClass("chkselect"),this.dummyUl.push(e[0])}this.ultag.append(this.dummyUl)}this._setListWidth(),this._setListHeight(),this._setListPosition(),this.popupList.css("height",""),this.popupScroller.css("height",""),this.popupList.ejScroller({height:this.popupList.height(),width:0}),this.scrollerObj=this.popupList.ejScroller("instance"),this.popupList.css({display:"none",visibility:"visible"}),this._checkboxHideShow(this.model.showCheckbox),this._setCheckAll(this.model.checkAll),this._setUncheckAll(this.model.uncheckAll),this.model.showPopupOnLoad&&this._showResult()},_getTemplatedString:function(n){for(var t=this.model.template,i=t.indexOf("${"),r=t.indexOf("}"),u,f;i!=-1&&r!=-1;)u=t.substring(i,r+1),f=u.replace("${","").replace("}",""),t=t.replace(u,n[f]),i=t.indexOf("${"),r=t.indexOf("}");return t},_setWatermark:function(){this.model.watermark!=null&&(this.element.addClass("watermark"),this.element.val(this.model.watermark))},_checkboxHideShow:function(n){n?this._createCheckbox():this._removeCheckbox()},_createCheckbox:function(){var i,r,u=this;if(this.listitems=this.popupList.find("ol,ul").children("li"),r=this.listitems.find("input[type=checkbox]"),r.length==0){for(i=0;i<this.listitems.length;i++)$checkbox=t.buildTag("input.listcheckbox alignmiddle#popuplist"+i+"_"+this.element[0].id,"",{},{type:"checkbox",name:"list"+i}),n(this.listitems[i]).prepend($checkbox);for(n(".listcheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._OnClickCheckList}),this.element.val(""),i=0;i<this.listitems.length;i++)n(this.listitems[i]).hasClass("chkselect")&&(n(this.listitems[i]).find(".listcheckbox").ejCheckBox({checked:!0}),this._activeItem=i,this.checkedStatus=!0,this.model.checkChange&&this._trigger("checkChange",{isChecked:this.checkedStatus,data:this.model}),this._enterTextBoxValue(),n(this.listitems[i]).removeClass("chkselect"))}},_removeCheckbox:function(){var n;this.listitems=this.popupList.find("ol,ul").children("li"),n=this.listitems.find(".listcheckbox"),n.length>0&&(this.listitems.find(".listcheckbox").ejCheckBox("destroy"),this.listitems.find("input[type=checkbox]").remove())},_setCheckAll:function(n){this.model.showCheckbox&&n&&this.checkAll()},_setUncheckAll:function(n){this.model.showCheckbox&&n&&this.unCheckAll()},checkAll:function(){var t=this.model.checkSelectList,r,u;for(i=0;i<this.listitems.length;i++)n(this.listitems[i].firstChild).find(".listcheckbox").ejCheckBox("isChecked")==!1&&(n(this.listitems[i].firstChild).find(".listcheckbox").ejCheckBox("option","checked",!0),r=n(this.listitems[i]).text(),this._delimiterIndex=this.element[0].value.lastIndexOf(","),this._delimiterIndex==-1&&this.element[0].value!=""&&(this.element.val(this.element[0].value+","),this._delimiterIndex=this.element[0].value.lastIndexOf(",")),this.element.val(this.element[0].value.substr(0,this._delimiterIndex+1)+r+","),t=this.model.checkSelectList,n.inArray(i,t)==-1&&this.model.checkSelectList.push(i),this.checkedStatus=!0,u=n(this.listitems[i]).children('input[type = "hidden"]'),this._selectedValue=u!=null&&u.length>0?n(this.listitems[i]).children('input[type = "hidden"]').val():"",this.model.checkChange&&this._trigger("checkChange",{isChecked:this.checkedStatus,data:this.model}),args={text:this.element[0].value,selectedText:r,itemId:this.selectedIndexValue,value:this._selectedValue,isChecked:this.checkedStatus},this.model.change&&this._trigger("change",args));this.model.watermark!=null&&(n.trim(this.element.val())===""||n.trim(this.element.val())===this.model.watermark?(this.element.val(this.model.watermark),this.element.addClass("watermark")):this.element.removeClass("watermark"))},_selectCheckedItem:function(t){var r,u;if(t.length>0){for(i=0;i<t.length;i++)n(this.listitems[t[i]].firstChild).find(".listcheckbox").ejCheckBox("isChecked")==!1&&(n(this.listitems[t[i]].firstChild).find(".listcheckbox").ejCheckBox("option","checked",!0),r=n(this.listitems[t[i]]).text(),this._delimiterIndex=this.element[0].value.lastIndexOf(","),this._delimiterIndex==-1&&this.element[0].value!=""&&(this.element.val(this.element[0].value+","),this._delimiterIndex=this.element[0].value.lastIndexOf(",")),this.element.val(this.element[0].value.substr(0,this._delimiterIndex+1)+r+","),this.checkedStatus=!0,u=n(this.listitems[t[i]]).children('input[type = "hidden"]'),this._selectedValue=u!=null&&u.length>0?n(this.listitems[t[i]]).children('input[type = "hidden"]').val():"",this.model.checkChange&&this._trigger("checkChange",{isChecked:this.checkedStatus,data:this.model}),args={text:this.element[0].value,selectedText:r,itemId:this.selectedIndexValue,value:this._selectedValue,isChecked:this.checkedStatus},this.model.change&&this._trigger("change",args));this.model.watermark!=null&&(n.trim(this.element.val())===""||n.trim(this.element.val())===this.model.watermark?(this.element.val(this.model.watermark),this.element.addClass("watermark")):this.element.removeClass("watermark"))}},unCheckAll:function(){var t,r,u;for(i=0;i<this.listitems.length;i++)n(this.listitems[i].firstChild).find(".listcheckbox").ejCheckBox("isChecked")&&(n(this.listitems[i].firstChild).find(".listcheckbox").ejCheckBox("option","checked",!1),t=n(this.listitems[i]).text(),this._txtpos=this.element[0].value.lastIndexOf(t),this._delimiterIndex=this.element[0].value.lastIndexOf(","),this._txtpos==0&&this._delimiterIndex<=-1?this.element.val(this.element[0].value.replace(t,"")):this._txtpos==0&&this._delimiterIndex>-1?this.element.val(this.element[0].value.replace(t+",","")):this._txtpos>-1&&this._delimiterIndex>this._txtpos?this.element.val(this.element[0].value.replace(t+",","")):this._txtpos>-1&&this._delimiterIndex<this._txtpos?this.element.val(this.element[0].value.replace(","+t,"")):this._txtpos>-1&&this._delimiterIndex<this._txtpos&&this.element.val(this.element[0].value.replace(t,""))),this.checkedStatus=!1,r=this.model.checkSelectList,n.inArray(this.selectedIndexValue,r)>-1&&this.model.checkSelectList.splice(n.inArray(i,r),1),u=n(this.listitems[i]).children('input[type = "hidden"]'),this._selectedValue=u!=null&&u.length>0?n(this.listitems[i]).children('input[type = "hidden"]').val():"",this.model.checkChange&&this._trigger("checkChange",{isChecked:this.checkedStatus,data:this.model}),args={text:this.element[0].value,selectedText:t,itemId:this.selectedIndexValue,value:this._selectedValue,isChecked:this.checkedStatus},this.model.change&&this._trigger("change",args);this.model.watermark!=null&&(n.trim(this.element.val())===""||n.trim(this.element.val())===this.model.watermark?(this.element.val(this.model.watermark),this.element.addClass("watermark")):this.element.removeClass("watermark"))},_refreshScroller:function(){this.popupList.css("height","auto"),this.popupList.find(".content, .vScroll").removeAttr("style"),this.popupList.find(".vScroll div").removeAttr("style"),this.popupList.css({display:"block",visibility:"hidden"}),this.scrollerObj.model.height=this.popupList.height(),this.scrollerObj.model.scrollTop=0,this.scrollerObj.refresh(),this.popupList.css({display:"none",visibility:"visible"})},_setListWidth:function(){var n;this.model.popupPanelWidth?this.popupList.width(this.model.popupPanelWidth):(n=this.element.width()+this.ddWidth,this.popupList.css("min-width",n))},_setListHeight:function(){if(this.model.listSize>0){var n=this.model.listSize*30;this.popupList.css({"max-height":n+"px"})}else this.model.popupPanelHeight?this.popupList.css({height:this.model.popupPanelHeight}):this.popupList.css({"max-height":"150px"})},_setListPosition:function(){var n=this.wrapper?this.wrapper.offset():this.element.offset(),t=n.left,i=this.element.outerHeight(),r=(i-this.element.height())/2,u=this._getZindexPartial();this.model.rtl&&(t-=this.popupList.outerWidth()-this.wrapper.outerWidth()),this.popupList.css({left:t+"px",top:n.top+i-r+3+"px","z-index":u})},_getZindexPartial:function(){var r="#"+this.element[0].id+"_popup",i=this.element.parents(),u=i.length,f=n("body").children(":not("+r+")"),t;return n(f).each(function(n,t){i[u+n]=t}),t=Math.max.apply(t,n.map(i,function(t){if(n(t).css("position")!="static")return parseInt(n(t).css("z-index"))||1})),!t||t<1e4?t=1e4:t+=1,t},_showResult:function(){var i=this,t;this.model.beforePopupShown&&this._trigger("beforePopupShown",{popupStatus:this.showPopupBox}),this._refreshScroller(),this._setListPosition(),this.popupList.slideDown(200,"easeOutQuad",function(){i.popupList.focus()}),this.showPopupBox=!0,t=n(this._popupListID),this._listSize=t.size(),n(document).bind("click",n.proxy(this._OnDocumentClick,this)),t.bind("mouseenter",n.proxy(this._OnMouseEnter,this)),t.bind("mouseleave",n.proxy(this._OnMouseLeave,this)),t.bind("mousedown",n.proxy(this._OnMouseClick,this)),this.model.popupShown&&this._trigger("popupShown",{popupStatus:this.showPopupBox})},_hideResult:function(){var i,t;this.showPopupBox&&(this.showPopupBox=!1,i=this,this.popupList.slideUp(100,"easeOutQuad",function(){i.wrapper.focus()}),t=n(this._popupListID),n(document).unbind("click",n.proxy(this._OnDocumentClick,this)),t.unbind("mouseenter",n.proxy(this._OnMouseEnter,this)),t.unbind("mouseleave",n.proxy(this._OnMouseLeave,this)),t.unbind("mousedown",n.proxy(this._OnMouseClick,this)),this.model.popupHide&&this._trigger("popupHide",{popupStatus:this.showPopupBox}))},_enterTextBoxValue:function(){var r,i,t,u,f;i=this._getActiveItem(),t=n.trim(i.text()),this.selectedTextValue=t,this.selectedIndexValue=this._activeItem,this.element[0].value!=t&&(this.model.showCheckbox?(this._delimiterIndex=this.element[0].value.lastIndexOf(","),this._delimiterIndex==-1&&this.element[0].value!=""?(this.element.val(this.element[0].value+","),this._delimiterIndex=this.element[0].value.lastIndexOf(",")):this._delimiterIndex!=this.element[0].value.length-1&&this.element[0].value!=""&&(this.element.val(this.element[0].value+","),this._delimiterIndex=this.element[0].value.lastIndexOf(",")),this.element.val(this.element[0].value.substr(0,this._delimiterIndex+1)+t),f=this.model.checkSelectList,n.inArray(this.selectedIndexValue,f)==-1&&this.model.checkSelectList.push(this.selectedIndexValue)):(n(this._popupListID).removeClass("listHover").removeClass("listActive"),i.addClass("listActive"),this.element.val(t),this.model.selectedItem=this.selectedIndexValue),r=n(i).children('input[type = "hidden"]'),this._selectedValue=r!=null&&r.length>0?n(i).children('input[type = "hidden"]').val():"",u={text:this.element[0].value,selectedText:t,itemId:this.selectedIndexValue,value:this._selectedValue,isChecked:this.checkedStatus},this.model.change&&this._trigger("change",u),this.model.select&&this._trigger("select",u),this.model.watermark!=null&&(n.trim(this.element.val())===""||n.trim(this.element.val())===this.model.watermark?(this.element.val(this.model.watermark),this.element.addClass("watermark")):this.element.removeClass("watermark")))},_removeTextBoxValue:function(){var i,t,r;i=this._getActiveItem(),t=i.text(),this.selectedIndexValue=this._activeItem,this.model.showCheckbox?(this._txtpos=this.element[0].value.lastIndexOf(t),this._delimiterIndex=this.element[0].value.lastIndexOf(","),this._txtpos==0&&this._delimiterIndex<=-1?this.element.val(this.element[0].value.replace(t,"")):this._txtpos==0&&this._delimiterIndex>-1?this.element.val(this.element[0].value.replace(t+",","")):this._txtpos>-1&&this._delimiterIndex>this._txtpos?this.element.val(this.element[0].value.replace(t+",","")):this._txtpos>-1&&this._delimiterIndex<this._txtpos?this.element.val(this.element[0].value.replace(","+t,"")):this._txtpos>-1&&this._delimiterIndex<this._txtpos&&this.element.val(this.element[0].value.replace(t,"")),r=this.model.checkSelectList,n.inArray(this.selectedIndexValue,r)>-1&&this.model.checkSelectList.splice(n.inArray(this.selectedIndexValue,r),1)):(n(this._popupListID).removeClass("listHover").removeClass("listActive"),this._txtpos=this.element[0].value.lastIndexOf(t),this._txtpos>-1&&this.element.val(this.element[0].value.replace(t,""))),hidelement=n(i).children('input[type = "hidden"]'),this._selectedValue=hidelement!=null&&hidelement.length>0?n(i).children('input[type = "hidden"]').val():"",args={text:this.element[0].value,selectedText:t,itemId:this.selectedIndexValue,value:this._selectedValue,isChecked:this.checkedStatus},this.model.change&&this._trigger("change",args),this.model.select&&this._trigger("select",args),this.model.watermark!=null&&(n.trim(this.element.val())===""||n.trim(this.element.val())===this.model.watermark?(this.element.val(this.model.watermark),this.element.addClass("watermark")):this.element.removeClass("watermark"))},_removeListHover:function(){n(this._popupListID).removeClass("listHover")},_addListHover:function(){var n=this._getActiveItem();n.addClass("listHover"),this.scrollerObj.setModel({scrollTop:this._calcScrollTop()}),n.focus()},_calcScrollTop:function(){for(var u=this.ultag[0].offsetHeight,i=this.ultag.find("li"),r=0,t=this.ultag.find("li.listHover").index(),n=0;n<t;n++)r+=i[n].offsetHeight;return r-(this.popupList[0].offsetHeight-i[t].offsetHeight)/2},_getActiveItem:function(){return n(n(this._popupListID)[this._activeItem])},_setDimentions:function(){this.model.height&&this.element.height(this.model.height),this.model.width&&this.element.width(this.model.width)},_roundedCorner:function(n){n?this.model.rtl?(this.element.addClass("e-corner-right"),this.dropdownbutton.addClass("e-corner-left")):(this.element.addClass("e-corner-left"),this.dropdownbutton.addClass("e-corner-right")):this.model.rtl?(this.element.removeClass("e-corner-right"),this.dropdownbutton.removeClass("e-corner-left")):(this.element.removeClass("e-corner-left"),this.dropdownbutton.removeClass("e-corner-right"))},_disabled:function(n){n?this.disable():this.enable()},_destroyDropdown:function(){this.element.insertAfter(this.wrapper),this.element.width(this.element.width()+this.dropdownbutton[0].offsetWidth),this.wrapper.remove(),this.element.unbind("mousedown",n.proxy(this._OnDropdownClick,this)),this.dropdownbutton.unbind("mousedown",n.proxy(this._OnDropdownClick,this))},_RightToLeft:function(){this.model.rtl?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")},_dropbtnRTL:function(){var n=this.dropdownbutton[0].offsetWidth;this.model.rtl?(this.dropdownbutton.css({left:"0","border-right":"none",right:""}),this.wrapper.css({"padding-left":n+"px","padding-right":"0px"}),this.dropdownbutton.addClass("e-rtl"),this.popupList.addClass("e-rtl")):(this.dropdownbutton.css({right:"0","border-left":"none",left:""}),this.wrapper.css({"padding-left":"0px","padding-right":n+"px"}),this.dropdownbutton.removeClass("e-rtl"),this.popupList.removeClass("e-rtl"))},_OnDropdownClick:function(n){n.preventDefault(),this.showPopupBox?this._hideResult():(this._showResult(),this.wrapper.focus())},_showFullList:function(){this.model.dataSource!=null&&(this.popupListItems=this.model.dataSource),this._renderPopupList()},_OnMouseEnter:function(t){var r,i;n(this._popupListID).removeClass("listHover"),n(t.target).is("li")?n(t.target).addClass("listHover"):t.target.tagName!="li"&&(r=n(t.target).parents("li"),n(r).addClass("listHover")),i=0,n(this._popupListID).each(function(t){if(n(this).hasClass("listHover"))return i=t,!1}),this._activeItem=i},_OnMouseLeave:function(){n(this._popupListID).removeClass("listHover")},_OnMouseClick:function(t){t.preventDefault(),this.model.showCheckbox?(n(t.currentTarget).is("li")&&n(t.target).is("li")&&(n(t.currentTarget.firstChild).find(".listcheckbox").ejCheckBox("isChecked")?(n(t.currentTarget.firstChild).find(".listcheckbox").ejCheckBox("option","checked",!1),this.checkedStatus=!1,this._removeTextBoxValue()):(n(t.currentTarget.firstChild).find(".listcheckbox").ejCheckBox("option","checked",!0),this.checkedStatus=!0,this._enterTextBoxValue())),this.model.checkChange&&this._trigger("checkChange",{isChecked:this.checkedStatus,data:this.model})):(this.model.template?this._templateValue():this._enterTextBoxValue(),this._hideResult())},_OnClickCheckList:function(t){var i=this.element[0].id.length,r=this.element[0].id.lastIndexOf("_"),u=this.element[0].id.substring(r+1,i);ddlinst=n("#"+u).ejDropDownList("instance"),t.isChecked?(ddlinst.checkedStatus=!0,ddlinst._enterTextBoxValue()):(ddlinst.checkedStatus=!1,ddlinst._removeTextBoxValue()),this.model.checkChange&&this._trigger("checkChange",{isChecked:this.checkedStatus,data:this.model})},_OnListSelect:function(t){t.preventDefault(),activeItem=this._getActiveItem(),n(activeItem).find(".listcheckbox").ejCheckBox("isChecked")?(n(activeItem).find(".listcheckbox").ejCheckBox("option","checked",!1),this.checkedStatus=!1,this._removeTextBoxValue()):(n(activeItem).find(".listcheckbox").ejCheckBox("option","checked",!0),this.checkedStatus=!0,this._enterTextBoxValue()),this.model.checkChange&&this._trigger("checkChange",{isChecked:this.checkedStatus,data:this.model})},_OnDocumentClick:function(t){var i=null,r;eleid=this.element[0].id,i=this.dropdownbutton[0].id,r=this.dropdownbutton.children()[0],n(t.target).parents().hasClass("vScroll")||n(t.target).hasClass("vScroll")||n(t.target).hasClass("e-category")||n(t.target).hasClass("dropdowntext")||n(t.target).parents().hasClass("dropdowntext")||n(t.target).hasClass("ghead")?t.preventDefault():t.target.id!=i&&t.target!=r&&t.target.id!=eleid&&(this.showPopupBox&&n(document).unbind("click",n.proxy(this._OnDocumentClick,this)),this._hideResult())},_OnKeyDown:function(t){this._itemId=null;var i=n(this._popupListID);this._listSize=n(this._popupListID).size();switch(t.keyCode){case 38:if(t.altKey)this._hideResult();else return this.showPopupBox?(this._removeListHover(),n(this._popupListID).removeClass("listActive"),this._activeItem<=0||this._activeItem==null||this._activeItem>this._listSize-1?this._activeItem=this._listSize-1:this._activeItem-=1,this._addListHover(),this.model.showCheckbox||this.model.template!=null||this._enterTextBoxValue()):(n(this._popupListID).removeClass("listActive"),this._activeItem<=0||this._activeItem==null||this._activeItem>this._listSize-1?this._activeItem=this._listSize-1:this._activeItem-=1,this.model.showCheckbox||this.model.template!=null||this._enterTextBoxValue()),t.preventDefault(),!1;break;case 40:if(t.altKey)this._showResult();else return this.showPopupBox?(this._removeListHover(),n(this._popupListID).removeClass("listActive"),this._activeItem>=this._listSize-1||this._activeItem==null||this._activeItem<0?this._activeItem=0:this._activeItem+=1,this._addListHover(),this.model.showCheckbox||this.model.template!=null||this._enterTextBoxValue()):(n(this._popupListID).removeClass("listActive"),this._activeItem>=this._listSize-1||this._activeItem==null||this._activeItem<0?this._activeItem=0:this._activeItem+=1,this.model.showCheckbox||this.model.template!=null||this._enterTextBoxValue()),t.preventDefault(),!1;break;case 37:return this.showPopupBox?(this._removeListHover(),n(this._popupListID).removeClass("listActive"),this._activeItem<=0||this._activeItem==null||this._activeItem>this._listSize-1?this._activeItem=this._listSize-1:this._activeItem-=1,this._addListHover(),this.model.showCheckbox||this.model.template!=null||this._enterTextBoxValue()):(n(this._popupListID).removeClass("listActive"),this._activeItem<=0||this._activeItem==null||this._activeItem>this._listSize-1?this._activeItem=this._listSize-1:this._activeItem-=1,this.model.showCheckbox||this.model.template!=null||this._enterTextBoxValue()),t.preventDefault(),!1;case 39:return this.showPopupBox?(this._removeListHover(),n(this._popupListID).removeClass("listActive"),this._activeItem>=this._listSize-1||this._activeItem==null||this._activeItem<0?this._activeItem=0:this._activeItem+=1,this._addListHover(),this.model.showCheckbox||this.model.template!=null||this._enterTextBoxValue()):(n(this._popupListID).removeClass("listActive"),this._activeItem>=this._listSize-1||this._activeItem==null||this._activeItem<0?this._activeItem=0:this._activeItem+=1,this.model.showCheckbox||this.model.template!=null||this._enterTextBoxValue()),t.preventDefault(),!1;case 9:this._hideResult();break;case 35:return this.showPopupBox?(this._removeListHover(),n(this._popupListID).removeClass("listActive"),this._activeItem=this._listSize-1,this._addListHover(),this.model.showCheckbox||this.model.template!=null||this._enterTextBoxValue()):(n(this._popupListID).removeClass("listActive"),this._activeItem=this._listSize-1,this.model.showCheckbox||this.model.template!=null||this._enterTextBoxValue()),t.preventDefault(),!1;case 36:return this.showPopupBox?(this._removeListHover(),n(this._popupListID).removeClass("listActive"),this._activeItem=0,this._addListHover(),this.model.showCheckbox||this.model.template!=null||this._enterTextBoxValue()):(n(this._popupListID).removeClass("listActive"),this._activeItem=0,this.model.showCheckbox||this.model.template!=null||this._enterTextBoxValue()),t.preventDefault(),!1;case 27:this._hideResult();break;case 32:return t.preventDefault(),!1}},_OnKeyUp:function(t){t.preventDefault();var i=t.target;if(n.trim(this.element.val())==""&&t.keyCode==38&&t.keyCode==40)return this._hideResult(),!1;switch(t.keyCode){case 38:break;case 40:break;case 37:break;case 39:break;case 20:break;case 16:break;case 17:break;case 18:break;case 35:break;case 36:break;case 144:break;case 27:break;case 9:break;case 13:return t.preventDefault(),this.model.showCheckbox?this._OnListSelect(t):this.model.template?(this._templateValue(),this._hideResult()):(this._enterTextBoxValue(),this._hideResult()),!1;case 32:return t.preventDefault(),this.model.showCheckbox?this._OnListSelect(t):this.model.template?(this._templateValue(),this._hideResult()):(this._enterTextBoxValue(),this._hideResult()),!1;case 8:this._hideResult();break;default:!this.model.showCheckbox&&this.model.dataSource!=null&&this.model.dataSource.length>0&&this.model.incrementalSearch&&this._OnTextEnter(t.keyCode)}},_templateValue:function(){var t=n(n(this._popupListID)[this._activeItem]);n(this._popupListID).removeClass("listHover").removeClass("listActive"),t.addClass("listActive"),this.element.val(this.popupListItems[this._activeItem].text),this.model.watermark!=null&&(n.trim(this.element.val())===""||n.trim(this.element.val())===this.model.watermark?(this.element.val(this.model.watermark),this.element.addClass("watermark")):this.element.removeClass("watermark"))},_OnTextEnter:function(n){_proxy=this,this._incqueryString+=String.fromCharCode(n),this._incqueryString.length>0&&setTimeout(function(){_proxy._incqueryString=""},100);var i=this.model.dataSource,t,o=this.model.caseSensitive,f=this.model.fields,r,e=this._incqueryString,s=this._incqueryString.length,u=!1;for(o||(e=e.toLowerCase()),t=0;t<i.length;t++)if(r=typeof i[t]=="string"?i[t]:(f&&f.text)?i[t][f.text]:i[t].text,r=o?r:r.toLowerCase(),r.substr(0,s)==e?(this.showPopupBox?(this._removeListHover(),this._activeItem=t,this._enterTextBoxValue(),this._addListHover()):(this._activeItem=t,this._enterTextBoxValue()),u=!0):t==i.length-1&&u==!1&&(this.showPopupBox?(this._removeListHover(),this._activeItem=t,this._enterTextBoxValue(),this._addListHover()):(this._activeItem=t,this._enterTextBoxValue()),u=!0),u)break},_targetFocus:function(){this.element.hasClass("watermark")&&(this.element.removeClass("watermark"),this.element.val(null)),this.wrapper?this.wrapper.addClass("e-focused"):this.element.addClass("e-focused"),this._isFocused=!0,this.model.focusIn&&this._trigger("focusIn")},_targetBlur:function(){this._isFocused=!1,this.wrapper?this.wrapper.removeClass("e-focused"):this.element.removeClass("e-focused"),this.model.watermark!=null&&n.trim(this.element.val())===""&&(this.element.val(this.model.watermark),this.element.addClass("watermark")),this.model.focusOut&&this._trigger("focusOut")},_wireEvents:function(){this._on(this.wrapper,"focus",this._targetFocus),this._on(this.wrapper,"blur",this._targetBlur),this._on(this.wrapper,"keydown",this._OnKeyDown),this._on(this.popupList,"keydown",this._OnKeyDown),this._on(this.popupList,"keyup",this._OnKeyUp),this._on(this.wrapper,"keyup",this._OnKeyUp)}})})(jQuery,Syncfusion)