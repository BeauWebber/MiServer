/*!
*  filename: ej.treeview.min.js
*  version : 11.2.0.63
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n,t,i){t.widget("ejTreeView","ej.TreeView",{_rootCSS:"e-treeview",element:null,model:null,defaults:{showCheckbox:!1,dragAndDrop:!1,dropChild:!0,dropSibling:!0,dragAndDropAcrossControl:!0,allowEdit:!1,allowKeyboardNavigation:!0,dataSource:null,query:null,items:null,fields:null,autoCheckParentNode:!1,loadOnDemand:!1,cssClass:"",template:null,rtl:!1,expandEvent:"dblclick",persist:!1,expandedNodes:[],width:null,height:null,click:null,beforeExpand:null,expand:null,beforeCollapse:null,collapse:null,select:null,checked:null,unchecked:null,inlineEditValidation:null,beforeEdit:null,keyPress:null,dragStart:null,drag:null,dragStop:null,dropped:null},_init:function(){if(this.model.items!=null){var n=this._renderTemplate(this.model.items);this.element.append(n)}t.isNullOrUndefined(this.model.fields)||this.model.fields.dataSource==null?this.initialize():this._checkDataBinding()},_setModel:function(t){for(var i in t)switch(i){case"cssClass":this._changeSkin(t[i]);break;case"dragAndDropAcrossControl":this.model.dragAndDropAcrossControl=t[i],this._enableDargDrop();break;case"showCheckbox":t[i]?(this.model.showCheckbox=t[i],this._showCheckBox()):(this.element.find("div.e-checkbox").next().remove(),this.element.find("div.e-checkbox").remove());break;case"allowEdit":t[i]?this._enableAllowEdit():this._disableAllowEdit();break;case"allowKeyboardNavigation":t[i]?this._on(n(document),"keydown",this._KeyPress):n(document).unbind("keydown",this._KeyPress);break;case"dragAndDrop":t[i]&&this._enableDargDrop();break;case"rtl":t[i]?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")}},_destroy:function(){this.element.html(""),this.element.parent().append(this._cloneElement),this.element.remove(),this.element=this._cloneElement,this.element.removeClass("e-treeview")},initialize:function(){this._cloneElement=n(this.element).clone(),this._cutCopyNodeText=null,this.beforeEditText=null,this.element.is("ul")?this._createWrapper():(this.element.addClass("e-treeview-widget"),this.model.width!=null&&this.element.width(this.model.width),this.model.height!=null&&this.element.height(this.model.height),this.model.rtl&&this.element.addClass("e-rtl")),this._ulList=n("ul",this.element),this._liList=n("li",this.element),this._addBaseClass(),this._controlRender(),this._addDragableClass(),this._wireEvents(),this._finalize()},_createWrapper:function(){var n=t.buildTag("div.e-treeview e-treeview-widget "+this.model.cssClass,"","",{tabindex:0});t.isNullOrUndefined(this.element.attr("accesskey"))||n.attr("accesskey",this.element.attr("accesskey")),this.model.width!=null&&n.width(this.model.width),this.model.height!=null&&n.height(this.model.height),this.model.rtl&&n.addClass("e-rtl"),n.insertAfter(this.element),n.append(this.element),this.element=n},_changeSkin:function(n){this.model.cssClass!=n&&this.element.removeClass(this.model.cssClass).addClass(n)},_checkDataBinding:function(){this.model.fields.dataSource instanceof t.DataManager?this._initDataSource():(this._ensureDataSource(this.model.fields.dataSource),this.initialize())},_initDataSource:function(){var t;this.element.ejWaitingPopup(),t=this.element.ejWaitingPopup("instance"),this.element.ejWaitingPopup("refresh"),this.element.ejWaitingPopup("show");var i=this._columnToSelect(this.model.fields),n=this,r=this.model.fields.dataSource.executeQuery(i);r.done(function(t){n.element.ejWaitingPopup("hide"),n.retriveData=t.result,n._ensureDataSource(t.result),n.initialize()})},_columnToSelect:function(n){var u=[],r=t.Query(),i;if(t.isNullOrUndefined(n.query)){for(i in n)i!=="tableName"&&i!=="child"&&i!=="dataSource"&&u.push(n[i]);u.length>0&&r.select(u),this.model.fields.dataSource.dataSource.url.match(n.tableName+"$")||t.isNullOrUndefined(n.tableName)||r.from(n.tableName)}else r=n.query;return r},_ensureDataSource:function(n){this.currentSelectedData=n,this.element.append(this._renderTemplate(n))},_renderTemplate:function(n){var u=t.buildTag("ul"),r="",i;for(this._odataFlag=!1,i=0;i<n.length;i++)this.model.fields.dataSource!=null?(t.isNullOrUndefined(n[i][this.model.fields.parentId])||n[i][this.model.fields.parentId]==0)&&(r=this._tempalteSub(n[i],n,this.model.fields)):r=this._tempalteSub(n[i],n,this.model.fields),u.append(r);return u},_tempalteSub:function(i,r,u){var e,y,c,a,p,w=!1,v,b,l,k,f,s,o,h;if(this.model.fields.dataSource!=null&&(this.model.loadOnDemand&&i[u.hasChild]?(f={},p=n("<ul><\/ul>"),w=!0):f=t.isNullOrUndefined(u.parentId)?i[u.childItems]:t.DataManager(this.currentSelectedData).executeLocal(t.Query().where(u.parentId,t.FilterOperators.equal,i[u.id]))),t.isNullOrUndefined(this.model.template)?(e=n("<li><\/li>"),i[u.id]&&e.prop("id",i[u.id]),i[u.htmlAttribute]&&this._setAttributes(i[u.htmlAttribute],e),i[u.imageUrl]?(c=t.buildTag("img"),c.attr("src",i[u.imageUrl]),i[u.imageAttribute]&&this._setAttributes(i[u.imageAttribute],c),e.append(c)):i[u.spriteCssClass]&&(y=t.buildTag("span."+i[u.spriteCssClass]),e.append(y)),i[u.text]!=""&&(a=t.buildTag("a",i[u.text],"",{href:"#"}),i[u.linkAttribute]&&a.attr("href",i[u.linkAttribute]),e.append(a))):(v=n("<div><\/div>"),v.append(n("#"+this.model.template).render(i)),e=v.find("li")),i[u.expanded]&&e.addClass("expanded"),i[u.isChecked]&&e.addClass("ischecked"),w&&e.append(p),t.isNullOrUndefined(u.child)||this.model.loadOnDemand){if(!this._odataFlag&&f&&f.length>0){for(s=t.buildTag("ul"),o=0;o<f.length;o++)h=this._tempalteSub(f[o],r,u),s.append(h);e.append(s)}}else if(this._odataFlag=!0,u.child.dataSource instanceof t.DataManager)b=this,l=t.Query(),l=this._columnToSelect(u.child),l.where(u.child.parentId,t.FilterOperators.equal,i[u.id]),k=u.child.dataSource.executeQuery(l),k.done(function(t){f=t.result,f&&f.length>0&&(b._createSubNodesWhenLoadOnDemand(f,e,u.child),n(e).find(" >div >div").first().addClass("plus"))});else if(f=t.DataManager(u.child.dataSource).executeLocal(t.Query().where(u.child.parentId,t.FilterOperators.equal,i[u.id])),f&&f.length>0){for(s=n(document.createElement("ul")),o=0;o<f.length;o++)h=this._tempalteSub(f[o],u.child.dataSource,u.child),s.append(h);e.append(s)}return e},_setAttributes:function(n,t){for(var i in n)t.attr(i,n[i])},_addDragableClass:function(){this.model.dragAndDrop&&(this._anchors=this._liList.map(function(){return n("a",this)[0]}),this._anchors.addClass("e-draggable e-droppable"))},_addBaseClass:function(){this._ulList.addClass("e-treeview-ul"),this._liList.addClass("e-item"),this.element.find("ul").first().removeClass("e-treeview-ul")},_controlRender:function(){var c,r,o,v,s,f,y,h,l,b,p,u,k;if(this.element!=null){var e=this.element.find("> ul"),w=e.find("li"),a=-1;for(c=0;c<w.length;c++)r=n(w[c]),f=r.children("ul")[0],this.model.showCheckbox==!0&&n(f).length!=0&&(y=e.find(">li"),y.each(function(t){n(f).parents("li").first()[0]==n(y[t])[0]&&(a=a+1)}),this._checkboxrecursive(e,f,a)),f&&n(r.children("ul")[0]).remove(),h=r.children("a")[0],h?(s=n(h).text(),o=n(h).clone(),n(h).remove(),n(o).addClass("nodetext"),n(o).addClass("CanSelect"),v=r.clone(),r.html("")):(s=this._getText(r),v=r.clone(),r.html(""),o=t.buildTag("a.nodetext CanSelect",s,"",{href:"#"+n.trim(s)})),l=t.buildTag("span"),f?n(l).addClass("collapseimg"):n(l).addClass("child"),b=t.buildTag("div"),p=t.buildTag("div"),n(p).append(b).append(l).append(v.children()).append(o),r.prepend(p),f&&r.append(f),r.prop("name")==i&&r.prop("name",s);this.model.showCheckbox&&(this._addCheckBox(e),this.element.find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange}))}u=e.find("li"),u.find(">ul").hide(),k=u.find("a"),k.focus(function(){n(this).blur()}),u.filter("li:last-child").addClass("last"),n(u[0]).addClass("first"),n(u[0]).hasClass("first")&&n(u[0]).hasClass("last")&&n(u[0]).removeClass("first"),n(u.filter(":has(ul)")).each(function(){var t=n(n(this).children()).filter("ul");n(t).is(":hidden")?n(n(this).children().find("div")[0]).removeClass("minus").addClass("plus"):n(this.childNodes[1]).removeClass("plus").addClass("minus")})},_getText:function(t){return n(t).clone().children().remove().end().text()},_finalize:function(){var t,n;for(this._isFocus=!1,t=this.element.find(".expanded"),n=0;n<t.length;n++)this._expandNode(t[n]);for(this.model.showCheckbox&&this._isCheckedAction(),n=0;n<this.model.expandedNodes.length;n++)this._expandNode(this._liList[this.model.expandedNodes[n]]);this.model.allowEdit&&this._enableAllowEdit()},_isCheckedAction:function(){for(var i=this.element.find(".ischecked"),t=0;t<i.length;t++)this._nodeCheckedAction(n(i[t]).find("div.e-checkbox").first());this.element.find(".ischecked").removeClass("ischecked")},_addCheckBox:function(i){for(var u=i.find(">li"),f,e,r=0;r<u.length;r++)f=t.buildTag("input.nodecheckbox","",{},{type:"checkbox",name:"TreeView_Checkbox["+r+"].Checked",value:"False"}),e=t.buildTag("input","",{},{type:"hidden",name:"TreeView_Checkbox.Index",value:r}),n(u[r]).children("div").children("span").first().after(n(e)),n(u[r]).children("div").children("span").first().after(n(f))},_checkboxrecursive:function(i,r,u){var o=this,f,e=n(r).find(">li");f=n(n(n(r).parents("li")[0]).find(">input[type= hidden]")[0]).length==0?u:n(n(r).parents("li")[0]).find(">input[type=hidden]")[0].value,e.each(function(i){var l=u,s=f+"."+i;o._checkboxrecursive(f,this,l);var h=t.buildTag("input.nodecheckbox","",{},{type:"checkbox",name:"TreeView_Checkbox["+s+"].Checked",value:"False"}),c=t.buildTag("input","",{},{type:"hidden",name:"TreeView_Checkbox.Index",value:s}),r=n(e[i]);r.find("a.nodetext ").length>0?(h.insertBefore(r.find("a.nodetext ")[0]),c.insertBefore(r.find("a.nodetext ")[0])):r.append(h).append(c)})},_checkedChange:function(t){var i=n(t.element).closest(".e-treeview").data("ejTreeView");t.isChecked?i._nodeCheckedAction(t.element):i._nodeUnCheckedAction(t.element)},_ClickEventHandler:function(t){var e=this,i=t.target,r,u,f;if(!this._isclicked){if(this._isclicked=!0,this._onClick({Event:t}),i.tagName.toUpperCase()=="DIV"&&(n(i).hasClass("plus")||n(i).hasClass("minus"))){if(r=null,i.tagName.toUpperCase()=="SPAN"?(r=n(i.parentNode).parent().children().filter("ul"),i=n(i.parentNode).children().filter("div")[0]):r=n(i.parentNode).parent().children().filter("ul"),u=n(r).children().filter("li").length>0?!0:!1,!u&&this.model.loadOnDemand){n(i).addClass("e-loading");var o=n(n(i).parents("li")[0]).attr("id"),s=n(n(n(n(i).parents("li")[0]).children("div")[0]).children("a[class*=nodetext]")[0]).text(),h={id:o,text:s};this._loadOnDemand(h,i)}else this._expandCollapseAction(i);this._nodeSelectionAction(n(i).parents("li").first().find("a[class*=nodetext]").first())}i.tagName.toUpperCase()=="A"&&n(i).hasClass("CanSelect")&&!n(i).hasClass("selected")&&this._nodeSelectionAction(i)}setTimeout(function(){e._isclicked=!1},300),i.tagName.toUpperCase()=="A"&&(f=i.href,f.indexOf("#")!=-1&&t.preventDefault())},_loadOnDemand:function(n,i){var r,u=this,f,e;this.model.fields.dataSource instanceof t.DataManager?(f=t.Query().where(this.model.fields.parentId,t.FilterOperators.equal,n.id),e=this.model.fields.dataSource.executeQuery(f),e.done(function(n){r=n.result,r.length>0&&(u._createSubNodesWhenLoadOnDemand(r,i,u.model.fields),u._expandCollapseAction(i))})):(r=t.DataManager(this.currentSelectedData).executeLocal(t.Query().where(this.model.fields.parentId,t.FilterOperators.equal,n.id)),r.length>0&&setTimeout(function(){u._createSubNodesWhenLoadOnDemand(r,i,u.model.fields),u._expandCollapseAction(i)},400))},_getPath:function(t){for(var r=n(t).prop("name"),i=n(t).parents("li")[0];i!=null&&i.parentNode.id!=this._id;)r=n(i).prop("name")+"/"+r,i=n(i).parents("li")[0];return this._id+"/"+r},_nodeSelectionAction:function(t){if(n(t)!=null&&!n(n(t).parents("li")).hasClass("nodeDisabled")){n(n(this.element).find(".selected")).removeClass("selected"),n(t).addClass("selected");var i=n(n(t).parents("li")[0]),r=n(t).text(),u={currentElement:i,text:r};this._onNodeSelect(u)}},_nodeUnSelectionAction:function(t){t[0]!=null&&n(t).removeClass("selected")},_nodeEnableAction:function(t){t[0]!=null&&(t=n(t),this.model.showCheckbox&&n(n(t.parents("li")[0]).find("input")[0]).prop("disabled",!1),n(t.parents("li")[0]).removeClass("nodeDisabled"),n(t.parents("li")[0]).find("a").removeClass("nodeDisabled"),n(t.parents("li")[0])[0].disabled=!1)},_nodeDisableAction:function(t){t[0]!=null&&(t=n(t),this._collpaseNode(t.parents("li")[0]),this.model.showCheckbox&&n(n(t.parents("li")[0]).find("input")[0]).prop("disabled",!0),n(t.parents("li")[0]).addClass("nodeDisabled"),n(t.parents("li")[0]).find("a").addClass("nodeDisabled"),n(t.parents("li")[0]).find("a").hasClass("selected")&&n(t.parents("li")[0]).find("a").removeClass("selected"),n(t.parents("li")[0])[0].disabled=!0)},_expandCollapseAction:function(i){var f,u=this,o,e,r;if(!n(i.parentNode).parent().hasClass("nodeDisabled"))if(t.isNullOrUndefined(i.tagName)||i.tagName.toUpperCase()!="SPAN"?f=n(i.parentNode).parent().children().filter("ul"):(f=n(i.parentNode).parent().children().filter("ul"),i=n(i.parentNode).children().filter("div")[0]),o=i.tagName=="DIV"?n(i.parentNode.parentNode)[0]:i,this._isExpanded(o)){if(e=n(n(n(n(i).parents("li")[0]).children("div")[0]).children("a[class*=nodetext]")[0]).text(),r={currentElement:n(n(i).parents("li")[0]),text:e},this._onBeforeCollapse(r)===!0)return!1;n(f).animate({height:"toggle"},200,"linear",function(){u._onNodeCollapse(r),u._removeExpandedNodes(u._liList.index(r.currentElement))}),n(i).removeClass("minus").addClass("plus"),i.parentNode!=null&&(n(i.parentNode.parentNode).removeClass("e-collapse"),n(n(i.parentNode).children()[1]).addClass("collapseimg").removeClass("expandimg"))}else{var s=n(n(i).parents("li")[0]),e=n(n(n(n(i).parents("li")[0]).children("div")[0]).children("a[class*=nodetext]")[0]).text(),r={currentElement:s,text:e};if(this._onBeforeExpand(r)===!0)return!1;n(f).animate({height:"toggle"},350,"linear",function(){u._onNodeExpand(r),u._addExpandedNodes(u._liList.index(s))}),n(i).removeClass("plus").addClass("minus"),n(i.parentNode.parentNode).addClass("e-collapse"),n(n(i.parentNode).children()[1]).removeClass("collapseimg").addClass("expandimg")}},_isExpanded:function(t){t.tagName=="A"&&(t=n(t.parentNode.parentNode)[0]);var i=this.isNodeExpanded(t);return n(n(t).children().filter("ul"))!=null&&(i=n(n(t).children().filter("ul").find("li"))!=null?n(n(t).children().filter("ul").find("li")).is(":not(:hidden)"):!1),i},_isChecked:function(t){return n(t).val()==="True"?!0:!1},_isUnChecked:function(t){return n(t).context.checked?!1:!0},_nodeCheckedAction:function(i){var o=this,f=n(n(i).find("input.nodecheckbox[type=checkbox]")[0]),s,h,e,u,r;for(f.addClass("checked").prop("value","True"),f.ejCheckBox({indeterminate:!1,checked:!0}),this._onChecked(f),n(n(i).parents("li")[0]).children("ul").find("input.nodecheckbox[type=checkbox]").prop("checked",!0).addClass("checked").prop("value","True"),s=n(n(i).parents("li")[0]).children("ul").find("input.nodecheckbox[type=checkbox]"),s.each(function(){n(this).ejCheckBox({checked:!0}),o._onChecked(this)}),h=this.model.autoCheckParentNode,e=n(n(i).parents("li")[0]).parents("li"),e.each(function(t){var r=n(e[t]).children("ul").find("li"),u=n(e[t]).find('input.nodecheckbox[value="True"]').length,i=n(n(e[t]).find("input.nodecheckbox[type=checkbox]")[0]);u==r.length||h?(i.addClass("checked").prop("value","True"),n(i).ejCheckBox({indeterminate:!1,indeterminateState:!1,checked:!0}),o._onChecked(i)):(i.ejCheckBox({indeterminate:!0,indeterminateState:!0}),i.val("False"))}),u=this.element.find('input.nodecheckbox[value="True"]'),r=0;r<u.length;r++){var f=n(u[r]).parents(".e-checkbox"),c=n(f.next()[0])[0].value,l=n(n(u[r]).parents("li")[0]).attr("id"),a=n(u[r]).parents("li").first().find(".nodetext").first().text(),v=t.buildTag("input","",{},{type:"hidden",name:"TreeView_Checkbox["+c+"].Value",value:l}),y=t.buildTag("input","",{},{type:"hidden",name:"TreeView_Checkbox["+c+"].Text",value:a});try{n(u[r]).append(n(v)),n(u[r]).append(n(y))}catch(p){}}},_nodeUnCheckedAction:function(t){var s=this,e,o,u,r,f,i;for(t=n(t),i=n(n(t).find("input.nodecheckbox[type=checkbox]")[0]),i.removeClass("checked").prop("value","False").children().remove(),i.ejCheckBox({indeterminate:!1,checked:!1}),this._onUnChecked(i),e=n(t.parents("li")[0]).children("ul").find("input.nodecheckbox[type=checkbox]"),e.removeClass("checked").prop("value","False").children().remove(),e.each(function(){n(this).ejCheckBox({checked:!1}),s._onUnChecked(this)}),o=this.model.autoCheckParentNode,u=n(t.parents("li")[0]).parents("li"),r=0;r<u.length;r++)f=n(u[r]).find('input.nodecheckbox[value="True"]').length,i=n(n(u[r]).find("input.nodecheckbox[type=checkbox]")[0]),f<=0&&(i.ejCheckBox({indeterminate:!1,indeterminateState:!1,checked:!1}),this._onUnChecked(i)),f>1&&o?(i.addClass("checked").prop("value","True"),i.ejCheckBox({checked:!0})):f>0&&(i.removeClass("checked").prop("value","False").children().remove(),i.ejCheckBox({indeterminateState:!0,indeterminate:!0}))},_enableAllowEdit:function(){var t=this.element,i=n(t).find("li");i.each(function(){n(this).addClass("AllowEdit")})},_disableAllowEdit:function(){var t=this.element.find("li");t.each(function(){n(this).removeClass("AllowEdit")})},_expandNode:function(t){if(t!=null&&n(n(n(t).children("div")).children()[0]).hasClass("plus")){var i=n(t).children("ul").find("li").length>0?!0:!1;i&&this._expandCollapseAction(n(n(t).children("div")).children()[0])}return!0},_collpaseNode:function(t){var i=t;i!=null&&n(i).find("ul").length>0&&n(n(n(i).children("div")).children()[0]).hasClass("minus")&&this._expandCollapseAction(n(n(i).children("div")).children()[0])},_expandAll:function(){var i=this,r=this.element,t=n(r).find("li:not([class*='nodeDisabled'])"),u=t.find(">ul:hidden").parents("li");t.find(">ul:hidden").find("li").length>0&&t.find(">ul:hidden").animate({height:"toggle"},350),n(u).each(function(){if(!n(this).hasClass("nodeDisabled")){var r=n(n(this).parents("li")[0]),u=n(n(this).find(">div >a")[0]).text(),t={currentElement:r,text:u};if(i._onBeforeExpand(t)===!0)return!1;n(this).find("li").length>0&&(n(this).addClass("expand"),n(n(n(this).children("div")[0]).children()[1]).removeClass("collapseimg").addClass("expandimg"),n(n(n(this).children("div")[0]).children()[0]).removeClass("plus").addClass("minus")),i._onNodeExpand(t)}})},_collapseAll:function(){var n=this.element.find("li");this._collapseNodes(n)},_checkAll:function(){var u,r,i,t;if(this.model.showCheckbox)for(u=this.element,r=n(u).find("li"),i=0;i<r.length;i++)t=n(r[i]).children().find("input.nodecheckbox")[0],n(t)[0].disabled?n(t).ejCheckBox("setModel",{checked:!1}):(n(t).ejCheckBox("setModel",{checked:!0}),n(t).attr("value","True"),this._onChecked(t));else alert("Please Enable the ShowCheckbox property")},_unCheckAll:function(){var u,r,t,i;if(this.model.showCheckbox)for(u=this.element,r=n(u).find("li"),t=0;t<r.length;t++)i=n(r[t]).find("input.nodecheckbox")[0],n(i).ejCheckBox("setModel",{checked:!1}),n(i).attr("value","False"),this._onUnChecked(i);else alert("Please Enable the ShowCheckbox property")},_collapseNodes:function(t){var i=this,r=t.find(">ul:not(:hidden)").parents("li");t.find(">ul:not(:hidden)").animate({height:"toggle"},350),n(r).each(function(){var r=n(n(this).find(">div >a")[0]).text(),t={currentElement:this,text:r};if(i._onBeforeCollapse(t)==!0)return!1;n(this).find("li").length>0&&(n(this).removeClass("e-collapse"),n(n(n(this).children("div")[0]).children()[1]).removeClass("expandimg").addClass("collapseimg"),n(n(n(this).children("div")[0]).children()[0]).removeClass("minus").addClass("plus")),i._onNodeCollapse(t)})},_showCheckBox:function(){for(var t=this.element.find("> ul"),e=t.find("li"),f,i=0;i<e.length;i++){var r=-1,o=e[i],u=n(o).children("ul")[0];this.model.showCheckbox==!0&&n(u).length!=0&&(f=t.find(">li"),f.each(function(t){n(n(u).parents("li")[0])[0].id==n(f[t])[0].id&&(r=r+1)}),this._checkboxrecursive(t,u,r))}this._addCheckBox(t),t.find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange})},_drag:function(){var i=this,r=!1,u=null;this._treeView=this.element.parent(),this.model.dragAndDropAcrossControl||(u=this.element.parent()),n(this._treeView).find("ul li div a").ejDraggable({dragArea:u,clone:!0,dragStart:function(n){var t=n.event.originalEvent.target||n.event.target,r={target:t};if(i._onDragStarts(r))return n.cancel=!0,!1},drag:function(u){var f,o,s,e;if(n(".Sibling").remove(),f=u.event.originalEvent.target||u.event.target,o={target:f},i._onDrag(o))return!1;n(f).hasClass("e-droppable")||n(f).parent().hasClass("e-droppable")?(document.body.style.cursor="",n(f).addClass("allowDrop")):(document.body.style.cursor="not-allowed",n(f).removeClass("showline-hover"),n(f).removeClass("noline-hover")),f.nodeName!="A"?(f.nodeName=="UL"&&(f=n(f).children()[0]),f.nodeName!="LI"&&(f=n(f).parent(".e-droppable")[0]||n(f).parent()),f.nodeName=="LI"&&n(f).hasClass("e-droppable")&&i.model.dropSibling&&(s=n(".e-treeview").has(f).offset().top+n(f).children().find("a")[0].offsetTop||-1,e=t.buildTag("div.Sibling"),n(f).hasClass("last")?n(f).append(e):n(f).hasClass("first")?n(f).prepend(e):(r=u.event.pageY<s?!1:!0,r?n(f).prepend(e):n(f).append(e)))):n(".Sibling").remove()},dragStop:function(t){var u,o,f,e;if((t.element.dropped||(n(".dragClone").remove(),document.body.style.cursor=""),u=t.event.originalEvent.target||t.event.target,u.className=="Sibling"&&(u=n(u).parent("li")[0]),o=i,f=r?"Before":"After",f=u.nodeName=="A"?"Over":f,e={target:u,position:f},i._onDragStop(e))||(n(t.element).removeClass("selected"),u.nodeName=="A"&&i.model.dropChild&&n(u).hasClass("e-droppable")||u.nodeName=="UL"&&n(u).children().length==0?(f="Over",n(t.element).parent().parent().has(n(u)).length==0&&(n(u).parent().parent().has(n(t.element)).length==0||i._isDescendant(n(u).parents("li:last").find(">ul>li"),n(t.element).parents("li:first")[0]))&&(i._dropAsChildNode(u,t.element,t.event),o._applyFirstLastChildClass())):(u.nodeName=="UL"&&(u=n(u).children()[0]),u.nodeName!="LI"&&(u=n(u).parent(".e-droppable")[0]||n(u).parent()),u.nodeName=="LI"&&i.model.dropSibling&&n(u).hasClass("e-droppable")&&(n(".Sibling").remove(),n(t.element).parent().parent().has(n(u)).length<1&&(i._dropAsSublingNode(u,t.element,r,t.event),o._applyFirstLastChildClass()))),n(".Sibling").remove(),n(".allowDrop").removeClass("allowDrop"),i.model.dropChild||n(i.element.find(".dragClone")).remove(),e={target:u,event:t.event,dropedElement:t.element},i._onDropped(e)))return!1;document.body.style.cursor=""},helper:function(t){return n(t.sender.target).clone().addClass("dragClone").appendTo(i.element)}})},_isDescendant:function(t,i){var r=!0;return n(t).each(function(n,t){if(t==i)return r=!1,!1;r=!0}),r},_childDrop:function(){n(this._treeView).find("ul li div a").ejDroppable({accept:n(this._treeView).find("ul li div a"),drop:function(t,i){n(i.helper).hide()}})},_siblingDrop:function(){n(this._treeView).find("ul li").ejDroppable({drop:function(t,i){n(i.helper).hide()}})},_dropAsSublingNode:function(t,i,r,u){var f=u.ctrlKey?n(i).parent().parent().clone():n(i).parent().parent(),e=n(i).parents("li")[1];r?n(f).insertBefore(t):n(f).insertAfter(t),this._checkBox(t,f),this._modifiCss(e),this._applyFirstLastChildClass()},_dropAsChildNode:function(t,i,r){var u=r.ctrlKey?n(i).parent().parent().clone():n(i).parent().parent(),f=n(i).parents("li")[1];t.nodeName=="UL"?n(t).append(u):this._appendNode(t,u),this._checkBox(n(t).parent().parent(),u),this._modifiCss(f),this._applyFirstLastChildClass(),this._expandNode(n(t).parent().parent()[0])},_appendNode:function(i,r){if(this._showline&&i.length!=0&&(n(n(n(i).parents("li")[0]).find("li")).hasClass("last")&&n(n(n(i).parents("li")[0]).find("li")).removeClass("last"),n(r).addClass("last")),i.length!=0)if(n(n(i).parents("li")[0]).find("ul")[0]==null){var u=t.buildTag("ul.e-treeview-ul");n(u).append(n(r)),n(n(n(i).parents("li")[0]).find("div")[1]).hasClass("minus")||n(n(n(i).parents("li")[0]).find("div")[1]).addClass("minus"),n(n(i).parents("li")[0]).append(n(u))}else n(n(n(i).parents("li")[0]).find("ul")[0]).append(n(r))},_checkBox:function(t,i){var r;if(!n(i).hasClass("nodecheckbox")&&n(i).find(".nodecheckbox").length>0&&(n(i).find(".e-checkbox").next().remove(),n(i).find(".e-checkbox").remove()),n(t).find(".e-checkbox").length>0){r=n(".e-treeview").has(t).find("ul")[0],n(r).find(".e-checkbox").next().remove(),n(r).find(".e-checkbox").remove();var f=this,u=-1,e=n(r).find("li");e.each(function(){var t=n(this).children("ul")[0],i;n(t).length!=0&&(i=n(r).find(">li"),i.each(function(r){n(n(t).parents("li")[0])[0].id==n(i[r])[0].id&&(u=u+1)}),f._childcheckbox(r,t,u))}),this._addCheckBox(n(r)),this.element.find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange}),n(t).closest(".e-treeview").find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange})}},_childcheckbox:function(i,r,u){var o=this,f,e=n(r).find(">li");f=n(n(n(n(r).parents("li")[0]).children()[0]).find(">input[type= hidden]")[0]).length==0?u:n(n(n(r).parents("li")[0]).children()[0]).find(">input[type= hidden]")[0].value,e.each(function(i){var c=u,r=f+"."+i,s,h;o._childcheckbox(f,this,c),s=t.buildTag("input.nodecheckbox","",{},{type:"checkbox",name:"TreeView_Checkbox["+r+"].Checked",value:"False"}),h=t.buildTag("input","",{},{type:"hidden",name:"TreeView_Checkbox.Index",value:r}),n(e[i]).children("div").children("span").after(n(h)),n(e[i]).children("div").children("span").after(n(s))})},_modifiCss:function(t){n(t).find("li").length==0?(n(t).find("ul").remove(),n(t).removeClass("e-collapse"),n(t).find("div.minus").removeClass("minus")):n(n(t).find("li")[n(t).find("li").length-1]).hasClass("last")||n(n(t).find("li")[n(t).find("li").length-1]).addClass("last")},_applyFirstLastChildClass:function(){var i=this.element,t=i.find("li");t.removeClass("first"),t.removeClass("last"),t.filter("li:last-child").addClass("last"),n(t[0]).addClass("first"),n(t[0]).hasClass("first")&&n(t[0]).hasClass("last")&&n(t[0]).removeClass("first")},_expandEventHandler:function(t){var i=n(n(t.target).siblings("div")),r,u;if(!(t.type==="dblclick"&&this.model.allowEdit))if(t.preventDefault(),this.model.loadOnDemand)if(r=n(t.target),u=r.parents("li").find("div.plus,div.minus").first(),u.hasClass("plus")){u.addClass("e-loading");var f=n(r.parents("li")[0]).attr("id"),e=r.text(),o={id:f,text:e};this._loadOnDemand(o,u[0])}else this._expandCollapseAction(i[0]);else i&&(i.hasClass("plus")||i.hasClass("minus"))&&this._expandCollapseAction(i[0])},_inlineEdit:function(t){return t.preventDefault(),t.target.tagName!="A"||n(t.target).hasClass("nodeDisabled")||n(n(t.target).parents("li")[0]).hasClass("AllowEdit")&&n(t.target).hasClass("nodetext")&&(n(t.target).removeClass("selected"),this._inlineEditAction(t.target)),!1},_inlineEditAction:function(t){var i=n("#Edit_Input")[0];i==null?this._createEditTextBox(t):(i=n("#Edit_Input")[0],n(i.parentNode).html(i.value),n(i).remove(),this._createEditTextBox(t)),n(t).css("display","none")},_createEditTextBox:function(i){var o={currentNode:i},r,u,e,f;return this._trigger("beforeEdit",o)?!1:(r=n("#Edit_Input")[0],r==null&&(u=t.buildTag("Input.Input_Text#Edit_Input","","",{type:"text",value:n.trim(i.innerHTML).replace(/\n\s+/g," "),name:"inplace_value"}),n(u).width(i.offsetWidth+5),n(u).height(i.offsetHeight-2),this.beforeEditText=n(i).text(),n(i).html(""),n(i).before(u),e=0,r=n("#Edit_Input")[0],e=r.value.length==""?3:i.offsetWidth+20,this._mousePositionAtEnd(r),this._currentEditableNode=i,f=n(r),this._on(f,"keypress",this._editTextBoxKeyPress),this._on(f,"keydown",this,this._pressEscKey),this._on(f,"blur",this._focusout)),r)},_editTextBoxKeyPress:function(n){n.target.size=n.target.value.length+1},_mousePositionAtEnd:function(n){return n.focus&&n.focus(),n.select&&n.select(),!0},_focusout:function(){var t=n("#Edit_Input")[0],i=t.value,r=n(n(t).parents("li")[0]).attr("id"),u={NodeID:r,OriginalText:this.beforeEditText,ModifiedText:i,UpdateChanges:!0};this._trigger("inlineEditValidation",u)==!0?this._cancelAction(t):this._saveAction(t)},_pressEscKey:function(t){t.cancelBubble=!0,t.returnValue=!1;var i=n("#Edit_Input")[0];i!=null&&(t.keyCode==13&&this._focusout(),t.keyCode==27&&this._cancelAction(i))},_onFocusHandler:function(t){this.model.allowKeyboardNavigation&&this._isFocus&&(this.element.find(".selected").removeClass("selected"),nextElement=this.element.find("li").first().find("a").first(),n(nextElement).addClass("selected"),t.preventDefault(),this._isFocus=!1)},_KeyPress:function(i){var f,c,e=this,a,u,r,l,o,d,s,v,w,y,p,g,b,h,nt,k;if(this._isFocus=!0,s=this.element.find("> ul"),f=i.keyCode?i.keyCode:i.which?i.which:i.charCode,f==113&&(i.preventDefault(),this._isFocus=!1,a=s.find(".selected")[0],a!=null&&n(n(a).parents("li")[0]).hasClass("AllowEdit")&&(n(a).removeClass("selected"),this._createEditTextBox(a))),e.model.allowKeyboardNavigation&&e.element.find("#Edit_Input").length<1)if(r=n(n(s).find(".selected").parents("li")[0]),l=n(s).find("li").not(":hidden"),f==40){if(r.length>0){for(i.preventDefault(),o=0;o<l.length;o++)if(n(n(l[o]).find("a")[0]).hasClass("selected"))if(o==l.length-1)this._nodeSelectionAction(n(r.find("a")[0]).addClass("selected"));else{n(n(l[o]).find("a")[0]).removeClass("selected"),this._nodeSelectionAction(n(n(l[o+1]).find("a")[0]));break}e._KeyPressEventHandler(u,e,f)}}else if(f==38){if(r.length>0){for(i.preventDefault(),o=0;o<l.length;o++)if(n(n(l[o]).find("a")[0]).hasClass("selected"))if(o==0)this._nodeSelectionAction(n(r.find("a")[0]).addClass("selected"));else{n(n(l[o]).find("a")[0]).removeClass("selected"),this._nodeSelectionAction(n(n(l[o-1]).find("a")[0]).addClass("selected"));break}e._KeyPressEventHandler(u,e,f)}}else if(f==39){if(n(r).children("div").find("div").hasClass("plus"))if(i.preventDefault(),d=n(r).children("ul").find("li").length>0?!0:!1,!d&&this.model.loadOnDemand){s=n(r).find("div.plus,div.minus").first(),s.addClass("e-loading");var tt=n(r).attr("id"),it=n(r).find("a[class*=nodetext]").first().text(),rt={id:tt,text:it};this._loadOnDemand(rt,s[0])}else this._expandNode(r);else n(r).find("div.plus,div.minus").first().length>0?this.selectNode(n(r).children("ul").find("li").first()[0]):(v=n(r).parent().find("li"),w=v.index(r),t.isNullOrUndefined(v[w+1])||this.selectNode(v[w+1]));u=n(r.find("a")[0]),e._KeyPressEventHandler(u,e,f)}else f==37?(n(r).children("div").find("div").hasClass("minus")?(i.preventDefault(),this._collpaseNode(r)):n(r).parents().first().parents("li").first().length>0&&(n(r).find("a.selected").first().removeClass("selected"),n(r).parents().first().parents("li").first().find("a").first().addClass("selected")),u=n(r.find("a")[0]),e._KeyPressEventHandler(u,e,f)):f==13?r.length>0&&(n(r).children("div").find("div").hasClass("minus")?this._collpaseNode(r):this._expandNode(r),u=n(r.find("a")[0]),e._KeyPressEventHandler(u,e,f)):f==32?r.length>0&&this.model.showCheckbox&&(i.preventDefault(),y=r.find("input.nodecheckbox[type=checkbox]").first(),y[0].checked?this._nodeUnCheckedAction(y.parent().parent()):this._nodeCheckedAction(y.parent().parent())):f==46?r.length>0&&(i.preventDefault(),this._removeNode(r.find("a.nodetext").first())):i&&i.ctrlKey==!0?f==88?(n(r).hasClass("first")?(p=n(r).removeClass("first").addClass("last"),n(r).next().addClass("first")):n(r).hasClass("last")?(p=n(r),n(r).prev().addClass("last")):p=n(r).addClass("last"),this._cutCopyNodeText=p,e._removeNode(),this.element.focus()):f==67?(g=n(r).clone(),this._cutCopyNodeText=g):f==86&&this._cutCopyNodeText!=null?(n(r).length===0&&(r=this.element),h=n(this._cutCopyNodeText).clone(),n(h.find("a")[0]).hasClass("selected")&&n(h.find("a")[0]).removeClass("selected"),b=n(h).hasClass("first")?n(h).removeClass("first").addClass("last"):n(h).hasClass("last")?n(h):n(h).addClass("last"),this.model.showCheckbox&&h.find("div.e-checkbox").ejCheckBox({checked:!1,change:this._checkedChange}),this._on(h.find(".nodetext"),"mouseenter",this._mouseEnterEvent),this._on(h.find(".nodetext"),"mouseleave",this._mouseLeaveEvent),n(r).children("div").children("span").hasClass("child")&&n(r).children("div").children("span").removeClass("child").addClass("expandimg"),n(r).children("ul").length!=0?(n(r).children("ul").find(">li").last().removeClass("last"),n(r).find(">ul").append(n(b))):(nt=t.buildTag("ul"),c=n(nt).append(n(b)),n(r).append(n(c)),n(r).children("div").find(">div").first().addClass("minus")),k=n(r).parents("li"),k.each(function(t){var i=n(k[t]).children("ul").find(">li");i.length==1&&n(i).addClass("last")}),this._expandNode(r)):f==36?(n(n(r).find("a")[0]).removeClass("selected"),u=n(n(s).find(">li")[0]).find("a")[0],n(u).addClass("selected"),e._KeyPressEventHandler(u,e,f),i.preventDefault()):f==35&&(n(n(r).find("a")[0]).removeClass("selected"),c=n(s).find(">li").last(),n(c).find("div").hasClass("minus")?(u=n(n(c).find("li").last().find("a")[0]),n(u).addClass("selected")):(u=n(c.find("a")[0]),n(u).addClass("selected")),e._KeyPressEventHandler(u,e,f),i.preventDefault()):f==36?(i.preventDefault(),n(n(r).find("a")[0]).removeClass("selected"),u=n(n(n(r).parents("li")[0]).find("li")[0]).find("a")[0],u?n(u).addClass("selected"):(u=n(n(s).find(">li")[0]).find("a")[0],n(u).addClass("selected")),e._KeyPressEventHandler(u,e,f)):f==35&&(i.preventDefault(),n(n(r).find("a")[0]).removeClass("selected"),u=n(n(r).parents("li")[0]).find("li").last().find("a")[0],u?n(u).addClass("selected"):(c=n(s).find(">li").last(),n(c).find("div").hasClass("minus")?(u=n(n(c).find("li").last().find("a")[0]),n(u).addClass("selected")):(u=n(c.find("a")[0]),n(u).addClass("selected"))),e._KeyPressEventHandler(u,e,f))},_removeNode:function(i){var r=t.isNullOrUndefined(i)?this.element.find(".selected"):i,u;r!=null&&(u=n(n(r).parents("li")[1]),n(n(r).parents("li")[0]).remove(),this._modifiCss(u))},_KeyPressEventHandler:function(t,i,r){var u,e=n(n(t).parents("li")[0]),o=i._getPath(n(t).parents("li")[0]),s=n(t).text(),f;u=n(n(t).parents("li")[0]).children("div").find("div").hasClass("minus")?!0:!1,f={keyCode:r,currentElement:e,nodeText:s,isExpanded:u,path:o},this._trigger("keyPress",f)},_documentClick:function(t){if(t.target.id!="Edit_Input")var i=n("#Edit_Input")[0];i!=null&&(n(i).next().html(i.value).removeAttr("style"),n(i).remove())},_saveAction:function(t){n(t).next().html(t.value).removeAttr("style"),n(t).remove()},_cancelAction:function(t){n(t).next().html(this.beforeEditText).removeClass("nodehover").addClass("selected").removeAttr("style"),this._hideEditTextBox()},_hideEditTextBox:function(){var t=n("#Edit_Input")[0];t!=null&&n(t).remove()},_mouseEnterEvent:function(t){n(t.target).hasClass("nodetext")&&!n(t.target).hasClass("nodeDisabled")&&n(t.target).addClass("nodehover")},_mouseLeaveEvent:function(t){n(t.target).hasClass("nodehover")&&n(t.target).removeClass("nodehover")},_createSubNodesWhenLoadOnDemand:function(i,r,u){t.isNullOrUndefined(u)&&(u=this.model.fields);var a,f=this,v=u.id,h=u.text,c=u.parentId,y=u.childItems,p=u.hasChild,e=u.imageUrl,o=u.ckecked,l=u.spriteCssClass,s=t.buildTag("ul.e-treeview-ul","",{display:"none"});n.each(i,function(u,c){var d=t.buildTag("a.nodetext CanSelect",c[h],"",{href:"#"+c[h]}),g,k,nt,w,rt,b,ut;if(f._on(n(d),"mouseenter",f._mouseEnterEvent),f._on(n(d),"mouseleave",f._mouseLeaveEvent),g=t.buildTag("div"),k=t.buildTag("span"),c[y]||c[p]?(n(k).addClass("collapseimg"),n(g).addClass("plus")):n(k).addClass("child"),c[e]!=null&&(nt=t.buildTag("img"),nt.src=c[e].substr(0,1)=="~"?c[e].substr(1,c[e].length):c[e]),f.model.showCheckbox){var it=n(n(r).parents("li")[0]).find("div").find(">input[type=hidden]")[0].value,tt=t.buildTag("input.nodecheckbox","",{},{type:"checkbox",name:"TreeView_Checkbox["+it+"."+u+"].Checked"}),ft=t.buildTag("input","",{},{type:"hidden",name:"TreeView_Checkbox.Index",value:it+"."+u});c[o]!=null&&c[o]&&n(tt).prop("checked",!0),n(tt).prop("value",c[o]!=null?"False":c[o])}w=t.buildTag("div"),n(w).append(g),f.model.showCheckbox&&(n(w).append(tt),n(w).append(ft)),n(w).append(k),c[l]!=null&&(rt=t.buildTag("spane."+c[l]),n(w).append(rt)),n(w).append(nt),n(w).append(a),n(w).append(d),b=t.buildTag("li.e-item","","",{id:c[v]}),f.model.allowEdit&&b.addClass("AllowEdit"),i.length==u+1&&b.addClass("last"),b.append(n(w)),ut=n(b),c.ChildCount>0&&n(n(ut).children().find("div")[0]).removeClass("minus").addClass("plus"),n(s).append(n(b))}),this.element.find(" li#"+i[0][c]+" ul ").remove(),this.element.find(" li#"+i[0][c]+"").append(n(s)),this.model.showCheckbox&&n(s).find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange}),n(r).removeClass("e-loading")},_createTreeElement:function(i,r,u){var e,a,v,y,o,c,s;if(this.model.showCheckbox){if(t.isNullOrUndefined(r))a=this.element.find(">li"),e=a.length+1;else if(n(r.parents("li")[0]).children("ul").length==0)e=n(n(r.parents("li")[0]).find("div")[0]).find(">input[type=hidden]")[0].value+".0";else{var h=n(n(r.parents("li")[0]).children("ul").find("li").last().find("div").find(">input[type=hidden]")[0]).val(),l=h.split("."),p=parseInt(l[l.length-1])+1,w=h.substring(0,h.length-1);e=w+p}v=t.buildTag("input.nodecheckbox","",{},{type:"checkbox",name:"TreeView_Checkbox["+e+"].Checked",value:"False"}),y=t.buildTag("input","",{},{type:"hidden",name:"TreeView_Checkbox.Index",value:e})}o=t.buildTag("a.nodetext CanSelect",i,"",{href:"#"+i}),t.isNullOrUndefined(u)||o.attr("href",u),c=n(o),this._on(c,"mouseenter",this._mouseEnterEvent),this._on(c,"mouseleave",this._mouseLeaveEvent);var b=t.buildTag("span.child"),k=t.buildTag("div"),f=t.buildTag("div");return n(f).append(k),n(f).append(b),this.model.showCheckbox&&(n(f).append(v),n(f).append(y)),n(f).append(o),s=t.buildTag("li.e-item#"+i),this.model.allowEdit&&s.addClass("AllowEdit"),s.append(n(f)),n(s)},_addExpandedNodes:function(t){var i=this.model.expandedNodes;n.inArray(t,i)==-1&&this.model.expandedNodes.push(t)},_removeExpandedNodes:function(t){var i=this.model.expandedNodes;n.inArray(t,i)>-1&&this.model.expandedNodes.splice(n.inArray(t,i),1)},_wireEvents:function(){this._on(this.element,"click",this._ClickEventHandler),this._on(this.element.find(".nodetext"),"mouseenter",this._mouseEnterEvent),this._on(this.element.find(".nodetext"),"mouseleave",this._mouseLeaveEvent),this.model.allowEdit&&(this._on(n(document),"click",this._documentClick),this._on(this.element.parent(),"dblclick",this._inlineEdit)),this._on(this.element,this.model.expandEvent,this._expandEventHandler),this._on(n(document),"keydown",this._KeyPress),this._on(this.element,"focus",this._onFocusHandler),this._enableDargDrop()},_unWireEvents:function(){},_enableDargDrop:function(){this.model.dragAndDrop&&(this._drag(),this.model.dropChild&&this._childDrop(),this.model.dropSibling&&this._siblingDrop())},refresh:function(){this._unWireEvents(),this._init()},expandAll:function(){this._expandAll()},collapseAll:function(){this._collapseAll()},checkAll:function(){this.model.showCheckbox&&this._checkAll()},unCheckAll:function(){this.model.showCheckbox&&this._unCheckAll()},getSelectedNode:function(){var t=this.element.find(".selected");return n(n(t).parents("li")[0])},getText:function(i){if(t.isNullOrUndefined(i))return!1;return n(n(i).find("a")[0]).text()},selectNode:function(i){var r;t.isNullOrUndefined(i)||(r=n(i).hasClass("nodetext")?n(i):n(n(i).find(">div >a")[0]),this._nodeSelectionAction(r))},unSelectNode:function(i){var r;t.isNullOrUndefined(i)||(r=n(i).hasClass("nodetext")?n(i):n(n(i).find(">div >a")[0]),this._nodeUnSelectionAction(r))},enableNode:function(i){var r;t.isNullOrUndefined(i)||(r=n(i).hasClass("nodetext")?n(i):n(n(i).find("a.nodetext")[0]),this._nodeEnableAction(r),n(i).parent().find(".nodecheckbox").ejCheckBox("enable"))},disableNode:function(i){var r;t.isNullOrUndefined(i)||(r=n(i).hasClass("nodetext")?n(i):n(n(i).find(">div >a")[0]),this._nodeDisableAction(r),n(i).find(".nodecheckbox").ejCheckBox("disable"))},addNode:function(i,r,u){var f=null,s=null,o=this.element,h=o.children().length,e=t.isNullOrUndefined(u)?o.find(".selected"):u;e.length==0?(s=h==0||o.children().children().length==0?t.buildTag("ul"):o.children()[h-1],f=this._createTreeElement(i,null,r),n(s).append(f),this._appendNode(e,s),n(f).find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange})):(this._expandNode(n(n(e).parents("li")[0])),f=this._createTreeElement(i,e,r),this._appendNode(e,f),this.model.showCheckbox&&n(f).find(".nodecheckbox").ejCheckBox({cssClass:this.model.cssClass,change:this._checkedChange})),this._modifiCss()},removeNode:function(i){t.isNullOrUndefined(i)||(element=n(i).hasClass("nodetext")?n(i):n(n(i).find(">div >a")[0])),this._removeNode(element)},getAllCheckedNodes:function(){return this.element.find('input.nodecheckbox[value="True"]').closest("li")},checkNode:function(n){t.isNullOrUndefined(n)||this._nodeCheckedAction(n.find("div.e-checkbox").first())},unCheckNode:function(n){t.isNullOrUndefined(n)||this._nodeUnCheckedAction(n.find("div.e-checkbox").first())},expandNode:function(n){t.isNullOrUndefined(n)||this._expandNode(n)},collpaseNode:function(n){t.isNullOrUndefined(n)||this._collpaseNode(n)},showNode:function(n){t.isNullOrUndefined(n)||n.css("visibility","visible")},hideNode:function(n){t.isNullOrUndefined(n)||n.css("visibility","hidden")},show:function(){this.element.css("visibility","visible")},hide:function(){this.element.css("visibility","hidden")},isNodeChecked:function(t){return this._isChecked(n(t).find("input.nodecheckbox")[0])},isExpanded:function(n){return this._isExpanded(n)},isNodeExpanded:function(i){if(!t.isNullOrUndefined(i)){var r=n(i).children().filter("ul");return n(r).is(":not(:hidden)")}},hasChildNode:function(i){var r=!1;return t.isNullOrUndefined(i)||(r=n(i).children().length<2?!1:!0),r},_onNodeExpand:function(n){this.model.expand&&this._trigger("expand",n)},_onNodeCollapse:function(n){this.model.collapse&&this._trigger("collapse",n)},_onBeforeExpand:function(n){if(this.model.beforeExpand)return this._trigger("beforeExpand",n)},_onBeforeCollapse:function(n){if(this.model.beforeCollapse)return this._trigger("beforeCollapse",n)},_onNodeSelect:function(n){this.model.select&&this._trigger("select",n)},_onChecked:function(t){var i=n(t).parents("li").first(),r=i.find(".nodetext").first().text(),u=this._isChecked(t),f={currentElement:i,text:r,checked:u};this.model.checked&&this._trigger("checked",f)},_onUnChecked:function(t){var i=n(t).parents("li").first(),r=i.find(".nodetext").first().text(),u=this._isChecked(t),f={currentElement:i,text:r,checked:u};this.model.unchecked&&this._trigger("unchecked",f)},_onDragStarts:function(n){if(this.model.dragStart)return this._trigger("dragStart",n)},_onDrag:function(n){if(this.model.drag)return this._trigger("drag",n)},_onDragStop:function(n){if(this.model.dragStop)return this._trigger("dragStop",n)},_onDropped:function(n){if(this.model.dropped)return this._trigger("dropped",n)},_onClick:function(n){this._trigger("click",n)}})})(jQuery,Syncfusion)