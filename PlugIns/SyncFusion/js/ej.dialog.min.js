/*!
*  filename: ej.dialog.min.js
*  version : 11.2.0.63
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n,t,i){t.widget("ejDialog","ej.Dialog",{_rootCSS:"e-dialog",element:null,model:null,defaults:{autoOpen:!0,closeOnEscape:!0,closeText:"close",draggable:!0,height:"auto",minHeight:150,minWidth:150,modal:!1,position:null,resizable:!0,showHeader:!0,content:null,loadUrl:null,ajaxOptions:{type:"GET",cache:!1,url:"",data:{},dataType:"html",contentType:"html",async:!0},title:"",width:400,zIndex:1e3,cssClass:"",rtl:!1,allowKeyboardNavigation:!0,roundedCorner:!1,iconAction:["close"],customIconCss:null,contentContainer:null,beforeClose:null,close:null,beforeOpen:null,open:null,drag:null,dragStart:null,dragStop:null,resize:null,resizeStart:null,resizeStop:null,load:null,ajaxSuccess:null,ajaxError:null},dataTypes:{autoOpen:"boolean",closeOnEscape:"boolean",closeText:"string",draggable:"boolean",modal:"boolean",resizable:"boolean",showHeader:"boolean",title:"string",zIndex:"number",cssClass:"string",loadUrl:"string",content:"string",contentContainer:"string"},keyConfigs:[37,38,39,40],_init:function(){this._renderControl(),this._wireEvents()},_setModel:function(i){for(var r in i)switch(r){case"closeText":this._ejDialog.find("div.e-dialog-close").attr("title",i[r]);break;case"title":this._ejDialog.find("span.e-dialog-title").html(i[r]);break;case"width":this.model.width=i[r],this._setSize();break;case"height":this.model.height=i[r],this._setSize();break;case"position":this.model.position=i[r],this._dialogPosition();break;case"cssClass":this._changeSkin(i[r]);break;case"roundedCorner":this._roundedCorner(i[r]);break;case"content":this._appendContent(i[r]);break;case"loadUrl":this.model.loadUrl=i[r],this._appendContent();break;case"contentContainer":this._ejDialog.appendTo(n(i[r]));break;case"minHeight":this.model.minHeight=i[r],this._setSize();break;case"showHeader":i[r]?(this._renderTitleBar(),this._iconsRender(this.model.iconAction)):this._ejDialog.find(".e-dialog-titlebar").remove();break;case"rtl":i[r]?this._ejDialog.addClass("e-rtl"):this._ejDialog.removeClass("e-rtl");break;case"iconAction":t.isNullOrUndefined(this._dialogTitlebar)||(this._removeAllIcons(),this._iconsRender(i[r]))}},_destroy:function(){n("#"+this.element.attr("id")+"_overLay").remove(),this._cloneElement.appendTo(this._ejDialog.parent()),this._ejDialog.remove(),this._cloneElement.removeClass("e-dialog"),this.element=this._cloneElement,this._isOpen=!1},_renderControl:function(){if(this._cloneElement=this.element.clone(),this.element.attr("tabindex",0),this._ejDialog=t.buildTag("div.e-dialog "+this.model.cssClass+" e-dialog-wrapper e-shadow#"+this.element.prop("id")+"_wrapper","",{display:"none",zIndex:this.model.zIndex}),t.isNullOrUndefined(this.model.contentContainer)?this._ejDialog.appendTo(document.body):this._ejDialog.appendTo(n(this.model.contentContainer)),this.model.rtl&&this._ejDialog.addClass("e-rtl"),this.model.showHeader&&this._renderTitleBar(),this.model.showHeader&&this._iconsRender(this.model.iconAction),this._appendContent(this.model.content),this.model.draggable&&this.model.showHeader&&(this._dialogTitlebar.addClass("e-draggable"),this._dragDialog()),this.model.resizable){this._ejDialog.addClass("e-resizable");var i=t.buildTag("div.e-resizable-handle");i.appendTo(this._ejDialog),this._resizeDialog()}this._setSize(),this.model.autoOpen&&this.model.content!="ajax"&&this.open(),this._roundedCorner(this.model.roundedCorner)},_changeSkin:function(n){this.model.cssClass!=n&&this._ejDialog.removeClass(this.model.cssClass).addClass(n)},_renderTitleBar:function(){this._elementTitle=this.element.attr("title"),typeof this._elementTitle!="string"&&(this._elementTitle=""),this.model.title=this.model.title||this._elementTitle,this._dialogTitlebar=t.buildTag("div.e-dialog-titlebar e-dialog-header").prependTo(this._ejDialog),this.model.title&&t.buildTag("span.e-dialog-title",this.model.title).prependTo(this._dialogTitlebar)},_iconsRender:function(n){for(var t=0;t<n.length;t++)switch(n[t]){case"close":this._closeIcon();break;case"collapsible":this._collapsibleIcon();break;case"maximize":this._maximizeIcon();break;case"minimize":this._minimizeIcon();break;case"pin":this._pinIcon();break;case"custom":this._customIcon()}},_removeAllIcons:function(){this._dialogTitlebar.find("div.e-dialog-icon").remove()},_appendContent:function(n){var i,r;this.contentDiv=t.buildTag("div.e-dialog-scroller"),this.element.removeAttr("title").addClass("e-dialog-content e-widget-content"),n=="ajax"?(this.model.ajaxOptions.url=this.model.loadUrl,this._sendAjaxOptions(this.element,this.model.ajaxOptions.url)):n=="iframe"?(i=t.buildTag("iframe.e-iframe","",{width:"100%"},{scrolling:"no",frameborder:0,src:this.model.loadUrl}),this.element.append(i).show().appendTo(this.contentDiv),this._trigger("load",{contentType:n,url:this.model.loadUrl})):n=="image"?(r=t.buildTag("img.e-images","","",{src:this.model.loadUrl}),this.element.append(r).show().appendTo(this.contentDiv),this._trigger("load",{contentType:n,url:this.model.loadUrl})):this.element.show().appendTo(this.contentDiv),this.contentDiv.appendTo(this._ejDialog)},_roundedCorner:function(n){n?(this._ejDialog.addClass("e-corner-all"),this._dialogTitlebar.addClass("e-corner-top"),this._dialogClose.addClass("e-corner-all")):this._ejDialog.hasClass("e-corner-all")&&(this._ejDialog.removeClass("e-corner-all"),this._dialogTitlebar.removeClass("e-corner-top"),this._dialogClose.removeClass("e-corner-all"))},_renderScroller:function(){var t=this.model.width,i;this.model.height==="auto"||this.model.height==="100%"||(this.model.width==="auto"||this.model.width==="100%"||(t=this.element.outerWidth()),i=this.model.height-n(this._ejDialog.find("div.e-dialog-titlebar")).outerHeight(),this.contentDiv.ejScroller({width:t,height:i,rtl:this.model.rtl}))},_maxZindex:function(){var t=1;return t=Math.max.apply(null,n.map(n("body *"),function(t){if(n(t).css("position")=="absolute")return parseInt(n(t).css("z-index"))||1})),(t==i||t==null)&&(t=1),t},_setZindex:function(){var n=this._maxZindex();this.model.zIndex<=n&&this._ejDialog.css({zIndex:n+1})},_createOverlay:function(){var n=this._maxZindex()<this.model.zIndex?this.model.zIndex:this._maxZindex(),i=t.buildTag("div#"+this.element.attr("id")+"_overLay.e-Dialog-overlay","",{zIndex:n-1});i.appendTo(document.body)},_sendAjaxOptions:function(t,i){t.addClass("e-loading");var r=this,u=this.model.title,e=i,f={success:function(n){try{r._ajaxSuccessHandler(n,t,i,u)}catch(f){}},error:function(n){try{r._ajaxErrorHandler(n.statusText,t,i,u)}catch(n){}}};n.extend(!0,f,this.model.ajaxOptions),this._sendAjaxRequest(f)},_sendAjaxRequest:function(t){n.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.success,error:t.error,beforeSend:t.beforeSend,complete:t.complete})},_ajaxSuccessHandler:function(n,t,i){t.removeClass("e-loading"),t.html(n).addClass("e-dialog-loaded").appendTo(this._ejDialog),t.appendTo(this.contentDiv),this._dialogPosition(),this.open(),this._trigger("ajaxSuccess",{data:n,url:i})},_ajaxErrorHandler:function(n,t,i){t.addClass("e-dialog-loaded"),t.appendTo(this.contentDiv),this._dialogPosition(),this.open(),this._trigger("ajaxError",{data:n,url:i})},_closeIcon:function(){this._dialogClose=t.util.buildTag("div.e-dialog-icon");var n=t.util.buildTag("span.e-icon e-dialog-close");n.appendTo(this._dialogClose),this._dialogClose.appendTo(this._dialogTitlebar).attr("title",this.model.closeText),this._on(this._dialogClose,"mousedown",this._closeClick)},_collapsibleIcon:function(){this._dialogCollapsible=t.util.buildTag("div.e-dialog-icon");var n=t.util.buildTag("span.e-icon e-dialog-collapsible");n.appendTo(this._dialogCollapsible),this._dialogCollapsible.appendTo(this._dialogTitlebar),this._on(this._dialogCollapsible,"mousedown",this._collapsibleClick)},_maximizeIcon:function(){this._dialogMaximize=t.util.buildTag("div.e-dialog-icon");var n=t.util.buildTag("span.e-icon e-dialog-maximize");n.appendTo(this._dialogMaximize),this._dialogMaximize.appendTo(this._dialogTitlebar),this._on(this._dialogMaximize,"mousedown",this._maximizeClick)},_minimizeIcon:function(){this._dialogMinimize=t.util.buildTag("div.e-dialog-icon");var n=t.util.buildTag("span.e-icon e-dialog-minimize");n.appendTo(this._dialogMinimize),this._dialogMinimize.appendTo(this._dialogTitlebar),this._on(this._dialogMinimize,"mousedown",this._minimizeClick)},_pinIcon:function(){this._dialogPin=t.util.buildTag("div.e-dialog-icon");var n=t.util.buildTag("span.e-icon e-dialog-unpin");n.appendTo(this._dialogPin),this._dialogPin.appendTo(this._dialogTitlebar),this._on(this._dialogPin,"mousedown",this._pinClick)},_customIcon:function(){this._dialogCustom=t.util.buildTag("div.e-dialog-icon");var n=t.util.buildTag("span.e-dialog-custom");n.appendTo(this._dialogCustom),this._dialogCustom.appendTo(this._dialogTitlebar),t.isNullOrUndefined(this.model.customIconCss)||n.addClass(this.model.customIconCss)},_setSize:function(){var n=this.model,t,i;n.minWidth>n.width&&(n.width=n.minWidth),t=this._ejDialog.css({height:"auto",width:n.width}).outerHeight(),i=Math.max(0,n.minHeight-t),n.height==="auto"?this._ejDialog.css({height:"auto",minHeight:i}):this._ejDialog.height(this.model.height)},_resetScroller:function(){var i=this.model.height-n(this._ejDialog.find("div.e-dialog-titlebar")).outerHeight(),t;this.contentDiv.ejScroller({width:this.model.width,height:i}),this.element.width("auto"),t=this.contentDiv.data("ejScroller"),t.refresh()},_dragDialog:function(){var t=this;this._dialogTitlebar.ejDraggable({handle:".e-dialog-titlebar",cursorAt:{top:15,left:-2},dragStart:function(n){return t._clickHandler(),t.dialogPin&&(n.cancel=!0),t._trigger("dragStart",{event:n})?(n.cancel=!0,!1):void 0},drag:function(n){t._trigger("drag",{event:n})},dragStop:function(n){t._ejDialog.focus(),t._trigger("dragStop",{event:n})},helper:function(){return n(t._ejDialog).addClass("dragClone").appendTo(t._ejDialog.parent())}})},_resizeDialog:function(){var t=this;this._ejDialog.find("div.e-resizable-handle").ejResizable({minHeight:t.model.minHeight,minWidth:t.model.minWidth,handle:"e-dialog-content",resizeStart:function(n){t._trigger("resizeStart",{event:n})},resize:function(i){var r=n(i.element).parents("div.e-dialog-wrapper");t.model.height=n(r).height(),t.model.width=n(r).width(),t._setSize(),t._resetScroller(),t._trigger("resize",{event:i})},resizeStop:function(n){t._ejDialog.focus(),t._trigger("resizeStop",{event:n})},helper:function(i){var r=n(i.element).parents("div.e-dialog-wrapper");return t.model.height=n(r).height(),t.model.width=n(r).width(),t._setSize(),t._resetScroller(),n(t._ejDialog).appendTo(t._ejDialog.parent())}})},_dialogPosition:function(){var i,r,u;this._ejDialog.parents("form").length>0&&this._ejDialog.appendTo(this._ejDialog.parents("form")),this.model.position!=null?(this._ejDialog.css("position","absolute"),this._ejDialog.css("left",this.model.position.X+"px"),this._ejDialog.css("top",this.model.position.Y+"px")):(t.isNullOrUndefined(this.model.contentContainer)?(i=(n(window).width()-this._ejDialog.width())/2,r=(n(window).height()-this._ejDialog.height())/2):(u=n(this.model.contentContainer).position(),i=(n(this.model.contentContainer).outerWidth()-this._ejDialog.width())/2+Math.ceil(u.left),r=(n(this.model.contentContainer).outerHeight()-this._ejDialog.height())/2+Math.ceil(u.top)),this._ejDialog.css({top:r,left:i}),this._ejDialog.css("position","absolute"))},_closeClick:function(n){n.preventDefault(),this.close(n)},_collapsibleClick:function(t){n(t.target).hasClass("e-dialog-collapsible")?(this._dialogCollapsible.find("span.e-dialog-collapsible").removeClass("e-dialog-collapsible").addClass("e-dialog-expand"),this._ejDialog.find("div.e-resizable-handle").hide(),this._ejDialog.find(".e-dialog-content").parent().slideUp("fast"),this._ejDialog.height("auto")):n(t.target).hasClass("e-dialog-expand")&&(this._dialogCollapsible.find("span.e-dialog-expand").removeClass("e-dialog-expand").addClass("e-dialog-collapsible"),this._ejDialog.find(".e-dialog-content").parent().slideDown("fast"),this._ejDialog.find("div.e-resizable-handle").show(),this._ejDialog.height(this.model.height))},_maximizeClick:function(t){var i=n(t.target);i.hasClass("e-dialog-maximize")?(this._ejDialog.css("top","0px").css("left","0px").css("position","fixed"),this._ejDialog.width("100%"),this._ejDialog.height("100%"),this.element.height("100%"),this.element.width("100%"),this.contentDiv.height("100%"),this.contentDiv.width("100%"),i.removeClass("e-dialog-maximize").addClass("e-dialog-restore"),this._maximize=!0,this.dialogPin=!0):i.hasClass("e-dialog-restore")&&(this.element.height(""),this.element.width(""),this._restoreDialog(),i.removeClass("e-dialog-restore").addClass("e-dialog-maximize"))},_minimizeClick:function(t){var i=n(t.target),r;i.hasClass("e-dialog-minimize")&&(this._maximize&&this._setSize(),r=n(window).height()-this._ejDialog.height()+this.element.height()+14,this._ejDialog.css("top","").css("bottom","0").css("left","0").css("position","fixed"),this.contentDiv.hide(),i.parent().hide(),this._dialogTitlebar.find(".e-dialog-maximize").removeClass("e-dialog-maximize").addClass("e-dialog-restore"),this.dialogPin=!0)},_pinClick:function(t){var i=n(t.target);i.hasClass("e-dialog-unpin")?(this.dialogPin=!0,i.removeClass("e-dialog-unpin").addClass("e-dialog-pin")):i.hasClass("e-dialog-pin")&&(this.dialogPin=!1,i.removeClass("e-dialog-pin").addClass("e-dialog-unpin"))},_restoreDialog:function(){this.dialogPin=!1,this.contentDiv.show(),this._ejDialog.css("position","absolute").css("bottom",""),this._setSize(),this._dialogPosition(),this._renderScroller(),this._dialogTitlebar.find(".e-dialog-minimize").parent().show()},_clickHandler:function(){var n=this._maxZindex();parseInt(this._ejDialog.css("zIndex"))<n&&this._ejDialog.css({zIndex:n+1})},_docKeyDown:function(n){code=n.keyCode?n.keyCode:n.which?n.which:n.charCode,this.model.closeOnEscape&&code===27&&(this.close(n),n.preventDefault())},_keyDown:function(t){code=t.keyCode?t.keyCode:t.which?t.which:t.charCode,this.model.allowKeyboardNavigation&&n.inArray(code,this.keyConfigs)>-1&&(this._keyPressed(code),t.preventDefault())},_keyPressed:function(n){switch(n){case 40:this._ejDialog.css("top",this._ejDialog.position().top+3+"px");break;case 39:this._ejDialog.css("left",this._ejDialog.position().left+3+"px");break;case 38:this._ejDialog.css("top",this._ejDialog.position().top-3+"px");break;case 37:this._ejDialog.css("left",this._ejDialog.position().left-3+"px")}},_wireEvents:function(){this._on(n(document),"keydown",this._docKeyDown),this._on(this._ejDialog,"keydown",this._keyDown)},open:function(){if(this._isOpen)return!0;if(!0==this._trigger("beforeOpen"))return!1;this.element.css("display","block"),this._setZindex(),this._dialogPosition();var n=this;return this._ejDialog.fadeIn(400,"easeOutQuad",function(){n._trigger("open")}),this.model.modal==!0&&this._createOverlay(),this._ejDialog.eq(0).focus(),this._isOpen=!0,this},close:function(t){if(!this._isOpen)return!0;if(!0==this._trigger("beforeClose",{event:t}))return!1;this._isOpen=!1;var i=this;return this._ejDialog.fadeOut(300,"easeOutQuad",function(){i.element.css("display","none"),i._trigger("close",{event:t})}),this.model.modal&&n("#"+this.element.attr("id")+"_overLay").remove(),this},isOpened:function(){return this._isOpen}})})(jQuery,Syncfusion)