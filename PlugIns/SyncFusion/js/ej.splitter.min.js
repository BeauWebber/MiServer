/*!
*  filename: ej.splitter.min.js
*  version : 11.2.0.63
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n,t,i){t.widget("ejSplitter","ej.Splitter",{element:{target:null},model:null,_rootCSS:"e-splitter",defaults:{cssClass:"",orientation:"horizontal",properties:[{paneSize:"0px",minSize:"0px",maxSize:null,collapsible:!0,resizable:!0}],height:null,width:null,windowResizing:!1,rtl:!1,animationSpeed:300,expandCollapse:null,resize:null},dataTypes:{cssClass:"string",orientation:"enum",properties:[{paneSize:"string",minSize:"string",maxSize:"string",collapsible:"boolean",resizable:"boolean"}],windowResizing:"boolean",rtl:"boolean",animationSpeed:"number"},_init:function(){this._initialize(),this._render(),this._wireEvents(this.model.windowResizing)},_setModel:function(n){var t;for(t in n)switch(t){case"cssClass":this._changeSkin(n[t]);break;case"windowResizing":this._windowResizing(n[t]);break;case"rtl":this._rtl(n[t]);break;case"orientation":this._setOrientation(n[t])}},refresh:function(){this._setPanesDimentions(),this._getPaneSizeByPercent()},_changeSkin:function(n){this.model.cssClass!=n&&this.element.removeClass(this.model.cssClass).addClass(n)},_windowResizing:function(n){this.model.windowResizing!=n&&(n?this._wireEvents(n):this._unWireEvents())},_setOrientation:function(n){this._destroy(),this.model.orientation=n,this._init()},_destroy:function(){this.element.removeClass(this.model.cssClass+" e-splitter-"+this.model.orientation);for(var t=0,i=0;t<this.target.children.length;t++)n(this.target.children[t]).hasClass("splitbar")&&n(this.target.children[t]).remove(),n(this.target.children[t]).hasClass("pane")&&(n(this.target.children[t]).removeClass("pane"),n(this.target.children[t]).removeClass(this.model.orientation.substr(0,1)+"-pane"),this.target.children[t].style.width=null,this.target.children[t].style.height=null);this._unWireEvents()},_initialize:function(){this.target=this.element[0],this.panes=[],this.oldPaneSize=[],this.oldPanePercent=[],this.panesCount=0,this.currArrow=null,this.control=n("#"+this.target.id),this.shadowBar=null,this.containerCss=this.model.orientation=="horizontal"?"width":"height",this.displayCss=this.model.orientation=="horizontal"?"left":"top",this._bar=7},_render:function(){this.element.addClass(this.model.cssClass+" e-splitter-"+this.model.orientation);for(var t=0,i=0;t<this.target.children.length;t++)this.target.children[t].nodeName=="DIV"&&(n(this.target.children[t]).addClass("pane "+this.model.orientation.substr(0,1)+"-pane"),this.panes.push(this.target.children[t]));this.panesCount=this.panes.length,this._setPanesProperty(),this._insertSplitBar(),this._setDimentions(),this._setPanesDimentions(),this._initializeSizeArray(),this._getPaneSizeByPercent(),this._checkProperties()},_setPanesProperty:function(){for(var n=0;n<this.panesCount;n++)this.model.properties[n]!=i?(this.model.properties[n].paneSize=this.model.properties[n].paneSize==i?"0px":this.model.properties[n].paneSize,this.model.properties[n].minSize=this.model.properties[n].minSize==i?"0px":this.model.properties[n].minSize,this.model.properties[n].maxSize=this.model.properties[n].maxSize==i?null:this.model.properties[n].maxSize,this.model.properties[n].collapsible=this.model.properties[n].collapsible==i?!0:this.model.properties[n].collapsible,this.model.properties[n].resizable=this.model.properties[n].resizable==i?!0:this.model.properties[n].resizable):this.model.properties.push({paneSize:"0px",minSize:"0px",maxSize:null,collapsible:!0,resizable:!0})},_insertSplitBar:function(){if(this.panes.length>1)for(var r=this.model.orientation.substr(0,1),u,f,i,n=0;n<this.panes.length-1;n++)i=t.buildTag("span.splitbar "+r+"-bar","",{},{index:n}),this.model.properties[n].collapsible&&this.model.properties[n+1].collapsible&&(u=t.buildTag("span.collapse "+r+"-arrow "+r+"-backward"),i.append(u),f=t.buildTag("span.expand "+r+"-arrow "+r+"-forward"),i.append(f),this._on(u,"mousedown",this._collapseArrowClick),this._on(f,"mousedown",this._expandArrowClick)),i.insertAfter(this.panes[n]),this.model.properties[n].resizable&&this.model.properties[n+1].resizable&&(i.addClass("r"),this._on(i,"mousedown",this._mouseDownOnDivider))},_initializeSizeArray:function(){var r=this.element.parent().width(),u=this.element.parent().height(),i=r-(this.panesCount-1)*this._bar,f=u-(this.panesCount-1)*this._bar,t;if(this.model.orientation=="horizontal")for(t=0;t<this.panes.length;t++)n(this.panes[t]).hasClass("collapsed")||(this.oldPaneSize[t]=n(this.panes[t]).width(),this.oldPanePercent[t]=this._convertToPercent(i,this.oldPaneSize[t]));else for(t=0;t<this.panes.length;t++)n(this.panes[t]).hasClass("collapsed")||(this.oldPaneSize[t]=n(this.panes[t]).height(),this.oldPanePercent[t]=this._convertToPercent(i,this.oldPaneSize[t]))},_getPaneSizeByPercent:function(){var i=this.element.parent().width(),r=this.element.parent().height(),u=i-(this.panesCount-1)*this._bar,f=r-(this.panesCount-1)*this._bar,t;if(this.widPercent=[],this.heightPercent=[],this.model.orientation=="horizontal")for(t=0;t<this.panes.length;t++)this.widPercent.push(this._convertToPercent(u,n(this.panes[t]).width()));else for(t=0;t<this.panes.length;t++)this.heightPercent.push(this._convertToPercent(f,n(this.panes[t]).height()))},_setDimentions:function(){this.model.height&&this.element.css("height",this.model.height),this.model.width&&this.element.css("width",this.model.width)},_checkProperties:function(){this.model.rtl&&this._rtl(this.model.rtl)},_rtl:function(n){n?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl")},_setPanesDimentions:function(){var r=this.containerCss,h=0,t=0,u=r=="width"?this.element.width():this.element.height(),a=!1,f=this._bar,v=[],e,i,c,y,o,s,l,p,w;if(this.panesCount>1)for(i=0;i<this.panesCount;i++)n(this.panes[i]).css(r,this.model.properties[i].paneSize),f=i==this.panesCount-1?0:f,e=r=="width"?n(this.panes[i]).width():n(this.panes[i]).height(),e=Math.round(e),e<=0?(h++,v.push(i),t+=f):a?(n(this.panes[i]).css(r,0),t+=e+f):(t+=e+f,t>u&&(t-=e-f,c=u-t,y=this.panesCount-i-1,c-=y*f,n(this.panes[i]).css(r,c),a=!0,t+=c+f));else this.panesCount==1&&(n(this.panes[0]).css(r,"100%"),t=u);if(t!=u)if(s=n(this.panes[this.panesCount-1]),t>u)o=t-u,s.css(r,o);else if(t<u)if(o=u-t,h>0)for(p=Math.round(o/h),l=0;l<h;l++)n(this.panes[v[l]]).css(r,p);else w=r=="width"?s.width():s.height(),s.css(r,Math.round(w+o));this._checkPaneSize()},_getUnit:function(n){return n=="px"?"px":n=="pt"?"pt":n.substr(1)=="%"?"%":"px"},_getNormalValue:function(n){var i=this.control,r,t,u,f;return this.model.orientation=="vertical"?(r=n.y-i.offset().top,t=r/i[0].offsetHeight,u=this.control.height()):(r=n.x-i.offset().left,t=r/i[0].offsetWidth,u=this.control.width()),t>1&&(t=1),t<0&&(t=0),f=t*u,this._trimValue(f)},_trimValue:function(n){var t,i,r;return t=1,i=n%t,r=n-i,Math.abs(i)*2>=t&&(r+=i>0?t:-t),parseFloat(r.toFixed(5))},_paneResize:function(){if(this.shadowBar==null)return!1;this.currentSplitBar=this.shadowBar.next();var t=null,i,r,u,f;i=this.shadowBar.prev(),r=this.currentSplitBar.next(),u=parseInt(this.currentSplitBar.attr("index"),10),f=parseInt(this.currentSplitBar.attr("index"),10)+1,this.model.orientation=="horizontal"?(t=this.shadowBar.offset().left,t=t-this.currentSplitBar.offset().left,n(i).css({width:t+n(i).width()+"px"}),n(r).css({width:n(r).width()-t+"px"}),this.oldPaneSize[u]=n(i).width(),this.oldPaneSize[f]=n(r).width()):(t=this.shadowBar.offset().top,t=t-this.currentSplitBar.offset().top,n(i).css({height:t+n(i).height()+"px"}),n(r).css({height:n(r).height()-t+"px"}),this.oldPaneSize[u]=n(i).height(),this.oldPaneSize[f]=n(r).height()),n("#"+this.target.id+" .shadowbar").remove(),this._checkPaneSize()},_checkPaneSize:function(){for(var i=0,u,r,f,e,t=0;t<this.panesCount;t++)u=this.containerCss=="width"?n(this.panes[t]).width():n(this.panes[t]).height(),i+=u+this._bar;i-=this._bar,r=this.containerCss=="width"?this.element.width():this.element.height(),i!=r&&(f=r-i,e=this.containerCss=="width"?n(this.panes[this.panesCount-1]).width():n(this.panes[this.panesCount-1]).height(),n(this.panes[this.panesCount-1]).css(this.containerCss,e+f))},_maxminDraggableRange:function(t){var s,h,v,y,c,e,o,u,f,i,r,l,a;s=this.shadowBar.prev(),this.currentSplitBar=this.shadowBar.next(),h=this.currentSplitBar.next(),v=this.containerCss=="width"?s.width():s.height(),y=this.containerCss=="width"?h.width():h.height(),c=this.model.orientation=="horizontal"?this.currentSplitBar[0].offsetLeft:this.currentSplitBar[0].offsetTop,e=c-v,o=y+c,u=parseInt(this.currentSplitBar.attr("index"),10),f=parseInt(this.currentSplitBar.attr("index"),10)+1,i=this.model.properties[u].maxSize,r=this.model.properties[f].maxSize,i=i!=null?parseInt(i,10):null,r=r!=null?parseInt(r,10):null,this.model.properties[u].minSize=parseInt(this.model.properties[u].minSize,10),this.model.properties[f].minSize=parseInt(this.model.properties[f].minSize,10),l=this.model.properties[u].minSize<30?30:this.model.properties[u].minSize,a=this.model.properties[f].minSize<30?30:this.model.properties[f].minSize,n(this.shadowBar).removeClass("endrangeindicator"),t>o-a?(this.resizedPosition=o-a,n(this.shadowBar).addClass("endrangeindicator")):t<e+l&&(this.resizedPosition=e+l,n(this.shadowBar).addClass("endrangeindicator")),i!=null&&t>e+i&&(this.resizedPosition=e+i,n(this.shadowBar).addClass("endrangeindicator")),r!=null&&t<o-r&&(this.resizedPosition=o-r,n(this.shadowBar).addClass("endrangeindicator"))},_collapseArrowClick:function(t){var o,r,i,s,f,e,c,u,l,a,v,y,h;if(this.currentSplitBar=n(t.target).parent(),u={},o=parseInt(this.currentSplitBar.attr("index"),10),r=this.currentSplitBar.prev(),i=this.currentSplitBar.next(),s=o,f=o+1,e=this.containerCss=="width"?r.width():r.height(),c=this.containerCss=="width"?i.width():i.height(),l=this,a={paneObj:r,paneIndex:s,prevSize:e},v={paneObj:i,paneIndex:f,prevSize:c},i.hasClass("collapsed")){if(e<this.oldPaneSize[f])return this.currArrow=n(t.target),n(t.target).addClass("endrangeindicator"),n(window).bind("mouseup",n.proxy(this._mouseUpOnArrow,this)),!1;r.removeClass("expanded"),i.removeClass("collapsed"),n(t.target).parent().addClass("r"),n(t.target).siblings().css("display","block"),f!=this.panesCount-1&&(h=i.next(),h.find(".collapse").css("display","block"),h.next().hasClass("collapsed")||h.addClass("r")),u[this.containerCss]=this.oldPaneSize[f],i.animate(u,this.model.animationSpeed),u[this.containerCss]=e-this.oldPaneSize[f],r.animate(u,this.model.animationSpeed,function(){l._raiseEvent(a,v,o)})}else this.oldPaneSize[s]=e,r.addClass("collapsed"),i.addClass("expanded"),n(t.target).parent().removeClass("r"),n(t.target).css("display","none"),s!=0&&(y=r.prev(),y.find(".expand").css("display","none"),y.removeClass("r")),u[this.containerCss]=0,r.animate(u,this.model.animationSpeed),u[this.containerCss]=e+c,i.animate(u,this.model.animationSpeed,function(){l._raiseEvent(a,v,o)});this._getPaneSizeByPercent()},_expandArrowClick:function(t){var o,i,r,f,s,c,e,u,l,a,v,y,h;if(this.currentSplitBar=n(t.target).parent(),u={},o=parseInt(this.currentSplitBar.attr("index"),10),i=this.currentSplitBar.prev(),r=this.currentSplitBar.next(),f=o,s=o+1,c=this.containerCss=="width"?i.width():i.height(),e=this.containerCss=="width"?r.width():r.height(),l=this,a={paneObj:r,paneIndex:s,prevSize:e},v={paneObj:i,paneIndex:f,prevSize:c},i.hasClass("collapsed")){if(e<this.oldPaneSize[f])return this.currArrow=n(t.target),n(t.target).addClass("endrangeindicator"),n(window).bind("mouseup",n.proxy(this._mouseUpOnArrow,this)),!1;i.removeClass("collapsed"),r.removeClass("expanded"),n(t.target).parent().addClass("r"),n(t.target).siblings().css("display","block"),f!=0&&(h=i.prev(),h.find(".expand").css("display","block"),h.prev().hasClass("collapsed")||h.addClass("r")),u[this.containerCss]=this.oldPaneSize[f],i.animate(u,this.model.animationSpeed),u[this.containerCss]=e-this.oldPaneSize[f],r.animate(u,this.model.animationSpeed,function(){l._raiseEvent(a,v,o)})}else this.oldPaneSize[s]=e,i.addClass("expanded"),r.addClass("collapsed"),n(t.target).parent().removeClass("r"),n(t.target).css("display","none"),s!=this.panesCount-1&&(y=r.next(),y.find(".collapse").css("display","none"),y.removeClass("r")),u[this.containerCss]=c+e,i.animate(u,this.model.animationSpeed),u[this.containerCss]=0,r.animate(u,this.model.animationSpeed,function(){l._raiseEvent(a,v,o)});this._getPaneSizeByPercent()},_raiseEvent:function(n,t,i){this.model.expandCollapse&&this._trigger("expandCollapse",{collapsed:n,expanded:t,splitbarIndex:i,splitterId:this.element[0].id})},_mouseUpOnArrow:function(){this.currArrow.removeClass("endrangeindicator"),n(window).unbind("mouseup",n.proxy(this._mouseUpOnArrow,this))},_mouseDownOnDivider:function(t){if(t.preventDefault(),n(t.target).hasClass("splitbar")&&n(t.target).hasClass("r")){var i=this.displayCss=="left"?t.target.offsetLeft:t.target.offsetTop;this.shadowBar=n(t.target).clone().addClass("shadowbar").insertBefore(t.target).css(this.displayCss,i),this.shadowBar.children().remove(),n(document).bind("mousemove",n.proxy(this._mouseMoveOnDivider,this)),n(document).bind("mouseup",n.proxy(this._mouseUpOnDivider,this))}},_mouseMoveOnDivider:function(t){var i={x:t.pageX,y:t.pageY};this.resizedPosition=this._getNormalValue(i),this._maxminDraggableRange(this.resizedPosition),n(".e-splitter .shadowbar").css(this.displayCss,this.resizedPosition)},_mouseUpOnDivider:function(){this._paneResize(),this._getPaneSizeByPercent(),this.model.resize&&this._trigger("resize"),n(document).unbind("mousemove",n.proxy(this._mouseMoveOnDivider,this)),n(document).unbind("mouseup",n.proxy(this._mouseUpOnDivider,this)),this.shadowBar=null},_windowResized:function(){var e=this.element.parent().width(),o=this.element.parent().height(),i=e-(this.panesCount-1)*this._bar,r=o-(this.panesCount-1)*this._bar,t,u,f;if(this.model.orientation=="horizontal")for(t=0;t<this.panesCount;t++)u=this._convertToPixel(i,this.widPercent[t]),n(this.panes[t]).css("width",u+"px");else for(t=0;t<this.panesCount;t++)f=this._convertToPixel(r,this.heightPercent[t]),n(this.panes[t]).css("height",f+"px");if(this._checkPaneSize(),this.model.orientation=="horizontal")for(t=0;t<this.oldPaneSize.length;t++)this.oldPaneSize[t]=this._convertToPixel(i,this.oldPanePercent[t]);else for(t=0;t<this.oldPaneSize.length;t++)this.oldPaneSize[t]=this._convertToPixel(r,this.oldPanePercent[t])},_convertToPercent:function(n,t){return t*100/n},_convertToPixel:function(n,t){return Math.round(n*t/100)},_wireEvents:function(t){t&&n(window).bind("resize",n.proxy(this._windowResized,this))},_unWireEvents:function(){n(window).unbind("resize",n.proxy(this._windowResized,this))}})})(jQuery,Syncfusion)