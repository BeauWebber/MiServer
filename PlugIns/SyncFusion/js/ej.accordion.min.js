/*!
*  filename: ej.accordion.min.js
*  version : 11.2.0.63
*  Copyright Syncfusion Inc. 2001 - 2013. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
(function(n,t){t.widget("ejAccordion","ej.Accordion",{_rootCSS:"e-acrdn",element:null,model:null,defaults:{collapsible:!1,ajaxOptions:{type:"GET",cache:!1,data:{},dataType:"html",contentType:"html",async:!0},event:"click",iconCSS:{header:"e-acrdn-collapsicon",selectedHeader:"e-acrdn-expandicon"},heightStyle:"content",selectedItemIndex:0,cssClass:"",rtl:!1,roundedCorner:!1,allowKeyboardNavigation:!0,multipleOpen:!1,selectedItems:[0],disabled:[],persist:!1,ajaxLoad:null,ajaxBeforeLoad:null,active:null,beforeActive:null,ajaxSuccess:null,ajaxError:null},dataTypes:{cssClass:"string",collapsible:"boolean",event:"string",heightStyle:"enum",selectedItemIndex:"number"},setWidth:function(){},_init:function(){this._renderControl()},_setModel:function(n){for(var t in n)switch(t){case"event":this._unWireEvents(),this._wireEvents();break;case"selectedItemIndex":this._activeTab(n[t]);break;case"heightStyle":this._setHeightStyle(n[t]);break;case"cssClass":this._changeSkin(n[t]);break;case"roundedCorner":this._roundedCorner(n[t]);break;case"allowKeyboardNavigation":n[t]?this._on(this.element,"keydown",this._keyPress):this._off(this.element,"keydown");break;case"rtl":n[t]?this.element.addClass("e-rtl"):this.element.removeClass("e-rtl");break;case"selectedItems":this._selectedItemsAction(n[t])}},_changeSkin:function(n){this.model.cssClass!=n&&this.element.removeClass(this.model.cssClass).addClass(n)},_destroy:function(){this._removeBaseClass(),this.element.removeClass("e-acrdn"),this._headers.removeClass("e-acrdn-header-active e-state-active e-state-disabled"),this._contentPanels.removeClass("e-acrdn-content-active e-state-disabled"),n(this._headers.find(".e-icon")).remove()},_renderControl:function(){this._headers=this.element.find("> :even"),this.element.attr("tabindex",0),this._contentPanels=this._headers.next(),this._addBaseClass(),this._setHeightStyle(this.model.heightStyle),this._nagativeIndexCheck(this.model.selectedItemIndex),this._renderHeaderIcon(),this._wireEvents(),this._roundedCorner(this.model.roundedCorner),this._selectedItemsAction(this.model.selectedItems)},_selectedItemsAction:function(n){if(this.model.multipleOpen)for(var t=0;t<n.length;t++)this._activeTab(n[t]);else this._activeTab(this.model.selectedItemIndex)},_addBaseClass:function(){this.element.addClass(this.model.cssClass),this.model.rtl&&this.element.addClass("e-rtl"),this._headers.addClass("e-acrdn-header e-state-default"),this._contentPanels.addClass("e-acrdn-content").hide()},_removeBaseClass:function(){this._headers.removeClass("e-acrdn-header e-state-default"),this._contentPanels.removeClass("e-acrdn-content").show()},_roundedCorner:function(n){n?(this._headers.addClass("e-corner-all"),this.element.find(".e-acrdn-header-active").removeClass("e-corner-all").addClass("e-corner-top"),this.element.find(".e-acrdn-content-active").addClass("e-corner-bottom")):this._headers.hasClass("e-corner-all")&&(this._headers.removeClass("e-corner-all"),this.element.find(".e-acrdn-header-active").removeClass("e-corner-top"),this.element.find(".e-acrdn-content-active").addClass("e-corner-bottom"))},_nagativeIndexCheck:function(n){(n<0||n>=this._headers.length)&&(this.model.selectedItemIndex=0)},_activeTab:function(t){var i,r,u;if(n.inArray(t,this.model.disabled)<0){if(i={activeIndex:t},!0===this._trigger("beforeActive",i))return!1;this.model.multipleOpen||this._hideTab(this.model.selectedItemIndex),this.model.selectedItemIndex=t,r=this.model.iconCSS,this._activeHeader=this._headers.eq(t).addClass("e-acrdn-header-active e-state-active"),this._activeHeader.find(".e-icon").removeClass(r.header).addClass(r.selectedHeader),this._addSelectedItems(t),this._ajaxLoad(),this._roundedCorner(this.model.roundedCorner),i={activeHeader:this._activeHeader,activePanel:this._activeContent,activeIndex:this.model.selectedItemIndex},u=this,this._activeContent=this._activeHeader.next().addClass("e-acrdn-content-active").slideDown(300,"easeOutQuad",function(){u._trigger("active",i)})}},_hideTab:function(n){var t=this.model.iconCSS;n>=0&&(this._activeHeader=this._headers.eq(n).removeClass("e-acrdn-header-active e-state-active"),this._activeHeader.find(".e-icon").removeClass(t.selectedHeader).addClass(t.header),this._activeHeader.next().removeClass("e-acrdn-content-active").slideUp(200,"easeOutQuad"),this._deleteSelectedItems(n))},_renderHeaderIcon:function(){var n,i;this._headers.find(".e-icon").length<=0&&(n=this.model.iconCSS,n&&(i=t.buildTag("span.e-icon "+n.header).prependTo(this._headers),this._headers.eq(this.model.selectedItemIndex).find(".e-icon").removeClass(n.header).addClass(n.selectedHeader)))},_ajaxLoad:function(){var t=this._activeHeader.find("a[href]"),r,i;t.length>0&&(r=n(this._contentPanels[this.model.selectedItemIndex]),i=n(t).attr("href"),i&&i!=="#"&&this._sendAjaxOptions(r,t[0]))},_sendAjaxOptions:function(t,i){if(!0===this._trigger("ajaxBeforeLoad",{url:i}))return!1;t.addClass("e-loading");var r=this,u=n(i).html(),f=i.href.replace("#",""),e={type:this.model.ajaxOptions.type,cache:this.model.ajaxOptions.cache,url:f,data:this.model.ajaxOptions.data,dataType:this.model.ajaxOptions.dataType,contentType:this.model.ajaxOptions.contentType,async:this.model.ajaxOptions.async,success:function(n){try{r._ajaxSuccessHandler(n,t,i,u)}catch(f){}},error:function(){try{r._ajaxErrorHandler(data,i,r.model.selectedItemIndex,u)}catch(n){}}};this._sendAjaxRequest(e)},_sendAjaxRequest:function(t){n.ajax({type:t.type,cache:t.cache,url:t.url,dataType:t.dataType,data:t.data,contentType:t.contentType,async:t.async,success:t.success,error:t.error,beforeSend:t.beforeSend,complete:t.complete})},_ajaxSuccessHandler:function(t,i,r,u){u!=null&&n(r).html(u),i.removeClass("e-loading"),i.html(t).addClass("e-acrdn-loaded");var f={data:t,url:r,content:i};this._trigger("ajaxSuccess",f),this._trigger("ajaxLoad")},_ajaxErrorHandler:function(n,t){this._trigger("ajaxError",{data:n,url:t}),this._trigger("ajaxLoad")},_setHeightStyle:function(i){var u=this,r,f;t.Accordion.heightStyle.Fill==i?(r=this._getDimension(n(this.element).parent(),"height"),n(this.element).parent().css({overflow:"auto"}),u._headers.each(function(){r-=u._getDimension(n(this),"outerHeight")}),f=0,u._headers.next().each(function(){f=Math.max(f,u._getDimension(n(this),"innerHeight")-u._getDimension(n(this),"height"))}).height(r-f).css({overflow:"auto"})):t.Accordion.heightStyle.Auto==i&&(r=0,u._headers.next().each(function(){r=Math.max(r,u._getDimension(n(this),"outerHeight"))}).height(r),this.maxAutoHeight=r)},_getDimension:function(t,i){var u,f=n(t).parents().andSelf().filter(":hidden"),r={visibility:"hidden",display:"block"},e=[];return f.each(function(){var t={},n;for(n in r)t[n]=this.style[n],this.style[n]=r[n];e.push(t)}),u=/(outer)/g.test(i)?n(t)[i](!0):n(t)[i](),f.each(function(n){var i=e[n],t;for(t in r)this.style[t]=i[t]}),u},_headerEventHandler:function(t){t.preventDefault();var r=n(t.currentTarget),i=this._headers.index(r);this.model.multipleOpen&&this._headers.eq(i).hasClass("e-acrdn-header-active")?this._hideTab(i):this.model.selectedItemIndex==i&&this.model.collapsible?(this._hideTab(this.model.selectedItemIndex),this.model.selectedItemIndex=-1):this._headers.eq(i).hasClass("e-acrdn-header-active")||this._activeTab(i)},_addSelectedItems:function(t){n.inArray(t,this.model.selectedItems)<0&&this.model.selectedItems.push(t)},_deleteSelectedItems:function(t){n.inArray(t,this.model.selectedItems)>-1&&(position=n.inArray(t,this.model.selectedItems),this.model.selectedItems.splice(position,1))},_deleteDisabledItems:function(t){n.inArray(t,this.model.disabled)>-1&&(position=n.inArray(t,this.model.disabled),this.model.disabled.splice(position,1))},_keyPress:function(n){n.preventDefault(),code=n.keyCode?n.keyCode:n.which?n.which:n.charCode;switch(code){case 39:case 40:this.model.selectedItemIndex!=this.panelCount()-1?this._activeTab(this.model.selectedItemIndex+1):this.model.selectedItemIndex==this.panelCount()-1&&this._activeTab(0);break;case 38:case 37:this.model.selectedItemIndex!=0?this._activeTab(this.model.selectedItemIndex-1):this.model.selectedItemIndex==0&&this._activeTab(this.panelCount()-1);break;case 35:this.model.selectedItemIndex!=this.panelCount()-1&&this._activeTab(this.panelCount()-1);break;case 36:this.model.selectedItemIndex!=0&&this._activeTab(0)}},_wireEvents:function(){this._on(this._headers,this.model.event,this._headerEventHandler),this.model.allowKeyboardNavigation&&this._on(this.element,"keydown",this._keyPress)},_unWireEvents:function(){this._headers.unbind(this.model.event)},enable:function(t){if(n.isArray(t))for(var i=0;i<t.length;i++)n(this._headers[t[i]]).removeClass("e-state-disabled"),n(this._contentPanels[t[i]]).removeClass("e-state-disabled"),this._on(n(this._headers[t[i]]),this.model.event,this._headerEventHandler),this._deleteDisabledItems(t[i]);else n(this._headers[t]).removeClass("e-state-disabled"),n(this._contentPanels[t]).removeClass("e-state-disabled"),this._on(n(this._headers[t]),this.model.event,this._headerEventHandler),this._deleteDisabledItems(t)},disable:function(t){if(n.isArray(t))for(var i=0;i<t.length;i++)n(this._headers[t[i]]).addClass("e-state-disabled"),n(this._contentPanels[t[i]]).addClass("e-state-disabled"),n(this._headers[t[i]]).unbind(this.model.event),this.model.disabled.push(t[i]);else n(this._headers[t]).addClass("e-state-disabled"),n(this._contentPanels[t]).addClass("e-state-disabled"),n(this._headers[t]).unbind(this.model.event),this.model.disabled.push(t)},disableAll:function(){for(var i,t=0;t<this._headers.length;t++)n(this._headers[t]).addClass("e-state-disabled"),n(this._contentPanels[t]).addClass("e-state-disabled"),this.model.disabled.push(t);this._unWireEvents(),i={disabledItemsIndex:this.model.disabled},this.model.onDisable&&this._trigger("disable",i)},enableAll:function(){for(var i=[],r,t=0;t<this._headers.length;t++)n(this._headers[t]).removeClass("e-state-disabled"),n(this._contentPanels[t]).removeClass("e-state-disabled"),i.push(t);this.model.disabled=[],this._unWireEvents(),this._wireEvents(),r={enabledItemsIndex:i},this.model.onEnable&&this._trigger("enable",r)},selected:function(n){n!=null&&this.model.selectedItemIndex!=n&&this._activeTab(n)},showAccordion:function(){this.element.css("visibility","visible")},hideAccordion:function(){this.element.css("visibility","hidden")},panelCount:function(){if(this._headers)return this._headers.length}}),t.Accordion.heightStyle={Content:"content",Auto:"auto",Fill:"fill"}})(jQuery,Syncfusion)